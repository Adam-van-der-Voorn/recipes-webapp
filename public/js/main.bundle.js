/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var e,t,n={9376:e=>{var t;t={rad:{name:{singular:"radian",plural:"radians"},to_anchor:180/Math.PI},deg:{name:{singular:"degree",plural:"degrees"},to_anchor:1},grad:{name:{singular:"gradian",plural:"gradians"},to_anchor:.9},arcmin:{name:{singular:"arcminute",plural:"arcminutes"},to_anchor:1/60},arcsec:{name:{singular:"arcsecond",plural:"arcseconds"},to_anchor:1/3600}},e.exports={metric:t,_anchors:{metric:{unit:"deg",ratio:1}}}},3509:e=>{var t;t={VA:{name:{singular:"Volt-Ampere",plural:"Volt-Amperes"},to_anchor:1},mVA:{name:{singular:"Millivolt-Ampere",plural:"Millivolt-Amperes"},to_anchor:.001},kVA:{name:{singular:"Kilovolt-Ampere",plural:"Kilovolt-Amperes"},to_anchor:1e3},MVA:{name:{singular:"Megavolt-Ampere",plural:"Megavolt-Amperes"},to_anchor:1e6},GVA:{name:{singular:"Gigavolt-Ampere",plural:"Gigavolt-Amperes"},to_anchor:1e9}},e.exports={metric:t,_anchors:{metric:{unit:"VA",ratio:1}}}},3930:e=>{var t,n;t={mm2:{name:{singular:"Square Millimeter",plural:"Square Millimeters"},to_anchor:1e-6},cm2:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:1e-4},m2:{name:{singular:"Square Meter",plural:"Square Meters"},to_anchor:1},ha:{name:{singular:"Hectare",plural:"Hectares"},to_anchor:1e4},km2:{name:{singular:"Square Kilometer",plural:"Square Kilometers"},to_anchor:1e6}},n={in2:{name:{singular:"Square Inch",plural:"Square Inches"},to_anchor:1/144},yd2:{name:{singular:"Square Yard",plural:"Square Yards"},to_anchor:9},ft2:{name:{singular:"Square Foot",plural:"Square Feet"},to_anchor:1},ac:{name:{singular:"Acre",plural:"Acres"},to_anchor:43560},mi2:{name:{singular:"Square Mile",plural:"Square Miles"},to_anchor:27878400}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"m2",ratio:10.7639},imperial:{unit:"ft2",ratio:1/10.7639}}}},7550:e=>{var t;t={A:{name:{singular:"Ampere",plural:"Amperes"},to_anchor:1},mA:{name:{singular:"Milliampere",plural:"Milliamperes"},to_anchor:.001},kA:{name:{singular:"Kiloampere",plural:"Kiloamperes"},to_anchor:1e3}},e.exports={metric:t,_anchors:{metric:{unit:"A",ratio:1}}}},999:e=>{var t,n;t={b:{name:{singular:"Bit",plural:"Bits"},to_anchor:1},Kb:{name:{singular:"Kilobit",plural:"Kilobits"},to_anchor:1024},Mb:{name:{singular:"Megabit",plural:"Megabits"},to_anchor:1048576},Gb:{name:{singular:"Gigabit",plural:"Gigabits"},to_anchor:1073741824},Tb:{name:{singular:"Terabit",plural:"Terabits"},to_anchor:1099511627776}},n={B:{name:{singular:"Byte",plural:"Bytes"},to_anchor:1},KB:{name:{singular:"Kilobyte",plural:"Kilobytes"},to_anchor:1024},MB:{name:{singular:"Megabyte",plural:"Megabytes"},to_anchor:1048576},GB:{name:{singular:"Gigabyte",plural:"Gigabytes"},to_anchor:1073741824},TB:{name:{singular:"Terabyte",plural:"Terabytes"},to_anchor:1099511627776}},e.exports={bits:t,bytes:n,_anchors:{bits:{unit:"b",ratio:1/8},bytes:{unit:"B",ratio:8}}}},7466:e=>{var t;t={ea:{name:{singular:"Each",plural:"Each"},to_anchor:1},dz:{name:{singular:"Dozen",plural:"Dozens"},to_anchor:12}},e.exports={metric:t,imperial:{},_anchors:{metric:{unit:"ea",ratio:1}}}},331:e=>{var t;t={Wh:{name:{singular:"Watt-hour",plural:"Watt-hours"},to_anchor:3600},mWh:{name:{singular:"Milliwatt-hour",plural:"Milliwatt-hours"},to_anchor:3.6},kWh:{name:{singular:"Kilowatt-hour",plural:"Kilowatt-hours"},to_anchor:36e5},MWh:{name:{singular:"Megawatt-hour",plural:"Megawatt-hours"},to_anchor:36e8},GWh:{name:{singular:"Gigawatt-hour",plural:"Gigawatt-hours"},to_anchor:36e11},J:{name:{singular:"Joule",plural:"Joules"},to_anchor:1},kJ:{name:{singular:"Kilojoule",plural:"Kilojoules"},to_anchor:1e3}},e.exports={metric:t,_anchors:{metric:{unit:"J",ratio:1}}}},8377:e=>{var t;t={mHz:{name:{singular:"millihertz",plural:"millihertz"},to_anchor:.001},Hz:{name:{singular:"hertz",plural:"hertz"},to_anchor:1},kHz:{name:{singular:"kilohertz",plural:"kilohertz"},to_anchor:1e3},MHz:{name:{singular:"megahertz",plural:"megahertz"},to_anchor:1e6},GHz:{name:{singular:"gigahertz",plural:"gigahertz"},to_anchor:1e9},THz:{name:{singular:"terahertz",plural:"terahertz"},to_anchor:1e12},rpm:{name:{singular:"rotation per minute",plural:"rotations per minute"},to_anchor:1/60},"deg/s":{name:{singular:"degree per second",plural:"degrees per second"},to_anchor:1/360},"rad/s":{name:{singular:"radian per second",plural:"radians per second"},to_anchor:1/(2*Math.PI)}},e.exports={metric:t,_anchors:{frequency:{unit:"hz",ratio:1}}}},6090:e=>{var t,n;t={lx:{name:{singular:"Lux",plural:"Lux"},to_anchor:1}},n={"ft-cd":{name:{singular:"Foot-candle",plural:"Foot-candles"},to_anchor:1}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"lx",ratio:1/10.76391},imperial:{unit:"ft-cd",ratio:10.76391}}}},2235:e=>{var t,n;t={mm:{name:{singular:"Millimeter",plural:"Millimeters"},to_anchor:.001},cm:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:.01},m:{name:{singular:"Meter",plural:"Meters"},to_anchor:1},km:{name:{singular:"Kilometer",plural:"Kilometers"},to_anchor:1e3}},n={in:{name:{singular:"Inch",plural:"Inches"},to_anchor:1/12},yd:{name:{singular:"Yard",plural:"Yards"},to_anchor:3},"ft-us":{name:{singular:"US Survey Foot",plural:"US Survey Feet"},to_anchor:1.000002},ft:{name:{singular:"Foot",plural:"Feet"},to_anchor:1},mi:{name:{singular:"Mile",plural:"Miles"},to_anchor:5280}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"m",ratio:3.28084},imperial:{unit:"ft",ratio:1/3.28084}}}},7799:e=>{var t,n;t={mcg:{name:{singular:"Microgram",plural:"Micrograms"},to_anchor:1e-6},mg:{name:{singular:"Milligram",plural:"Milligrams"},to_anchor:.001},g:{name:{singular:"Gram",plural:"Grams"},to_anchor:1},kg:{name:{singular:"Kilogram",plural:"Kilograms"},to_anchor:1e3},mt:{name:{singular:"Metric Tonne",plural:"Metric Tonnes"},to_anchor:1e6}},n={oz:{name:{singular:"Ounce",plural:"Ounces"},to_anchor:1/16},lb:{name:{singular:"Pound",plural:"Pounds"},to_anchor:1},t:{name:{singular:"Ton",plural:"Tons"},to_anchor:2e3}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"g",ratio:1/453.592},imperial:{unit:"lb",ratio:453.592}}}},3620:e=>{var t,n;t={"min/km":{name:{singular:"Minute per kilometre",plural:"Minutes per kilometre"},to_anchor:.06},"s/m":{name:{singular:"Second per metre",plural:"Seconds per metre"},to_anchor:1}},n={"min/mi":{name:{singular:"Minute per mile",plural:"Minutes per mile"},to_anchor:.0113636},"s/ft":{name:{singular:"Second per foot",plural:"Seconds per foot"},to_anchor:1}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"s/m",ratio:.3048},imperial:{unit:"s/ft",ratio:1/.3048}}}},9370:e=>{var t;t={ppm:{name:{singular:"Part-per Million",plural:"Parts-per Million"},to_anchor:1},ppb:{name:{singular:"Part-per Billion",plural:"Parts-per Billion"},to_anchor:.001},ppt:{name:{singular:"Part-per Trillion",plural:"Parts-per Trillion"},to_anchor:1e-6},ppq:{name:{singular:"Part-per Quadrillion",plural:"Parts-per Quadrillion"},to_anchor:1e-9}},e.exports={metric:t,imperial:{},_anchors:{metric:{unit:"ppm",ratio:1e-6}}}},4514:e=>{var t;t={W:{name:{singular:"Watt",plural:"Watts"},to_anchor:1},mW:{name:{singular:"Milliwatt",plural:"Milliwatts"},to_anchor:.001},kW:{name:{singular:"Kilowatt",plural:"Kilowatts"},to_anchor:1e3},MW:{name:{singular:"Megawatt",plural:"Megawatts"},to_anchor:1e6},GW:{name:{singular:"Gigawatt",plural:"Gigawatts"},to_anchor:1e9}},e.exports={metric:t,_anchors:{metric:{unit:"W",ratio:1}}}},520:e=>{var t,n;t={Pa:{name:{singular:"pascal",plural:"pascals"},to_anchor:.001},kPa:{name:{singular:"kilopascal",plural:"kilopascals"},to_anchor:1},MPa:{name:{singular:"megapascal",plural:"megapascals"},to_anchor:1e3},hPa:{name:{singular:"hectopascal",plural:"hectopascals"},to_anchor:.1},bar:{name:{singular:"bar",plural:"bar"},to_anchor:100},torr:{name:{singular:"torr",plural:"torr"},to_anchor:101325/76e4}},n={psi:{name:{singular:"pound per square inch",plural:"pounds per square inch"},to_anchor:.001},ksi:{name:{singular:"kilopound per square inch",plural:"kilopound per square inch"},to_anchor:1}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"kPa",ratio:.00014503768078},imperial:{unit:"psi",ratio:6894.76000045014}}}},4852:e=>{var t;t={VARh:{name:{singular:"Volt-Ampere Reactive Hour",plural:"Volt-Amperes Reactive Hour"},to_anchor:1},mVARh:{name:{singular:"Millivolt-Ampere Reactive Hour",plural:"Millivolt-Amperes Reactive Hour"},to_anchor:.001},kVARh:{name:{singular:"Kilovolt-Ampere Reactive Hour",plural:"Kilovolt-Amperes Reactive Hour"},to_anchor:1e3},MVARh:{name:{singular:"Megavolt-Ampere Reactive Hour",plural:"Megavolt-Amperes Reactive Hour"},to_anchor:1e6},GVARh:{name:{singular:"Gigavolt-Ampere Reactive Hour",plural:"Gigavolt-Amperes Reactive Hour"},to_anchor:1e9}},e.exports={metric:t,_anchors:{metric:{unit:"VARh",ratio:1}}}},8323:e=>{var t;t={VAR:{name:{singular:"Volt-Ampere Reactive",plural:"Volt-Amperes Reactive"},to_anchor:1},mVAR:{name:{singular:"Millivolt-Ampere Reactive",plural:"Millivolt-Amperes Reactive"},to_anchor:.001},kVAR:{name:{singular:"Kilovolt-Ampere Reactive",plural:"Kilovolt-Amperes Reactive"},to_anchor:1e3},MVAR:{name:{singular:"Megavolt-Ampere Reactive",plural:"Megavolt-Amperes Reactive"},to_anchor:1e6},GVAR:{name:{singular:"Gigavolt-Ampere Reactive",plural:"Gigavolt-Amperes Reactive"},to_anchor:1e9}},e.exports={metric:t,_anchors:{metric:{unit:"VAR",ratio:1}}}},2816:e=>{var t,n;t={"m/s":{name:{singular:"Metre per second",plural:"Metres per second"},to_anchor:3.6},"km/h":{name:{singular:"Kilometre per hour",plural:"Kilometres per hour"},to_anchor:1}},n={"m/h":{name:{singular:"Mile per hour",plural:"Miles per hour"},to_anchor:1},knot:{name:{singular:"Knot",plural:"Knots"},to_anchor:1.150779},"ft/s":{name:{singular:"Foot per second",plural:"Feet per second"},to_anchor:.681818}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"km/h",ratio:1/1.609344},imperial:{unit:"m/h",ratio:1.609344}}}},4794:e=>{var t,n;t={C:{name:{singular:"degree Celsius",plural:"degrees Celsius"},to_anchor:1,anchor_shift:0},K:{name:{singular:"degree Kelvin",plural:"degrees Kelvin"},to_anchor:1,anchor_shift:273.15}},n={F:{name:{singular:"degree Fahrenheit",plural:"degrees Fahrenheit"},to_anchor:1},R:{name:{singular:"degree Rankine",plural:"degrees Rankine"},to_anchor:1,anchor_shift:459.67}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"C",transform:function(e){return e/(5/9)+32}},imperial:{unit:"F",transform:function(e){return 5/9*(e-32)}}}}},810:e=>{var t;t={ns:{name:{singular:"Nanosecond",plural:"Nanoseconds"},to_anchor:1e-9},mu:{name:{singular:"Microsecond",plural:"Microseconds"},to_anchor:1e-6},ms:{name:{singular:"Millisecond",plural:"Milliseconds"},to_anchor:.001},s:{name:{singular:"Second",plural:"Seconds"},to_anchor:1},min:{name:{singular:"Minute",plural:"Minutes"},to_anchor:60},h:{name:{singular:"Hour",plural:"Hours"},to_anchor:3600},d:{name:{singular:"Day",plural:"Days"},to_anchor:86400},week:{name:{singular:"Week",plural:"Weeks"},to_anchor:604800},month:{name:{singular:"Month",plural:"Months"},to_anchor:2629800},year:{name:{singular:"Year",plural:"Years"},to_anchor:31557600}},e.exports={metric:t,_anchors:{metric:{unit:"s",ratio:1}}}},6009:e=>{var t;t={V:{name:{singular:"Volt",plural:"Volts"},to_anchor:1},mV:{name:{singular:"Millivolt",plural:"Millivolts"},to_anchor:.001},kV:{name:{singular:"Kilovolt",plural:"Kilovolts"},to_anchor:1e3}},e.exports={metric:t,_anchors:{metric:{unit:"V",ratio:1}}}},3493:e=>{var t,n;t={mm3:{name:{singular:"Cubic Millimeter",plural:"Cubic Millimeters"},to_anchor:1e-6},cm3:{name:{singular:"Cubic Centimeter",plural:"Cubic Centimeters"},to_anchor:.001},ml:{name:{singular:"Millilitre",plural:"Millilitres"},to_anchor:.001},cl:{name:{singular:"Centilitre",plural:"Centilitres"},to_anchor:.01},dl:{name:{singular:"Decilitre",plural:"Decilitres"},to_anchor:.1},l:{name:{singular:"Litre",plural:"Litres"},to_anchor:1},kl:{name:{singular:"Kilolitre",plural:"Kilolitres"},to_anchor:1e3},m3:{name:{singular:"Cubic meter",plural:"Cubic meters"},to_anchor:1e3},km3:{name:{singular:"Cubic kilometer",plural:"Cubic kilometers"},to_anchor:1e12},krm:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.001},tsk:{name:{singular:"Tesked",plural:"Teskedar"},to_anchor:.005},msk:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.015},kkp:{name:{singular:"Kaffekopp",plural:"Kaffekoppar"},to_anchor:.15},glas:{name:{singular:"Glas",plural:"Glas"},to_anchor:.2},kanna:{name:{singular:"Kanna",plural:"Kannor"},to_anchor:2.617}},n={tsp:{name:{singular:"Teaspoon",plural:"Teaspoons"},to_anchor:1/6},Tbs:{name:{singular:"Tablespoon",plural:"Tablespoons"},to_anchor:.5},in3:{name:{singular:"Cubic inch",plural:"Cubic inches"},to_anchor:.55411},"fl-oz":{name:{singular:"Fluid Ounce",plural:"Fluid Ounces"},to_anchor:1},cup:{name:{singular:"Cup",plural:"Cups"},to_anchor:8},pnt:{name:{singular:"Pint",plural:"Pints"},to_anchor:16},qt:{name:{singular:"Quart",plural:"Quarts"},to_anchor:32},gal:{name:{singular:"Gallon",plural:"Gallons"},to_anchor:128},ft3:{name:{singular:"Cubic foot",plural:"Cubic feet"},to_anchor:957.506},yd3:{name:{singular:"Cubic yard",plural:"Cubic yards"},to_anchor:25852.7}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"l",ratio:33.8140226},imperial:{unit:"fl-oz",ratio:1/33.8140226}}}},7251:e=>{var t,n;t={"mm3/s":{name:{singular:"Cubic Millimeter per second",plural:"Cubic Millimeters per second"},to_anchor:1e-6},"cm3/s":{name:{singular:"Cubic Centimeter per second",plural:"Cubic Centimeters per second"},to_anchor:.001},"ml/s":{name:{singular:"Millilitre per second",plural:"Millilitres per second"},to_anchor:.001},"cl/s":{name:{singular:"Centilitre per second",plural:"Centilitres per second"},to_anchor:.01},"dl/s":{name:{singular:"Decilitre per second",plural:"Decilitres per second"},to_anchor:.1},"l/s":{name:{singular:"Litre per second",plural:"Litres per second"},to_anchor:1},"l/min":{name:{singular:"Litre per minute",plural:"Litres per minute"},to_anchor:1/60},"l/h":{name:{singular:"Litre per hour",plural:"Litres per hour"},to_anchor:1/3600},"kl/s":{name:{singular:"Kilolitre per second",plural:"Kilolitres per second"},to_anchor:1e3},"kl/min":{name:{singular:"Kilolitre per minute",plural:"Kilolitres per minute"},to_anchor:50/3},"kl/h":{name:{singular:"Kilolitre per hour",plural:"Kilolitres per hour"},to_anchor:5/18},"m3/s":{name:{singular:"Cubic meter per second",plural:"Cubic meters per second"},to_anchor:1e3},"m3/min":{name:{singular:"Cubic meter per minute",plural:"Cubic meters per minute"},to_anchor:50/3},"m3/h":{name:{singular:"Cubic meter per hour",plural:"Cubic meters per hour"},to_anchor:5/18},"km3/s":{name:{singular:"Cubic kilometer per second",plural:"Cubic kilometers per second"},to_anchor:1e12}},n={"tsp/s":{name:{singular:"Teaspoon per second",plural:"Teaspoons per second"},to_anchor:1/6},"Tbs/s":{name:{singular:"Tablespoon per second",plural:"Tablespoons per second"},to_anchor:.5},"in3/s":{name:{singular:"Cubic inch per second",plural:"Cubic inches per second"},to_anchor:.55411},"in3/min":{name:{singular:"Cubic inch per minute",plural:"Cubic inches per minute"},to_anchor:.55411/60},"in3/h":{name:{singular:"Cubic inch per hour",plural:"Cubic inches per hour"},to_anchor:.55411/3600},"fl-oz/s":{name:{singular:"Fluid Ounce per second",plural:"Fluid Ounces per second"},to_anchor:1},"fl-oz/min":{name:{singular:"Fluid Ounce per minute",plural:"Fluid Ounces per minute"},to_anchor:1/60},"fl-oz/h":{name:{singular:"Fluid Ounce per hour",plural:"Fluid Ounces per hour"},to_anchor:1/3600},"cup/s":{name:{singular:"Cup per second",plural:"Cups per second"},to_anchor:8},"pnt/s":{name:{singular:"Pint per second",plural:"Pints per second"},to_anchor:16},"pnt/min":{name:{singular:"Pint per minute",plural:"Pints per minute"},to_anchor:4/15},"pnt/h":{name:{singular:"Pint per hour",plural:"Pints per hour"},to_anchor:1/225},"qt/s":{name:{singular:"Quart per second",plural:"Quarts per second"},to_anchor:32},"gal/s":{name:{singular:"Gallon per second",plural:"Gallons per second"},to_anchor:128},"gal/min":{name:{singular:"Gallon per minute",plural:"Gallons per minute"},to_anchor:32/15},"gal/h":{name:{singular:"Gallon per hour",plural:"Gallons per hour"},to_anchor:8/225},"ft3/s":{name:{singular:"Cubic foot per second",plural:"Cubic feet per second"},to_anchor:957.506},"ft3/min":{name:{singular:"Cubic foot per minute",plural:"Cubic feet per minute"},to_anchor:957.506/60},"ft3/h":{name:{singular:"Cubic foot per hour",plural:"Cubic feet per hour"},to_anchor:957.506/3600},"yd3/s":{name:{singular:"Cubic yard per second",plural:"Cubic yards per second"},to_anchor:25852.7},"yd3/min":{name:{singular:"Cubic yard per minute",plural:"Cubic yards per minute"},to_anchor:25852.7/60},"yd3/h":{name:{singular:"Cubic yard per hour",plural:"Cubic yards per hour"},to_anchor:25852.7/3600}},e.exports={metric:t,imperial:n,_anchors:{metric:{unit:"l/s",ratio:33.8140227},imperial:{unit:"fl-oz/s",ratio:1/33.8140227}}}},7322:(e,t,n)=>{var r,i,s=n(9410),o=n(7734),a={length:n(2235),area:n(3930),mass:n(7799),volume:n(3493),each:n(7466),temperature:n(4794),time:n(810),digital:n(999),partsPer:n(9370),speed:n(2816),pace:n(3620),pressure:n(520),current:n(7550),voltage:n(6009),power:n(4514),reactivePower:n(8323),apparentPower:n(3509),energy:n(331),reactiveEnergy:n(4852),volumeFlowRate:n(7251),illuminance:n(6090),frequency:n(8377),angle:n(9376)};(i=function(e,t){this.val=t?e/t:e}).prototype.from=function(e){if(this.destination)throw new Error(".from must be called before .to");return this.origin=this.getUnit(e),this.origin||this.throwUnsupportedUnitError(e),this},i.prototype.to=function(e){if(!this.origin)throw new Error(".to must be called after .from");var t,n;if(this.destination=this.getUnit(e),this.destination||this.throwUnsupportedUnitError(e),this.origin.abbr===this.destination.abbr)return this.val;if(this.destination.measure!=this.origin.measure)throw new Error("Cannot convert incompatible measures of "+this.destination.measure+" and "+this.origin.measure);return t=this.val*this.origin.unit.to_anchor,this.origin.unit.anchor_shift&&(t-=this.origin.unit.anchor_shift),this.origin.system!=this.destination.system&&("function"==typeof(n=a[this.origin.measure]._anchors[this.origin.system].transform)?t=n(t):t*=a[this.origin.measure]._anchors[this.origin.system].ratio),this.destination.unit.anchor_shift&&(t+=this.destination.unit.anchor_shift),t/this.destination.unit.to_anchor},i.prototype.toBest=function(e){if(!this.origin)throw new Error(".toBest must be called after .from");var t;return e=Object.assign({exclude:[],cutOffNumber:1},e),o(this.possibilities(),function(n){var r=this.describe(n);if(-1===e.exclude.indexOf(n)&&r.system===this.origin.system){var i=this.to(n);(!t||i>=e.cutOffNumber&&i<t.val)&&(t={val:i,unit:n,singular:r.singular,plural:r.plural})}}.bind(this)),t},i.prototype.getUnit=function(e){var t;return o(a,(function(n,r){if(o(n,(function(n,i){return"_anchors"!=i&&(o(n,(function(n,s){if(s==e)return t={abbr:e,measure:r,system:i,unit:n},!1})),!t&&void 0)})),t)return!1})),t};var l=function(e){return{abbr:e.abbr,measure:e.measure,system:e.system,singular:e.unit.name.singular,plural:e.unit.name.plural}};i.prototype.describe=function(e){var t=i.prototype.getUnit(e),n=null;try{n=l(t)}catch(t){this.throwUnsupportedUnitError(e)}return n},i.prototype.list=function(e){var t=[];return o(a,(function(n,r){e&&e!==r||o(n,(function(e,n){if("_anchors"==n)return!1;o(e,(function(e,i){t=t.concat(l({abbr:i,measure:r,system:n,unit:e}))}))}))})),t},i.prototype.throwUnsupportedUnitError=function(e){var t=[];throw o(a,(function(e,n){o(e,(function(e,n){if("_anchors"==n)return!1;t=t.concat(s(e))}))})),new Error("Unsupported unit "+e+", use one of: "+t.join(", "))},i.prototype.possibilities=function(e){var t=[];return this.origin||e?(e=e||this.origin.measure,o(a[e],(function(e,n){if("_anchors"==n)return!1;t=t.concat(s(e))}))):o(s(a),(function(e){o(a[e],(function(e,n){if("_anchors"==n)return!1;t=t.concat(s(e))}))})),t},i.prototype.measures=function(){return s(a)},r=function(e){return new i(e)},e.exports=r},3674:(e,t,n)=>{var r=n(4834),i=n(2772),s=n(8325),o=[].push;e.exports=function(e){var t=e[0],n=e[2],a=e[4];function l(){if(n){var e=n.slice();o.apply(e,arguments)}if(this instanceof l){var s=r(t.prototype),u=t.apply(s,e||arguments);return i(u)?u:s}return t.apply(a,e||arguments)}return s(l,e),l}},4834:(e,t,n)=>{var r=n(2772),i=(n(1522),n(6458).test(i=Object.create)&&i);function s(e,t){return r(e)?i(e):{}}i||(s=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var i=new e;e.prototype=null}return i||n.g.Object()}}()),e.exports=s},386:(e,t,n)=>{var r=n(8352),i=n(1166),s=n(8325),o=n(3382),a=/^\s*function[ \n\r\t]+\w/,l=/\bthis\b/,u=Function.prototype.toString;e.exports=function(e,t,n){if("function"!=typeof e)return i;if(void 0===t||!("prototype"in e))return e;var c=e.__bindData__;if(void 0===c&&(o.funcNames&&(c=!e.name),!(c=c||!o.funcDecomp))){var h=u.call(e);o.funcNames||(c=!a.test(h)),c||(c=l.test(h),s(e,c))}if(!1===c||!0!==c&&1&c[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return r(e,t)}},1764:(e,t,n)=>{var r=n(4834),i=n(2772),s=n(8325),o=n(1984),a=[].push;e.exports=function e(t){var n=t[0],l=t[1],u=t[2],c=t[3],h=t[4],d=t[5],f=1&l,p=2&l,m=4&l,g=8&l,y=n;function v(){var t=f?h:this;if(u){var s=u.slice();a.apply(s,arguments)}if((c||m)&&(s||(s=o(arguments)),c&&a.apply(s,c),m&&s.length<d))return l|=16,e([n,g?l:-4&l,s,null,h,d]);if(s||(s=arguments),p&&(n=t[y]),this instanceof v){t=r(n.prototype);var b=n.apply(t,s);return i(b)?b:t}return n.apply(t,s)}return s(v,t),v}},7282:(e,t,n)=>{var r=n(3674),i=n(1764),s=n(9290),o=[].push;e.exports=function e(t,n,a,l,u,c){var h=1&n,d=4&n,f=16&n,p=32&n;if(!(2&n||s(t)))throw new TypeError;f&&!a.length&&(n&=-17,f=a=!1),p&&!l.length&&(n&=-33,p=l=!1);var m=t&&t.__bindData__;return m&&!0!==m?(m=m.slice(),!h||1&m[1]||(m[4]=u),!h&&1&m[1]&&(n|=8),!d||4&m[1]||(m[5]=c),f&&o.apply(m[2]||(m[2]=[]),a),p&&o.apply(m[3]||(m[3]=[]),l),m[1]|=n,e.apply(null,m)):(1==n||17===n?r:i)([t,n,a,l,u,c])}},1480:e=>{e.exports={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1}},6458:e=>{var t=Object.prototype.toString,n=RegExp("^"+String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=n},8325:(e,t,n)=>{var r=n(1522),i=n(6458),s={configurable:!1,enumerable:!1,value:null,writable:!1},o=function(){try{var e={},t=i.test(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),a=o?function(e,t){s.value=t,o(e,"__bindData__",s)}:r;e.exports=a},7434:(e,t,n)=>{var r=n(1480),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=e,s=[];if(!n)return s;if(!r[typeof e])return s;for(t in n)i.call(n,t)&&s.push(t);return s}},1984:e=>{e.exports=function(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,s=Array(i<0?0:i);++r<i;)s[r]=e[t+r];return s}},8352:(e,t,n)=>{var r=n(7282),i=(n(6458),n(1984));e.exports=function(e,t){return arguments.length>2?r(e,17,i(arguments,2),null,t):r(e,1,null,null,t)}},7734:(e,t,n)=>{var r=n(386),i=n(7808);e.exports=function(e,t,n){var s=-1,o=e?e.length:0;if(t=t&&void 0===n?t:r(t,n,3),"number"==typeof o)for(;++s<o&&!1!==t(e[s],s,e););else i(e,t);return e}},7808:(e,t,n)=>{var r=n(386),i=n(9410),s=n(1480);e.exports=function(e,t,n){var o,a=e,l=a;if(!a)return l;if(!s[typeof a])return l;t=t&&void 0===n?t:r(t,n,3);for(var u=-1,c=s[typeof a]&&i(a),h=c?c.length:0;++u<h;)if(!1===t(a[o=c[u]],o,e))return l;return l}},1166:e=>{e.exports=function(e){return e}},9290:e=>{e.exports=function(e){return"function"==typeof e}},2772:(e,t,n)=>{var r=n(1480);e.exports=function(e){return!(!e||!r[typeof e])}},9410:(e,t,n)=>{var r=n(2772),i=n(6458),s=n(7434),o=i.test(o=Object.keys)&&o,a=o?function(e){return r(e)?o(e):[]}:s;e.exports=a},1522:e=>{e.exports=function(){}},3382:(e,t,n)=>{var r=n(6458),i={};i.funcDecomp=!r.test(n.g.WinRTError)&&/\bthis\b/.test((function(){return this})),i.funcNames="string"==typeof Function.name,e.exports=i},5364:(e,t,n)=>{var r=n(2310)(n(8453),"DataView");e.exports=r},581:(e,t,n)=>{var r=n(7384),i=n(4238),s=n(2329),o=n(4037),a=n(3613);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},2839:(e,t,n)=>{var r=n(3614),i=n(2008),s=n(2715),o=n(5655),a=n(8383);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},6615:(e,t,n)=>{var r=n(2310)(n(8453),"Map");e.exports=r},2229:(e,t,n)=>{var r=n(3752),i=n(9886),s=n(6969),o=n(5989),a=n(3485);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},3676:(e,t,n)=>{var r=n(2310)(n(8453),"Promise");e.exports=r},2489:(e,t,n)=>{var r=n(2310)(n(8453),"Set");e.exports=r},7667:(e,t,n)=>{var r=n(2229),i=n(5340),s=n(1387);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,e.exports=o},8089:(e,t,n)=>{var r=n(2839),i=n(7380),s=n(8354),o=n(2413),a=n(7073),l=n(1241);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=s,u.prototype.get=o,u.prototype.has=a,u.prototype.set=l,e.exports=u},4073:(e,t,n)=>{var r=n(8453).Symbol;e.exports=r},7084:(e,t,n)=>{var r=n(8453).Uint8Array;e.exports=r},2039:(e,t,n)=>{var r=n(2310)(n(8453),"WeakMap");e.exports=r},7714:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}},8079:(e,t,n)=>{var r=n(7e3),i=n(6356),s=n(6521),o=n(9232),a=n(2753),l=n(4167),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),c=!n&&i(e),h=!n&&!c&&o(e),d=!n&&!c&&!h&&l(e),f=n||c||h||d,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||p.push(g);return p}},764:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},9512:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},714:e=>{e.exports=function(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}},1600:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},5690:e=>{e.exports=function(e){return e.split("")}},4333:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},2961:(e,t,n)=>{var r=n(2864);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1176:(e,t,n)=>{var r=n(8835);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9761:(e,t,n)=>{var r=n(9677)();e.exports=r},5161:(e,t,n)=>{var r=n(9761),i=n(4630);e.exports=function(e,t){return e&&r(e,t,i)}},2582:(e,t,n)=>{var r=n(9041),i=n(7901);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[i(t[n++])];return n&&n==s?e:void 0}},6431:(e,t,n)=>{var r=n(9512),i=n(6521);e.exports=function(e,t,n){var s=t(e);return i(e)?s:r(s,n(e))}},6624:(e,t,n)=>{var r=n(4073),i=n(7915),s=n(4478),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},706:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},677:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7382:(e,t,n)=>{var r=n(6624),i=n(2050);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},2118:(e,t,n)=>{var r=n(8196),i=n(2050);e.exports=function e(t,n,s,o,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,s,o,e,a))}},8196:(e,t,n)=>{var r=n(8089),i=n(4415),s=n(9306),o=n(2473),a=n(77),l=n(6521),u=n(9232),c=n(4167),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),w=v?d:a(e),_=b?d:a(t),E=(w=w==h?f:w)==f,x=(_=_==h?f:_)==f,S=w==_;if(S&&u(e)){if(!u(t))return!1;v=!0,E=!1}if(S&&!E)return y||(y=new r),v||c(e)?i(e,t,n,m,g,y):s(e,t,w,n,m,g,y);if(!(1&n)){var k=E&&p.call(e,"__wrapped__"),I=x&&p.call(t,"__wrapped__");if(k||I){var T=k?e.value():e,C=I?t.value():t;return y||(y=new r),g(T,C,n,m,y)}}return!!S&&(y||(y=new r),o(e,t,n,m,g,y))}},1359:(e,t,n)=>{var r=n(8089),i=n(2118);e.exports=function(e,t,n,s){var o=n.length,a=o,l=!s;if(null==e)return!a;for(e=Object(e);o--;){var u=n[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],h=e[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in e))return!1}else{var f=new r;if(s)var p=s(h,d,c,e,t,f);if(!(void 0===p?i(d,h,3,s,f):p))return!1}}return!0}},1187:(e,t,n)=>{var r=n(1330),i=n(1992),s=n(7717),o=n(1513),a=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(r(e)?d:a).test(o(e))}},4061:(e,t,n)=>{var r=n(6624),i=n(9358),s=n(2050),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!o[r(e)]}},5525:(e,t,n)=>{var r=n(3127),i=n(7234),s=n(2424),o=n(6521),a=n(9791);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):a(e)}},5152:(e,t,n)=>{var r=n(1327),i=n(5450),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3127:(e,t,n)=>{var r=n(1359),i=n(3360),s=n(3173);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},7234:(e,t,n)=>{var r=n(2118),i=n(644),s=n(3439),o=n(1922),a=n(7500),l=n(3173),u=n(7901);e.exports=function(e,t){return o(e)&&a(t)?l(u(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?s(n,e):r(t,o,3)}}},1373:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7295:(e,t,n)=>{var r=n(2582);e.exports=function(e){return function(t){return r(t,e)}}},16:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},1440:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}},7e3:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},9020:(e,t,n)=>{var r=n(4073),i=n(764),s=n(6521),o=n(6770),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8877:e=>{e.exports=function(e){return function(t){return e(t)}}},9707:e=>{e.exports=function(e,t){return e.has(t)}},9041:(e,t,n)=>{var r=n(6521),i=n(1922),s=n(5794),o=n(8382);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:s(o(e))}},3978:(e,t,n)=>{var r=n(1440);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},2353:(e,t,n)=>{var r=n(8453)["__core-js_shared__"];e.exports=r},9677:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}}},7075:(e,t,n)=>{var r=n(3978),i=n(8138),s=n(8752),o=n(8382);e.exports=function(e){return function(t){t=o(t);var n=i(t)?s(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},5467:(e,t,n)=>{var r=n(714),i=n(6068),s=n(3117),o=RegExp("['’]","g");e.exports=function(e){return function(t){return r(s(i(t).replace(o,"")),e,"")}}},7167:(e,t,n)=>{var r=n(16)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=r},8835:(e,t,n)=>{var r=n(2310),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},4415:(e,t,n)=>{var r=n(7667),i=n(1600),s=n(9707);e.exports=function(e,t,n,o,a,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var y=e[p],v=t[p];if(o)var b=u?o(v,y,p,t,e,l):o(y,v,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!s(g,t)&&(y===e||a(y,e,n,o,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!a(y,v,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},9306:(e,t,n)=>{var r=n(4073),i=n(7084),s=n(2864),o=n(4415),a=n(4533),l=n(943),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=o(f(e),f(t),r,u,h,d);return d.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},2473:(e,t,n)=>{var r=n(7162),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,o,a){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=l;++h<c;){var y=e[d=u[h]],v=t[d];if(s)var b=l?s(v,y,d,t,e,a):s(y,v,d,e,t,a);if(!(void 0===b?y===v||o(y,v,n,s,a):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(t),m}},8928:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7162:(e,t,n)=>{var r=n(6431),i=n(7328),s=n(4630);e.exports=function(e){return r(e,s,i)}},1379:(e,t,n)=>{var r=n(8802);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3360:(e,t,n)=>{var r=n(7500),i=n(4630);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var s=t[n],o=e[s];t[n]=[s,o,r(o)]}return t}},2310:(e,t,n)=>{var r=n(1187),i=n(3584);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7915:(e,t,n)=>{var r=n(4073),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}},7328:(e,t,n)=>{var r=n(7714),i=n(617),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return s.call(e,t)})))}:i;e.exports=a},77:(e,t,n)=>{var r=n(5364),i=n(6615),s=n(3676),o=n(2489),a=n(2039),l=n(6624),u=n(1513),c="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=u(r),g=u(i),y=u(s),v=u(o),b=u(a),w=l;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=c||s&&w(s.resolve())!=h||o&&w(new o)!=d||a&&w(new a)!=f)&&(w=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return p;case g:return c;case y:return h;case v:return d;case b:return f}return t}),e.exports=w},3584:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6998:(e,t,n)=>{var r=n(9041),i=n(6356),s=n(6521),o=n(2753),a=n(9358),l=n(7901);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,h=!1;++u<c;){var d=l(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=c?h:!!(c=null==e?0:e.length)&&a(c)&&o(d,c)&&(s(e)||i(e))}},8138:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},2674:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},7384:(e,t,n)=>{var r=n(7946);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},4238:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2329:(e,t,n)=>{var r=n(7946),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},4037:(e,t,n)=>{var r=n(7946),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},3613:(e,t,n)=>{var r=n(7946);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2753:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1922:(e,t,n)=>{var r=n(6521),i=n(6770),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||o.test(e)||!s.test(e)||null!=t&&e in Object(t)}},8802:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},1992:(e,t,n)=>{var r,i=n(2353),s=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!s&&s in e}},1327:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7500:(e,t,n)=>{var r=n(7717);e.exports=function(e){return e==e&&!r(e)}},3614:e=>{e.exports=function(){this.__data__=[],this.size=0}},2008:(e,t,n)=>{var r=n(2961),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2715:(e,t,n)=>{var r=n(2961);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},5655:(e,t,n)=>{var r=n(2961);e.exports=function(e){return r(this.__data__,e)>-1}},8383:(e,t,n)=>{var r=n(2961);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},3752:(e,t,n)=>{var r=n(581),i=n(2839),s=n(6615);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},9886:(e,t,n)=>{var r=n(1379);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6969:(e,t,n)=>{var r=n(1379);e.exports=function(e){return r(this,e).get(e)}},5989:(e,t,n)=>{var r=n(1379);e.exports=function(e){return r(this,e).has(e)}},3485:(e,t,n)=>{var r=n(1379);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4533:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},3173:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},6360:(e,t,n)=>{var r=n(4928);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},7946:(e,t,n)=>{var r=n(2310)(Object,"create");e.exports=r},5450:(e,t,n)=>{var r=n(951)(Object.keys,Object);e.exports=r},6273:(e,t,n)=>{e=n.nmd(e);var r=n(8928),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,o=s&&s.exports===i&&r.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},4478:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},951:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},8453:(e,t,n)=>{var r=n(8928),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();e.exports=s},5340:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1387:e=>{e.exports=function(e){return this.__data__.has(e)}},943:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7380:(e,t,n)=>{var r=n(2839);e.exports=function(){this.__data__=new r,this.size=0}},8354:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2413:e=>{e.exports=function(e){return this.__data__.get(e)}},7073:e=>{e.exports=function(e){return this.__data__.has(e)}},1241:(e,t,n)=>{var r=n(2839),i=n(6615),s=n(2229);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(e,t),this.size=n.size,this}},8752:(e,t,n)=>{var r=n(5690),i=n(8138),s=n(5518);e.exports=function(e){return i(e)?s(e):r(e)}},5794:(e,t,n)=>{var r=n(6360),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)})),t}));e.exports=o},7901:(e,t,n)=>{var r=n(6770);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},1513:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},5518:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")?",u="[\\ufe0e\\ufe0f]?",c=u+l+"(?:\\u200d(?:"+[s,o,a].join("|")+")"+u+l+")*",h="(?:"+[s+r+"?",r,o,a,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+c,"g");e.exports=function(e){return e.match(d)||[]}},5369:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+s+"]",a="\\d+",l="["+n+"]",u="["+r+"]",c="[^"+t+s+a+n+r+i+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="["+i+"]",p="(?:"+u+"|"+c+")",m="(?:"+f+"|"+c+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",w=b+v+"(?:\\u200d(?:"+["[^"+t+"]",h,d].join("|")+")"+b+v+")*",_="(?:"+[l,h,d].join("|")+")"+w,E=RegExp([f+"?"+u+"+"+g+"(?="+[o,f,"$"].join("|")+")",m+"+"+y+"(?="+[o,f+p,"$"].join("|")+")",f+"?"+p+"+"+g,f+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,_].join("|"),"g");e.exports=function(e){return e.match(E)||[]}},8002:(e,t,n)=>{var r=n(4064),i=n(5467)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},4064:(e,t,n)=>{var r=n(8382),i=n(7096);e.exports=function(e){return i(r(e).toLowerCase())}},6068:(e,t,n)=>{var r=n(7167),i=n(8382),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(s,r).replace(o,"")}},2864:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},644:(e,t,n)=>{var r=n(2582);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},9264:(e,t,n)=>{var r=n(706),i=n(6998);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3439:(e,t,n)=>{var r=n(677),i=n(6998);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2424:e=>{e.exports=function(e){return e}},6356:(e,t,n)=>{var r=n(7382),i=n(2050),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},6521:e=>{var t=Array.isArray;e.exports=t},8710:(e,t,n)=>{var r=n(1330),i=n(9358);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},9232:(e,t,n)=>{e=n.nmd(e);var r=n(8453),i=n(2055),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},1330:(e,t,n)=>{var r=n(6624),i=n(7717);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},9358:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7717:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2050:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6770:(e,t,n)=>{var r=n(6624),i=n(2050);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},4167:(e,t,n)=>{var r=n(4061),i=n(8877),s=n(6273),o=s&&s.isTypedArray,a=o?i(o):r;e.exports=a},4630:(e,t,n)=>{var r=n(8079),i=n(5152),s=n(8710);e.exports=function(e){return s(e)?r(e):i(e)}},6850:(e,t,n)=>{var r=n(1176),i=n(5161),s=n(5525);e.exports=function(e,t){var n={};return t=s(t,3),i(e,(function(e,i,s){r(n,t(e,i,s),e)})),n}},4532:(e,t,n)=>{var r=n(1176),i=n(5161),s=n(5525);e.exports=function(e,t){var n={};return t=s(t,3),i(e,(function(e,i,s){r(n,i,t(e,i,s))})),n}},4928:(e,t,n)=>{var r=n(2229);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},9791:(e,t,n)=>{var r=n(1373),i=n(7295),s=n(1922),o=n(7901);e.exports=function(e){return s(e)?r(o(e)):i(e)}},500:(e,t,n)=>{var r=n(5467)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},617:e=>{e.exports=function(){return[]}},2055:e=>{e.exports=function(){return!1}},8382:(e,t,n)=>{var r=n(9020);e.exports=function(e){return null==e?"":r(e)}},7096:(e,t,n)=>{var r=n(7075)("toUpperCase");e.exports=r},3117:(e,t,n)=>{var r=n(4333),i=n(2674),s=n(8382),o=n(5369);e.exports=function(e,t,n){return e=s(e),void 0===(t=n?void 0:t)?i(e)?o(e):r(e):e.match(t)||[]}},4059:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},9683:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),u=new t(512);function c(e){return a.get(e)||a.set(e,h(e).map((function(e){return e.replace(o,"$2")})))}function h(e){return e.match(n)||[""]}function d(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!d(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:c,setter:function(e){var t=c(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,s=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;s=s[t[r++]]}s[t[r]]=n}))},getter:function(e,t){var n=c(e);return u.get(e)||u.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(d(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,s,o,a=e.length;for(i=0;i<a;i++)(r=e[i])&&(f(r)&&(r='"'+r+'"'),s=!(o=d(r))&&/^\d+$/.test(r),t.call(n,r,o,s,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},6647:(e,t,n)=>{"use strict";var r=n(7953),i=n(4059),s=n(6591);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,x=60106,S=60107,k=60108,I=60114,T=60109,C=60110,A=60112,N=60113,D=60120,O=60115,R=60116,P=60121,F=60128,M=60129,L=60130,j=60131;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;E=V("react.element"),x=V("react.portal"),S=V("react.fragment"),k=V("react.strict_mode"),I=V("react.profiler"),T=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),D=V("react.suspense_list"),O=V("react.memo"),R=V("react.lazy"),P=V("react.block"),V("react.scope"),F=V("react.opaque.id"),M=V("react.debug_trace_mode"),L=V("react.offscreen"),j=V("react.legacy_hidden")}var U,z="function"==typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function $(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var q=!1;function K(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function H(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return K(e.type,!1);case 11:return K(e.type.render,!1);case 22:return K(e.type._render,!1);case 1:return K(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case I:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return G(e.type);case P:return G(e._render);case R:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function W(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ue(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Te=null,Ce=null;function Ae(e){if(e=ni(e)){if("function"!=typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Ie(e.stateNode,e.type,t))}}function Ne(e){Te?Ce?Ce.push(e):Ce=[e]:Te=e}function De(){if(Te){var e=Te,t=Ce;if(Ce=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Pe(){}var Fe=Oe,Me=!1,Le=!1;function je(){null===Te&&null===Ce||(Pe(),De())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ue=!1}function Be(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var $e=!1,qe=null,Ke=!1,He=null,Ge={onError:function(e){$e=!0,qe=e}};function We(e,t,n,r,i,s,o,a,l){$e=!1,qe=null,Be.apply(Ge,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Xe(e){if(Qe(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xe(i),e;if(s===r)return Xe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&null!==(t=ni(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function bt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),ut.forEach(vt),ct.forEach(vt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<st.length){wt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&wt(ot,e),null!==at&&wt(at,e),null!==lt&&wt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},St={},kt={};function It(e){if(St[e])return St[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return St[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Tt=It("animationend"),Ct=It("animationiteration"),At=It("animationstart"),Nt=It("transitionend"),Dt=new Map,Ot=new Map,Rt=["abort","abort",Tt,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Dt.set(r,i),u(i,[r])}}(0,s.unstable_now)();var Ft=8;function Mt(e){if(1&e)return Ft=15,1;if(2&e)return Ft=14,2;if(4&e)return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):32&e?(Ft=11,32):0!=(t=192&e)?(Ft=10,t):256&e?(Ft=9,256):0!=(t=3584&e)?(Ft=8,t):4096&e?(Ft=7,4096):0!=(t=4186112&e)?(Ft=6,t):0!=(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):134217728&e?(Ft=3,134217728):0!=(t=805306368&e)?(Ft=2,t):1073741824&e?(Ft=1,1073741824):(Ft=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Ft=15;else if(0!=(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=Ft):0!=(a&=s)&&(r=Mt(a),i=Ft)}else 0!=(s=n&~o)?(r=Mt(s),i=Ft):0!==a&&(r=Mt(a),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-$t(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&!(t&o)){if(Mt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-$t(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Vt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Vt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&0===(e=Ut(4186112&~t))&&(e=512),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-$t(t)]=n}var $t=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(qt(e)/Kt|0)|0},qt=Math.log,Kt=Math.LN2,Ht=s.unstable_UserBlockingPriority,Gt=s.unstable_runWithPriority,Wt=!0;function Qt(e,t,n,r){Me||Pe();var i=Xt,s=Me;Me=!0;try{Re(i,e,t,n,r)}finally{(Me=s)||je()}}function Yt(e,t,n,r){Gt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Wt)if((i=!(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Jt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Pr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=ke(r);if(null!==(i=ti(i))){var s=Qe(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Pr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),bn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(wn),En=an(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return In}var Cn=i({},fn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Cn),Nn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),On=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Fn=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var jn=h&&"TextEvent"in window&&!Ln,Vn=h&&(!Mn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1,Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Yn(e){Cr(e,0)}function Xn(e){if(X(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Wn&&(Wn.detachEvent("onpropertychange",ir),Qn=Wn=null)}function ir(e){if("value"===e.propertyName&&Xn(Qn)){var t=[];if(Gn(t,Qn,e,ke(e)),e=Yn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,je()}}}}function sr(e,t,n){"focusin"===e?(rr(),Qn=n,(Wn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Qn)}function ar(e,t){if("click"===e)return Xn(t)}function lr(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cr=Object.prototype.hasOwnProperty;function hr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,wr=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==J(r)||(r="selectionStart"in(r=vr)&&gr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Mr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Rt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<xr.length;Sr++)Ot.set(xr[Sr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(We.apply(this,arguments),$e){if(!$e)throw Error(o(198));var c=qe;$e=!1,qe=null,Ke||(Ke=!0,He=c)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Tr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Tr(i,a,u),s=l}}}if(Ke)throw e=He,Ke=!1,He=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Nr]||(e[Nr]=!0,a.forEach((function(t){Ir.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Rr(s,e,i,t),o.add(a))}function Rr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Le)return e();Le=!0;try{return Fe(e,t,n)}finally{Le=!1,je()}}((function(){var r=s,i=ke(n),o=[];e:{var a=Dt.get(e);if(void 0!==a){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Tt:case Ct:case At:l=bn;break;case Nt:l=On;break;case"scroll":l=pn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=!!(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Ve(p,d))&&c.push(Fr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||16&t||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Zr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(h=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ri(l),f=null==u?a:ri(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Lr(f))p++;for(f=0,m=d;m;m=Lr(m))f++;for(;0<p-f;)c=Lr(c),p--;for(;0<f-p;)d=Lr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Lr(c),d=Lr(d)}c=null}else c=null;null!==l&&jr(o,a,l,c,!1),null!==u&&null!==h&&jr(o,h,u,c,!0)}if("select"===(l=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Hn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(vr=y,br=r,wr=null);break;case"focusout":wr=br=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Er(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Vn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,qn=!0)),0<(y=Mr(r,b)).length&&(b=new En(b,e,null,n,i),o.push({event:b,listeners:y}),(v||null!==(v=$n(n)))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Mr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}Cr(o,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,n))&&r.unshift(Fr(e,s,i)),null!=(s=Ve(e,t))&&r.push(Fr(e,s,i))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ve(n,s))&&o.unshift(Fr(n,l,a)):i||null!=(l=Ve(n,s))&&o.push(Fr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Ur=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function $r(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var qr="function"==typeof setTimeout?setTimeout:void 0,Kr="function"==typeof clearTimeout?clearTimeout:void 0;function Hr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Wr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0,Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Wr(e);null!==e;){if(n=e[Xr])return n;e=Wr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Xr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Jr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function li(e){return{current:e}}function ui(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ci(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=li(hi),fi=li(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!=e.childContextTypes}function yi(){ui(fi),ui(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ci(di,t),ci(fi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,G(t)||"Unknown",s));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ci(di,e),ci(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(di),ci(di,e)):ui(fi),ci(fi,n)}var Ei=null,xi=null,Si=s.unstable_runWithPriority,ki=s.unstable_scheduleCallback,Ii=s.unstable_cancelCallback,Ti=s.unstable_shouldYield,Ci=s.unstable_requestPaint,Ai=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,Ri=s.unstable_NormalPriority,Pi=s.unstable_LowPriority,Fi=s.unstable_IdlePriority,Mi={},Li=void 0!==Ci?Ci:function(){},ji=null,Vi=null,Ui=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function $i(){switch(Ni()){case Di:return 99;case Oi:return 98;case Ri:return 97;case Pi:return 96;case Fi:return 95;default:throw Error(o(332))}}function qi(e){switch(e){case 99:return Di;case 98:return Oi;case 97:return Ri;case 96:return Pi;case 95:return Fi;default:throw Error(o(332))}}function Ki(e,t){return e=qi(e),Si(e,t)}function Hi(e,t,n){return e=qi(e),ki(e,t,n)}function Gi(){if(null!==Vi){var e=Vi;Vi=null,Ii(e)}Wi()}function Wi(){if(!Ui&&null!==ji){Ui=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),ki(Di,Gi),t}finally{Ui=!1}}}var Qi=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=li(null),Ji=null,Zi=null,es=null;function ts(){es=Zi=Ji=null}function ns(e){var t=Xi.current;ui(Xi),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Ji=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(o(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=s.baseState,a=0,h=c=u=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,d,l):p))break e;d=i({},d,l);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,Va|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cl(),i=hl(e),s=us(r,i);s.payload=t,null!=n&&(s.callback=n),cs(e,s),dl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cl(),i=hl(e),s=us(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),cs(e,s),dl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cl(),r=hl(e),i=us(n,r);i.tag=2,null!=t&&(i.callback=t),cs(e,i),dl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&hr(n,r)&&hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"==typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!=(r=t.contextTypes))?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function bs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Es(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xs(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ss(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Es(e,t,n),r.return=e,r):((r=Kl(n.type,n.key,n.props,null,e.mode,r)).ref=Es(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Hl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Wl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Kl(t.type,t.key,t.props,null,e.mode,n)).ref=Es(e,null,t),n.return=e,n;case x:return(t=Ql(t,e.mode,n)).return=e,t}if(_s(t)||B(t))return(t=Hl(t,e.mode,n,null)).return=e,t;xs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null}if(_s(n)||B(n))return null!==i?null:h(e,t,n,r,null);xs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);xs(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=B(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,l){var u="object"==typeof s&&null!==s&&s.type===S&&null===s.key;u&&(s=s.props.children);var c="object"==typeof s&&null!==s;if(c)switch(s.$$typeof){case E:e:{for(c=s.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===S){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=Es(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===S?((r=Hl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Kl(s.type,s.key,s.props,null,e.mode,l)).ref=Es(e,r,s),l.return=e,e=l)}return a(e);case x:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ql(s,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Wl(s,e.mode,l)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,l);if(B(s))return g(e,r,s,l);if(c&&xs(e,s),void 0===s&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var ks=Ss(!0),Is=Ss(!1),Ts={},Cs=li(Ts),As=li(Ts),Ns=li(Ts);function Ds(e){if(e===Ts)throw Error(o(174));return e}function Os(e,t){switch(ci(Ns,t),ci(As,e),ci(Cs,Ts),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Cs),ci(Cs,t)}function Rs(){ui(Cs),ui(As),ui(Ns)}function Ps(e){Ds(Ns.current);var t=Ds(Cs.current),n=fe(t,e.type);t!==n&&(ci(As,e),ci(Cs,n))}function Fs(e){As.current===e&&(ui(Cs),ui(As))}var Ms=li(0);function Ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(64&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=null,Vs=null,Us=!1;function zs(e,t){var n=Bl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function $s(e){if(Us){var t=Vs;if(t){var n=t;if(!Bs(e,t)){if(!(t=Gr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Us=!1,void(js=e);zs(js,n)}js=e,Vs=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,Us=!1,js=e}}function qs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;js=e}function Ks(e){if(e!==js)return!1;if(!Us)return qs(e),Us=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!$r(t,e.memoizedProps))for(t=Vs;t;)zs(e,t),t=Gr(t.nextSibling);if(qs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vs=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vs=null}}else Vs=js?Gr(e.stateNode.nextSibling):null;return!0}function Hs(){Vs=js=null,Us=!1}var Gs=[];function Ws(){for(var e=0;e<Gs.length;e++)Gs[e]._workInProgressVersionPrimary=null;Gs.length=0}var Qs=_.ReactCurrentDispatcher,Ys=_.ReactCurrentBatchConfig,Xs=0,Js=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Xs=s,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qs.current=null===e||null===e.memoizedState?Oo:Ro,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Qs.current=Po,e=n(r,i)}while(no)}if(Qs.current=Do,t=null!==Zs&&null!==Zs.next,Xs=0,eo=Zs=Js=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Js.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Js.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Js.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"==typeof t?t(e):t}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,u=i;do{var c=u.lane;if((Xs&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Js.lanes|=c,Va|=c}u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=a,ur(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function co(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xs&e)===e)&&(t._workInProgressVersionPrimary=r,Gs.push(t))),e)return n(t._source);throw Gs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Da;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Qs.current,u=l.useState((function(){return ho(i,t,n)})),c=u[1],h=u[0];u=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Js;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(c(e),e=hl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-$t(o),u=1<<l;r[l]|=e,o&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=hl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(p,n)&&ur(m,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=c=No.bind(null,Js,e),u.queue=e,u.baseQueue=null,h=ho(i,t,n),u.memoizedState=u.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=No.bind(null,Js,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Js.updateQueue)?(t={lastEffect:null},Js.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function bo(e,t,n,r){var i=oo();Js.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Js.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return bo(516,4,e,t)}function Eo(e,t){return wo(516,4,e,t)}function xo(e,t){return wo(4,2,e,t)}function So(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!=n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)}function Io(){}function To(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=$i();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function No(e,t,n){var r=cl(),i=hl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Js||null!==o&&o===Js)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,ur(l,a))return}catch(e){}dl(e,i,r)}}var Do={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Js,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:Io,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Us){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=mo(t)[1];return!(2&Js.mode)&&(Js.flags|=516,go(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:To,useContext:ss,useEffect:Eo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:Co,useReducer:uo,useRef:vo,useState:function(){return uo(lo)},useDebugValue:Io,useDeferredValue:function(e){var t=uo(lo),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},Po={readContext:ss,useCallback:To,useContext:ss,useEffect:Eo,useImperativeHandle:ko,useLayoutEffect:xo,useMemo:Co,useReducer:co,useRef:vo,useState:function(){return co(lo)},useDebugValue:Io,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Fo=_.ReactCurrentOwner,Mo=!1;function Lo(e,t,n,r){t.child=null===e?Is(t,null,n,r):ks(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Lo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ra(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||$l(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,s))}return o=e.child,i&s||(i=o.memoizedProps,!(n=null!==(n=n.compare)?n:hr)(i,r)||e.ref!==t.ref)?(t.flags|=1,(e=ql(o,r)).ref=t.ref,e.return=t,t.child=e):ra(e,t,s)}function Uo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,!(s&i))return t.lanes=e.lanes,ra(e,t,s);16384&e.flags&&(Mo=!0)}return $o(e,t,n,r,s)}function zo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(4&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(0,e),null;t.memoizedState={baseLanes:0},wl(0,null!==s?s.baseLanes:n)}else t.memoizedState={baseLanes:0},wl(0,n);else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,wl(0,r);return Lo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function $o(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Lo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ra(e,t,i))}function qo(e,t,n,r,i){if(gi(n)){var s=!0;wi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?ss(u):mi(t,u=gi(n)?pi:di.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&bs(t,o,r,u),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||os?("function"==typeof c&&(ms(t,n,c,r),l=t.memoizedState),(a=os||ys(t,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ls(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Yi(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ss(l):mi(t,l=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&bs(t,o,r,l),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"==typeof f&&(ms(t,n,f,r),p=t.memoizedState),(u=os||ys(t,n,u,r,d,p,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,s,i)}function Ko(e,t,n,r,i,s){Bo(e,t);var o=!!(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),ra(e,t,s);r=t.stateNode,Fo.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Lo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Os(e,t.containerInfo)}var Go,Wo,Qo,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=!!(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ci(Ms,1&s),null===e?(void 0!==i.fallback&&$s(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Gl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 2&s||t.child===o?n=ql(o,a):((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null),null!==e?r=ql(e,r):(r=Hl(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=ql(i,{mode:"visible",children:n}),!(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},2&i||null===s?s=Gl(t,i,0,null):(s.childLanes=0,s.pendingProps=t),n=Hl(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ta(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function na(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Lo(e,t,r.children,n),2&(r=Ms.current))r=1&r|2,t.flags|=64;else{if(null!==e&&64&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ea(e,n);else if(19===e.tag)ea(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Ms,r),2&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ls(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ta(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ls(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ta(t,!0,n,null,s,t.lastEffect);break;case"together":ta(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Va|=t.lanes,n&t.childLanes){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ia(e,t){if(!Us)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Rs(),ui(fi),ui(di),Ws(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ks(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Wo(t),null;case 5:Fs(t);var s=Ds(Ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ds(Cs.current),Ks(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Xr]=t,r[Jr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Ar(kr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":le(r,a),Ar("invalid",r)}for(var u in xe(n,a),e=null,a)a.hasOwnProperty(u)&&(s=a[u],"children"===u?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Xr]=t,e[Jr]=r,Go(e,t,!1,!1),t.stateNode=e,u=Se(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<kr.length;s++)Ar(kr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}xe(n,s);var c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&w(e,a,h,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ds(Ns.current),Ds(Cs.current),Ks(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return ui(Ms),r=t.memoizedState,64&t.flags?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ks(t):n=null!==e.memoizedState,r&&!n&&2&t.mode&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||1&Ms.current?0===Ma&&(Ma=3):(0!==Ma&&3!==Ma||(Ma=4),null===Da||!(134217727&Va)&&!(134217727&Ua)||gl(Da,Ra))),(r||n)&&(t.flags|=4),null);case 4:return Rs(),Wo(t),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ui(Ms),null===(r=t.memoizedState))return null;if(a=!!(64&t.flags),null===(u=r.rendering))if(a)ia(r,!1);else{if(0!==Ma||null!==e&&64&e.flags)for(e=t.child;null!==e;){if(null!==(u=Ls(e))){for(t.flags|=64,ia(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>qa&&(t.flags|=64,a=!0,ia(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Ls(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ia(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Us)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>qa&&1073741824!==n&&(t.flags|=64,a=!0,ia(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ci(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return _l(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function oa(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Rs(),ui(fi),ui(di),Ws(),64&(t=e.flags))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Fs(e),null;case 13:return ui(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ms),null;case 4:return Rs(),null;case 10:return ns(e),null;case 23:case 24:return _l(),null;default:return null}}function aa(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function la(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Go=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wo=function(){},Qo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ds(Cs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Vr)}for(h in xe(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var c=r[h];if(u=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ar("scroll",e),a||u===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===F?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ua="function"==typeof WeakMap?WeakMap:Map;function ca(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wa||(Wa=!0,Qa=r),la(0,t)},n}function ha(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return la(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ya?Ya=new Set([this]):Ya.add(this),la(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var da="function"==typeof WeakSet?WeakSet:Set;function fa(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){jl(e,t)}else t.current=null}function pa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function ma(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(!(3&~e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,4&(i=i.tag)&&1&i&&(Fl(n,e),Pl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function ga(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ya(e,t){if(xi&&"function"==typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(Ei,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(4&r)Fl(t,n);else{r=t;try{i()}catch(e){jl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(fa(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){jl(t,e)}break;case 5:fa(t);break;case 4:xa(e,t)}}function va(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ba(e){return 5===e.tag||3===e.tag||4===e.tag}function wa(e){e:{for(var t=e.return;null!==t;){if(ba(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ba(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_a(e,n,t):Ea(e,n,t)}function _a(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function Ea(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ea(e,t,n),e=e.sibling;null!==e;)Ea(e,t,n),e=e.sibling}function xa(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,u=l;;)if(ya(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ya(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Sa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{!(3&~r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?_e(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ye(n,l):w(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&($a=Bi(),ga(t.child,!0)),void ka(t);case 19:return void ka(t);case 23:case 24:return void ga(t,null!==t.memoizedState)}throw Error(o(163))}function ka(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new da),t.forEach((function(t){var r=Ul.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ia(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ta=Math.ceil,Ca=_.ReactCurrentDispatcher,Aa=_.ReactCurrentOwner,Na=0,Da=null,Oa=null,Ra=0,Pa=0,Fa=li(0),Ma=0,La=null,ja=0,Va=0,Ua=0,za=0,Ba=null,$a=0,qa=1/0;function Ka(){qa=Bi()+500}var Ha,Ga=null,Wa=!1,Qa=null,Ya=null,Xa=!1,Ja=null,Za=90,el=[],tl=[],nl=null,rl=0,il=null,sl=-1,ol=0,al=0,ll=null,ul=!1;function cl(){return 48&Na?Bi():-1!==sl?sl:sl=Bi()}function hl(e){if(!(2&(e=e.mode)))return 1;if(!(4&e))return 99===$i()?1:2;if(0===ol&&(ol=ja),0!==Qi.transition){0!==al&&(al=null!==Ba?Ba.pendingLanes:0),e=ol;var t=4186112&~al;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=$i(),e=Vt(4&Na&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ol)}function dl(e,t,n){if(50<rl)throw rl=0,il=null,Error(o(185));if(null===(e=fl(e,t)))return null;Bt(e,t,n),e===Da&&(Ua|=t,4===Ma&&gl(e,Ra));var r=$i();1===t?8&Na&&!(48&Na)?yl(e):(pl(e,n),0===Na&&(Ka(),Gi())):(!(4&Na)||98!==r&&99!==r||(null===nl?nl=new Set([e]):nl.add(e)),pl(e,n)),Ba=e}function fl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-$t(a),u=1<<l,c=s[l];if(-1===c){if(!(u&r)||u&i){c=t,Mt(u);var h=Ft;s[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);a&=~u}if(r=Lt(e,e===Da?Ra:0),t=Ft,0===r)null!==n&&(n!==Mi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ii(n)}15===t?(n=yl.bind(null,e),null===ji?(ji=[n],Vi=ki(Di,Wi)):ji.push(n),n=Mi):14===t?n=Hi(99,yl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ml.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ml(e){if(sl=-1,al=ol=0,48&Na)throw Error(o(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var n=Lt(e,e===Da?Ra:0);if(0===n)return null;var r=n,i=Na;Na|=16;var s=Sl();for(Da===e&&Ra===r||(Ka(),El(e,r));;)try{Tl();break}catch(t){xl(e,t)}if(ts(),Ca.current=s,Na=i,null!==Oa?r=0:(Da=null,Ra=0,r=Ma),ja&Ua)El(e,0);else if(0!==r){if(2===r&&(Na|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=kl(e,n))),1===r)throw t=La,El(e,0),gl(e,n),pl(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Nl(e);break;case 3:if(gl(e,n),(62914560&n)===n&&10<(r=$a+500-Bi())){if(0!==Lt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qr(Nl.bind(null,e),r);break}Nl(e);break;case 4:if(gl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-$t(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ta(n/1960))-n)){e.timeoutHandle=qr(Nl.bind(null,e),n);break}Nl(e);break;default:throw Error(o(329))}}return pl(e,Bi()),e.callbackNode===t?ml.bind(null,e):null}function gl(e,t){for(t&=~za,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$t(t),r=1<<n;e[n]=-1,t&=~r}}function yl(e){if(48&Na)throw Error(o(327));if(Rl(),e===Da&&e.expiredLanes&Ra){var t=Ra,n=kl(e,t);ja&Ua&&(n=kl(e,t=Lt(e,t)))}else n=kl(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Na|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=kl(e,t))),1===n)throw n=La,El(e,0),gl(e,t),pl(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e),pl(e,Bi()),null}function vl(e,t){var n=Na;Na|=1;try{return e(t)}finally{0===(Na=n)&&(Ka(),Gi())}}function bl(e,t){var n=Na;Na&=-2,Na|=8;try{return e(t)}finally{0===(Na=n)&&(Ka(),Gi())}}function wl(e,t){ci(Fa,Pa),Pa|=t,ja|=t}function _l(){Pa=Fa.current,ui(Fa)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Oa)for(n=Oa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Rs(),ui(fi),ui(di),Ws();break;case 5:Fs(r);break;case 4:Rs();break;case 13:case 19:ui(Ms);break;case 10:ns(r);break;case 23:case 24:_l()}n=n.return}Da=e,Oa=ql(e.current,null),Ra=Pa=ja=t,Ma=0,La=null,za=Ua=Va=0}function xl(e,t){for(;;){var n=Oa;try{if(ts(),Qs.current=Do,to){for(var r=Js.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Xs=0,eo=Zs=Js=null,no=!1,Aa.current=null,null===n||null===n.return){Ma=1,La=t,Oa=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Ra,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(!(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=!!(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(u),d.updateQueue=y}else g.add(u);if(!(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=us(-1,1);v.tag=2,cs(a,v)}a.lanes|=1;break e}l=void 0,a=t;var b=s.pingCache;if(null===b?(b=s.pingCache=new ua,l=new Set,b.set(u,l)):void 0===(l=b.get(u))&&(l=new Set,b.set(u,l)),!l.has(a)){l.add(a);var w=Vl.bind(null,s,u,a);u.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((G(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ma&&(Ma=2),l=aa(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ca(0,s,t));break e;case 1:s=l;var _=d.type,E=d.stateNode;if(!(64&d.flags||"function"!=typeof _.getDerivedStateFromError&&(null===E||"function"!=typeof E.componentDidCatch||null!==Ya&&Ya.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ha(d,s,t));break e}}d=d.return}while(null!==d)}Al(n)}catch(e){t=e,Oa===n&&null!==n&&(Oa=n=n.return);continue}break}}function Sl(){var e=Ca.current;return Ca.current=Do,null===e?Do:e}function kl(e,t){var n=Na;Na|=16;var r=Sl();for(Da===e&&Ra===t||El(e,t);;)try{Il();break}catch(t){xl(e,t)}if(ts(),Na=n,Ca.current=r,null!==Oa)throw Error(o(261));return Da=null,Ra=0,Ma}function Il(){for(;null!==Oa;)Cl(Oa)}function Tl(){for(;null!==Oa&&!Ti();)Cl(Oa)}function Cl(e){var t=Ha(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,null===t?Al(e):Oa=t,Aa.current=null}function Al(e){var t=e;do{var n=t.alternate;if(e=t.return,2048&t.flags){if(null!==(n=oa(t)))return n.flags&=2047,void(Oa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(null!==(n=sa(n,t,Pa)))return void(Oa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||1073741824&Pa||!(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&!(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(null!==(t=t.sibling))return void(Oa=t);Oa=t=e}while(null!==t);0===Ma&&(Ma=5)}function Nl(e){var t=$i();return Ki(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Rl()}while(null!==Ja);if(48&Na)throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var u=31-$t(s),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,s&=~c}if(null!==nl&&!(24&r)&&nl.has(e)&&nl.delete(e),e===Da&&(Oa=Da=null,Ra=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Na,Na|=32,Aa.current=null,Ur=Wt,gr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,s=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==u||0!==c&&3!==g.nodeType||(f=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===u&&++m===c&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;zr={focusedElem:a,selectionRange:l},Wt=!1,ll=null,ul=!1,Ga=r;do{try{Ol()}catch(e){if(null===Ga)throw Error(o(330));jl(Ga,e),Ga=Ga.nextEffect}}while(null!==Ga);ll=null,Ga=r;do{try{for(a=e;null!==Ga;){var b=Ga.flags;if(16&b&&ye(Ga.stateNode,""),128&b){var w=Ga.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&b){case 2:wa(Ga),Ga.flags&=-3;break;case 6:wa(Ga),Ga.flags&=-3,Sa(Ga.alternate,Ga);break;case 1024:Ga.flags&=-1025;break;case 1028:Ga.flags&=-1025,Sa(Ga.alternate,Ga);break;case 4:Sa(Ga.alternate,Ga);break;case 8:xa(a,l=Ga);var E=l.alternate;va(l),null!==E&&va(E)}Ga=Ga.nextEffect}}catch(e){if(null===Ga)throw Error(o(330));jl(Ga,e),Ga=Ga.nextEffect}}while(null!==Ga);if(_=zr,w=mr(),b=_.focusedElem,a=_.selectionRange,w!==b&&b&&b.ownerDocument&&pr(b.ownerDocument.documentElement,b)){null!==a&&gr(b)&&(w=a.start,void 0===(_=a.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),l=b.textContent.length,E=Math.min(a.start,l),a=void 0===a.end?E:Math.min(a.end,l),!_.extend&&E>a&&(l=a,a=E,E=l),l=fr(b,E),s=fr(b,a),l&&s&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((w=w.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),E>a?(_.addRange(w),_.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Wt=!!Ur,zr=Ur=null,e.current=n,Ga=r;do{try{for(b=e;null!==Ga;){var x=Ga.flags;if(36&x&&ma(b,Ga.alternate,Ga),128&x){w=void 0;var S=Ga.ref;if(null!==S){var k=Ga.stateNode;Ga.tag,w=k,"function"==typeof S?S(w):S.current=w}}Ga=Ga.nextEffect}}catch(e){if(null===Ga)throw Error(o(330));jl(Ga,e),Ga=Ga.nextEffect}}while(null!==Ga);Ga=null,Li(),Na=i}else e.current=n;if(Xa)Xa=!1,Ja=e,Za=t;else for(Ga=r;null!==Ga;)t=Ga.nextEffect,Ga.nextEffect=null,8&Ga.flags&&((x=Ga).sibling=null,x.stateNode=null),Ga=t;if(0===(r=e.pendingLanes)&&(Ya=null),1===r?e===il?rl++:(rl=0,il=e):rl=0,n=n.stateNode,xi&&"function"==typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(Ei,n,void 0,!(64&~n.current.flags))}catch(e){}if(pl(e,Bi()),Wa)throw Wa=!1,e=Qa,Qa=null,e;return 8&Na||Gi(),null}function Ol(){for(;null!==Ga;){var e=Ga.alternate;ul||null===ll||(8&Ga.flags?Ze(Ga,ll)&&(ul=!0):13===Ga.tag&&Ia(e,Ga)&&Ze(Ga,ll)&&(ul=!0));var t=Ga.flags;256&t&&pa(e,Ga),!(512&t)||Xa||(Xa=!0,Hi(97,(function(){return Rl(),null}))),Ga=Ga.nextEffect}}function Rl(){if(90!==Za){var e=97<Za?97:Za;return Za=90,Ki(e,Ml)}return!1}function Pl(e,t){el.push(t,e),Xa||(Xa=!0,Hi(97,(function(){return Rl(),null})))}function Fl(e,t){tl.push(t,e),Xa||(Xa=!0,Hi(97,(function(){return Rl(),null})))}function Ml(){if(null===Ja)return!1;var e=Ja;if(Ja=null,48&Na)throw Error(o(331));var t=Na;Na|=32;var n=tl;tl=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));jl(s,e)}}for(n=el,el=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===s)throw Error(o(330));jl(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Na=t,Gi(),!0}function Ll(e,t,n){cs(e,t=ca(0,t=aa(n,t),1)),t=cl(),null!==(e=fl(e,1))&&(Bt(e,1,t),pl(e,t))}function jl(e,t){if(3===e.tag)Ll(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ll(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r))){var i=ha(n,e=aa(t,e),1);if(cs(n,i),i=cl(),null!==(n=fl(n,1)))Bt(n,1,i),pl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Vl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&n,Da===e&&(Ra&n)===n&&(4===Ma||3===Ma&&(62914560&Ra)===Ra&&500>Bi()-$a?El(e,0):za|=n),pl(e,t)}function Ul(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(2&(t=e.mode)?4&t?(0===ol&&(ol=ja),0===(t=Ut(62914560&~ol))&&(t=4194304)):t=99===$i()?1:2:t=1),n=cl(),null!==(e=fl(e,t))&&(Bt(e,t,n),pl(e,n))}function zl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Bl(e,t,n,r){return new zl(e,t,n,r)}function $l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)$l(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return Hl(n.children,i,s,t);case M:a=8,i|=16;break;case k:a=8,i|=1;break;case I:return(e=Bl(12,n,t,8|i)).elementType=I,e.type=I,e.lanes=s,e;case N:return(e=Bl(13,n,t,i)).type=N,e.elementType=N,e.lanes=s,e;case D:return(e=Bl(19,n,t,i)).elementType=D,e.lanes=s,e;case L:return Gl(n,i,s,t);case j:return(e=Bl(24,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case A:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e;case P:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Bl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Hl(e,t,n,r){return(e=Bl(7,e,r,t)).lanes=n,e}function Gl(e,t,n,r){return(e=Bl(23,e,r,t)).elementType=L,e.lanes=n,e}function Wl(e,t,n){return(e=Bl(6,e,null,t)).lanes=n,e}function Ql(e,t,n){return(t=Bl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Xl(e,t,n,r){var i=t.current,s=cl(),a=hl(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(gi(u)){n=bi(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),cs(i,t),dl(i,a,s),a}function Jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yl(e,t,null!=n&&!0===n.hydrate),t=Bl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Jl(o);a.call(e)}}Xl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Jl(o);l.call(e)}}bl((function(){Xl(t,o,e,i)}))}return Jl(o)}function iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ha=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(!(n&r)){switch(Mo=!1,t.tag){case 3:Ho(t),Hs();break;case 5:Ps(t);break;case 1:gi(t.type)&&wi(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return n&t.child.childLanes?Jo(e,t,n):(ci(Ms,1&Ms.current),null!==(t=ra(e,t,n))?t.sibling:null);ci(Ms,1&Ms.current);break;case 19:if(r=!!(n&t.childLanes),64&e.flags){if(r)return na(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return ra(e,t,n)}Mo=!!(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;wi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,ws(t,r,e,n),t=Ko(null,t,r,!0,s,n)}else t.tag=0,Lo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return $l(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=$o(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,$o(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ls(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Hs(),t=ra(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Vs=Gr(t.stateNode.containerInfo.firstChild),js=t,s=Us=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Gs.push(s);for(n=Is(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Lo(e,t,r,n),Hs();t=t.child}return t;case 5:return Ps(t),null===e&&$s(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,$r(r,i)?a=null:null!==s&&$r(r,s)&&(t.flags|=16),Bo(e,t),Lo(e,t,a,n),t.child;case 6:return null===e&&$s(t),null;case 13:return Jo(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(ci(Xi,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0==(s=ur(l,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=ra(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&c.observedBits&s){1===l.tag&&((c=us(-1,n&-n)).tag=2,cs(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),rs(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Lo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Lo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Vo(e,t,i,s=Yi(i.type,s),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,wi(t)):e=!1,is(t,n),vs(t,r,i),ws(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return na(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},tu.prototype.render=function(e){Xl(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xl(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(dl(e,4,cl()),eu(e,4))},tt=function(e){13===e.tag&&(dl(e,67108864,cl()),eu(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),n=hl(e);dl(e,n,t),eu(e,n)}},rt=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=vl,Re=function(e,t,n,r,i){var s=Na;Na|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Na=s)&&(Ka(),Gi())}},Pe=function(){!(49&Na)&&(function(){if(null!==nl){var e=nl;nl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pl(e,Bi())}))}Gi()}(),Rl())},Fe=function(e,t){var n=Na;Na|=2;try{return e(t)}finally{0===(Na=n)&&(Ka(),Gi())}};var su={Events:[ni,ri,ii,Ne,De,Rl,{current:!1}]},ou={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},au={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Ei=lu.inject(au),xi=lu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Na;if(48&n)return e(t);Na|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Na=n,Gi()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(o(40));return!!e._reactRootContainer&&(bl((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ru(e,t,n,!1,r)},t.version="17.0.2"},8705:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(6647)},9823:(e,t,n)=>{"use strict";n(4059);var r=n(7953),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},7512:(e,t,n)=>{"use strict";var r=n(4059),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:w.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+I(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+I(a=e[u],u);l+=T(a,t,n,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=T(a=a.value,t,n,c=r+I(a,u++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function D(){var e=N.current;if(null===e)throw Error(f(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},7953:(e,t,n)=>{"use strict";e.exports=n(7512)},5621:(e,t,n)=>{"use strict";e.exports=n(9823)},88:(e,t)=>{"use strict";var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,_=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(e){throw _.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],T=[],C=1,A=null,N=3,D=!1,O=!1,R=!1;function P(e){for(var t=x(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,E(I,t)}t=x(T)}}function F(e){if(R=!1,P(e),!O)if(null!==x(I))O=!0,n(M);else{var t=x(T);null!==t&&r(F,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),D=!0;var s=N;try{for(P(n),A=x(I);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"==typeof o){A.callback=null,N=A.priorityLevel;var a=o(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?A.callback=a:A===x(I)&&S(I),P(n)}else S(I);A=x(I)}if(null!==A)var l=!0;else{var u=x(T);null!==u&&r(F,u.startTime-n),l=!1}return l}finally{A=null,N=s,D=!1}}var L=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(I)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,E(T,e),null===x(I)&&e===x(T)&&(R?i():R=!0,r(F,o-a))):(e.sortIndex=l,E(I,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},6591:(e,t,n)=>{"use strict";e.exports=n(88)},7949:e=>{function t(e,t){var n=e.length,r=new Array(n),i={},s=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));s--;)i[s]||l(e[s],s,new Set);return r;function l(e,t,s){if(s.has(e)){var u;try{u=", node was:"+JSON.stringify(e)}catch(e){u=""}throw new Error("Cyclic dependency"+u)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var c=o.get(e)||new Set;if(t=(c=Array.from(c)).length){s.add(e);do{var h=c[--t];l(h,a.get(h),s)}while(t);s.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,loaded:!1,exports:{}};return n[e](s,s.exports,i),s.loaded=!0,s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);i.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e,t=i(5621),n=i(7953),r=i.t(n,2),s=i(8705),o=i.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function u(e,t){if(!1===e||null==e)throw new Error(t)}function c(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var m;function g(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let i=N(("string"==typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let s=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let e=0;null==o&&e<s.length;++e){let t=A(i);o=T(s[e],t,r)}return o}(e,t,n,!1)}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=P([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of v(e.path))i(e,t,n);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const b=/^:[\w-]+$/,w=3,_=2,E=1,x=10,S=-2,k=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=S),t&&(r+=_),n.filter((e=>!k(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?E:x)),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let e=0;e<r.length;++e){let a=r[e],l=e===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=C({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u),h=a.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=C({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:P([s,c.pathname]),pathnameBase:F(P([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=P([s,c.pathnameBase]))}return o}function C(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e,t){let n=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function R(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=p(e):(i=a({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(r),hash:L(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const P=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",L=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const j=["post","put","patch","delete"],V=(new Set(j),["get",...j]);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(this,arguments)}new Set(V),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const z=n.createContext(null),B=n.createContext(null),$=n.createContext(null),q=n.createContext(null),K=n.createContext({outlet:null,matches:[],isDataRoute:!1}),H=n.createContext(null);function G(){return null!=n.useContext(q)}function W(){return G()||u(!1),n.useContext(q).location}function Q(e){n.useContext($).static||n.useLayoutEffect(e)}function Y(){let{isDataRoute:e}=n.useContext(K);return e?function(){let{router:e}=function(e){let t=n.useContext(z);return t||u(!1),t}(se.UseNavigateStable),t=ae(oe.UseNavigateStable),r=n.useRef(!1);Q((()=>{r.current=!0}));let i=n.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,U({fromRouteId:t},i)))}),[e,t]);return i}():function(){G()||u(!1);let e=n.useContext(z),{basename:t,future:r,navigator:i}=n.useContext($),{matches:s}=n.useContext(K),{pathname:o}=W(),a=JSON.stringify(O(s,r.v7_relativeSplatPath)),l=n.useRef(!1);Q((()=>{l.current=!0}));let c=n.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"==typeof n)return void i.go(n);let s=R(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:P([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}const X=n.createContext(null);function J(){let{matches:e}=n.useContext(K),t=e[e.length-1];return t?t.params:{}}function Z(e,t){let{relative:r}=void 0===t?{}:t,{future:i}=n.useContext($),{matches:s}=n.useContext(K),{pathname:o}=W(),a=JSON.stringify(O(s,i.v7_relativeSplatPath));return n.useMemo((()=>R(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function ee(t,r,i,s){G()||u(!1);let{navigator:o}=n.useContext($),{matches:a}=n.useContext(K),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=W();if(r){var m;let e="string"==typeof r?p(r):r;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||u(!1),d=e}else d=f;let y=d.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=g(t,{pathname:v}),w=function(e,t,r,i){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ne,c&&(h<0&&0===s?(le[p="route-fallback"]||(le[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?n.createElement(i.route.Component,null):i.route.element?i.route.element:e,n.createElement(ie,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?n.createElement(re,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:P([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:P([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return r&&w?n.createElement(q.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},w):w}function te(){let e=function(){var e;let t=n.useContext(H),r=function(e){let t=n.useContext(B);return t||u(!1),t}(oe.UseRouteError),i=ae(oe.UseRouteError);return void 0!==t?t:null==(e=r.errors)?void 0:e[i]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:i},r):null,null)}const ne=n.createElement(te,null);class re extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(K.Provider,{value:this.props.routeContext},n.createElement(H.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:r,children:i}=e,s=n.useContext(z);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(K.Provider,{value:t},i)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),oe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oe||{});function ae(e){let t=function(e){let t=n.useContext(K);return t||u(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||u(!1),r.route.id}const le={};function ue(e){return function(e){let t=n.useContext(K).outlet;return t?n.createElement(X.Provider,{value:e},t):t}(e.context)}function ce(e){u(!1)}function he(t){let{basename:r="/",children:i=null,location:s,navigationType:o=e.Pop,navigator:a,static:l=!1,future:c}=t;G()&&u(!1);let h=r.replace(/^\/*/,"/"),d=n.useMemo((()=>({basename:h,navigator:a,static:l,future:U({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"==typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,b=n.useMemo((()=>{let e=N(f,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:o}}),[h,f,m,g,y,v,o]);return null==b?null:n.createElement($.Provider,{value:d},n.createElement(q.Provider,{children:i,value:b}))}function de(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,i)=>{if(!n.isValidElement(e))return;let s=[...t,i];if(e.type===n.Fragment)return void r.push.apply(r,de(e.props.children,s));e.type!==ce&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=de(e.props.children,s)),r.push(o)})),r}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}r.startTransition,new Promise((()=>{})),n.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const pe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(La){}new Map;const me=r.startTransition;o.flushSync,r.useId;const ge="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=n.forwardRef((function(e,t){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:p}=e,m=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,pe),{basename:g}=n.useContext($),y=!1;if("string"==typeof h&&ye.test(h)&&(r=h,ge))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=N(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(e){}let v=function(e,t){let{relative:r}=void 0===t?{}:t;G()||u(!1);let{basename:i,navigator:s}=n.useContext($),{hash:o,pathname:a,search:l}=Z(e,{relative:r}),c=a;return"/"!==i&&(c="/"===a?i:P([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),b=function(e,t){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=Y(),c=W(),h=Z(e,{relative:a});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==i?i:f(c)===f(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[c,u,h,i,s,r,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:p});return n.createElement("a",fe({},m,{href:r||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var be,we;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(be||(be={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(we||(we={}));const _e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ee(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new ke;const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(e){return function(e){const t=xe(e);return Se.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Te=function(e){try{return Se.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Ce=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Te(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Ae=e=>{var t,n;return null===(n=null===(t=Ce())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ne=()=>{var e;return null===(e=Ce())||void 0===e?void 0:e.config},De=e=>{var t;return null===(t=Ce())||void 0===t?void 0:t[`_${e}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Fe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Le,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Fe(r,o,n)}}const Le=/\{\$([^}]+)}/g;function je(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ve(n)&&Ve(s)){if(!je(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Ve(e){return null!==e&&"object"==typeof e}function Ue(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Be(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class $e{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=qe),void 0===r.error&&(r.error=qe),void 0===r.complete&&(r.complete=qe);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function qe(){}function Ke(e){return e&&e._delegate?e._delegate:e}class He{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ge="[DEFAULT]";class We{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Oe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Ge){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Ge){return this.instances.has(e)}getOptions(e=Ge){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Ge?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Ge){return this.component?this.component.multipleInstances?e:Ge:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new We(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ye=[];var Xe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xe||(Xe={}));const Je={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Ze=Xe.INFO,et={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},tt=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=et[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class nt{constructor(e){this.name=e,this._logLevel=Ze,this._logHandler=tt,this._userLogHandler=null,Ye.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Je[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const rt=(e,t)=>t.some((t=>e instanceof t));let it,st;const ot=new WeakMap,at=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap;let ht={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return at.get(e);if("objectStoreNames"===t)return e.objectStoreNames||lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function dt(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(pt(this),e),ft(ot.get(this))}:function(...e){return ft(t.apply(pt(this),e))}:function(e,...n){const r=t.call(pt(this),e,...n);return lt.set(r,e.sort?e.sort():[e]),ft(r)}:(e instanceof IDBTransaction&&function(e){if(at.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));at.set(e,t)}(e),rt(e,it||(it=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ht):e);var t}function ft(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ft(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ot.set(t,e)})).catch((()=>{})),ct.set(t,e),t}(e);if(ut.has(e))return ut.get(e);const t=dt(e);return t!==e&&(ut.set(e,t),ct.set(t,e)),t}const pt=e=>ct.get(e),mt=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],yt=new Map;function vt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(yt.get(t))return yt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=gt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mt.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return yt.set(t,s),s}var bt;bt=ht,ht={...bt,get:(e,t,n)=>vt(e,t)||bt.get(e,t,n),has:(e,t)=>!!vt(e,t)||bt.has(e,t)};class wt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const _t="@firebase/app",Et="0.9.13",xt=new nt("@firebase/app"),St="@firebase/app-compat",kt="@firebase/analytics-compat",It="@firebase/analytics",Tt="@firebase/app-check-compat",Ct="@firebase/app-check",At="@firebase/auth",Nt="@firebase/auth-compat",Dt="@firebase/database",Ot="@firebase/database-compat",Rt="@firebase/functions",Pt="@firebase/functions-compat",Ft="@firebase/installations",Mt="@firebase/installations-compat",Lt="@firebase/messaging",jt="@firebase/messaging-compat",Vt="@firebase/performance",Ut="@firebase/performance-compat",zt="@firebase/remote-config",Bt="@firebase/remote-config-compat",$t="@firebase/storage",qt="@firebase/storage-compat",Kt="@firebase/firestore",Ht="@firebase/firestore-compat",Gt="firebase",Wt="[DEFAULT]",Qt={[_t]:"fire-core",[St]:"fire-core-compat",[It]:"fire-analytics",[kt]:"fire-analytics-compat",[Ct]:"fire-app-check",[Tt]:"fire-app-check-compat",[At]:"fire-auth",[Nt]:"fire-auth-compat",[Dt]:"fire-rtdb",[Ot]:"fire-rtdb-compat",[Rt]:"fire-fn",[Pt]:"fire-fn-compat",[Ft]:"fire-iid",[Mt]:"fire-iid-compat",[Lt]:"fire-fcm",[jt]:"fire-fcm-compat",[Vt]:"fire-perf",[Ut]:"fire-perf-compat",[zt]:"fire-rc",[Bt]:"fire-rc-compat",[$t]:"fire-gcs",[qt]:"fire-gcs-compat",[Kt]:"fire-fst",[Ht]:"fire-fst-compat","fire-js":"fire-js",[Gt]:"fire-js-all"},Yt=new Map,Xt=new Map;function Jt(e,t){try{e.container.addComponent(t)}catch(n){xt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Zt(e){const t=e.name;if(Xt.has(t))return xt.debug(`There were multiple attempts to register component ${t}.`),!1;Xt.set(t,e);for(const t of Yt.values())Jt(t,e);return!0}function en(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const tn=new Me("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}const rn="9.23.0";function sn(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw tn.create("bad-app-name",{appName:String(i)});if(n||(n=Ne()),!n)throw tn.create("no-options");const s=Yt.get(i);if(s){if(je(n,s.options)&&je(r,s.config))return s;throw tn.create("duplicate-app",{appName:i})}const o=new Qe(i);for(const e of Xt.values())o.addComponent(e);const a=new nn(n,r,o);return Yt.set(i,a),a}function on(e=Wt){const t=Yt.get(e);if(!t&&e===Wt&&Ne())return sn();if(!t)throw tn.create("no-app",{appName:e});return t}function an(e,t,n){var r;let i=null!==(r=Qt[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void xt.warn(e.join(" "))}Zt(new He(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const ln="firebase-heartbeat-database",un=1,cn="firebase-heartbeat-store";let hn=null;function dn(){return hn||(hn=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=ft(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ft(o.result),e.oldVersion,e.newVersion,ft(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ln,un,{upgrade:(e,t)=>{0===t&&e.createObjectStore(cn)}}).catch((e=>{throw tn.create("idb-open",{originalErrorMessage:e.message})}))),hn}async function fn(e,t){try{const n=(await dn()).transaction(cn,"readwrite"),r=n.objectStore(cn);await r.put(t,pn(e)),await n.done}catch(e){if(e instanceof Fe)xt.warn(e.message);else{const t=tn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});xt.warn(t.message)}}}function pn(e){return`${e.name}!${e.options.appId}`}class mn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=gn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=gn(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),vn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Ie(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function gn(){return(new Date).toISOString().substring(0,10)}class yn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Pe()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await dn();return await t.transaction(cn).objectStore(cn).get(pn(e))}catch(e){if(e instanceof Fe)xt.warn(e.message);else{const t=tn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});xt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function vn(e){return Ie(JSON.stringify({version:2,heartbeats:e})).length}function bn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Zt(new He("platform-logger",(e=>new wt(e)),"PRIVATE")),Zt(new He("heartbeat",(e=>new mn(e)),"PRIVATE")),an(_t,Et,""),an(_t,Et,"esm2017"),an("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const wn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_n=new Me("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),En=new nt("@firebase/auth");function xn(e,...t){En.logLevel<=Xe.ERROR&&En.error(`Auth (${rn}): ${e}`,...t)}function Sn(e,...t){throw In(e,...t)}function kn(e,...t){return In(e,...t)}function In(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return _n.create(e,...t)}function Tn(e,t,...n){if(!e)throw In(t,...n)}function Cn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xn(t),new Error(t)}function An(e,t){e||Cn(t)}function Nn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function On(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Dn()||"https:"===Dn()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Rn{constructor(e,t){this.shortDelay=e,this.longDelay=t,An(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return On()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(e,t){An(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Fn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ln=new Rn(3e4,6e4);function jn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Vn(e,t,n,r,i={}){return Un(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ue(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Fn.fetch()(Bn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Un(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mn),t);try{const t=new $n(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw qn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw qn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw qn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw qn(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const r=Object.assign(Object.assign({},wn()),{[t]:n});return new Me("auth","Firebase",r).create(t,{appName:e.name})}(e,a,o);Sn(e,a)}}catch(t){if(t instanceof Fe)throw t;Sn(e,"network-request-failed",{message:String(t)})}}async function zn(e,t,n,r,i={}){const s=await Vn(e,t,n,r,i);return"mfaPendingCredential"in s&&Sn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Bn(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Pn(e.config,i):`${e.config.apiScheme}://${i}`}class $n{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(kn(this.auth,"network-request-failed"))),Ln.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kn(e,t,r);return i.customData._tokenResponse=n,i}function Kn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Hn(e){return 1e3*Number(e)}function Gn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Te(n);return e?JSON.parse(e):(xn("Failed to decode base64 JWT payload"),null)}catch(e){return xn("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function Wn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Fe&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Qn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Yn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kn(this.lastLoginAt),this.creationTime=Kn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Wn(e,async function(e,t){return Vn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Tn(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=bn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c=!!l&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yn(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}class Jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tn(e.idToken,"internal-error"),Tn(void 0!==e.idToken,"internal-error"),Tn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Gn(e);return Tn(t,"internal-error"),Tn(void 0!==t.exp,"internal-error"),Tn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Tn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Un(e,{},(async()=>{const n=Ue({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Bn(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Fn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Jn;return n&&(Tn("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Tn("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Tn("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jn,this.toJSON())}_performRefresh(){return Cn("not implemented")}}function Zn(e,t){Tn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class er{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=bn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wn(this,this.stsTokenManager.getToken(this.auth,e));return Tn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Ke(e),r=await n.getIdToken(t),i=Gn(r);Tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kn(Hn(i.auth_time)),issuedAtTime:Kn(Hn(i.iat)),expirationTime:Kn(Hn(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ke(e);await Xn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wn(this,async function(e,t){return Vn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=t;Tn(v&&E,e,"internal-error");const x=Jn.fromJSON(this.name,E);Tn("string"==typeof v,e,"internal-error"),Zn(c,e.name),Zn(h,e.name),Tn("boolean"==typeof b,e,"internal-error"),Tn("boolean"==typeof w,e,"internal-error"),Zn(d,e.name),Zn(f,e.name),Zn(p,e.name),Zn(m,e.name),Zn(g,e.name),Zn(y,e.name);const S=new er({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:x,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new Jn;r.updateFromServerResponse(t);const i=new er({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xn(i),i}}const tr=new Map;function nr(e){An(e instanceof Function,"Expected a class definition");let t=tr.get(e);return t?(An(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tr.set(e,t),t)}class rr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rr.type="NONE";const ir=rr;function sr(e,t,n){return`firebase:${e}:${t}:${n}`}class or{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=sr(this.userKey,r.apiKey,i),this.fullPersistenceKey=sr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new or(nr(ir),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||nr(ir);const s=sr(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=er._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new or(i,e,n)):new or(i,e,n)}}function ar(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fr(t))return"Blackberry";if(pr(t))return"Webos";if(ur(t))return"Safari";if((t.includes("chrome/")||cr(t))&&!t.includes("edge/"))return"Chrome";if(dr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function lr(e=Re()){return/firefox\//i.test(e)}function ur(e=Re()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function cr(e=Re()){return/crios\//i.test(e)}function hr(e=Re()){return/iemobile/i.test(e)}function dr(e=Re()){return/android/i.test(e)}function fr(e=Re()){return/blackberry/i.test(e)}function pr(e=Re()){return/webos/i.test(e)}function mr(e=Re()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gr(e=Re()){return mr(e)||dr(e)||pr(e)||fr(e)||/windows phone/i.test(e)||hr(e)}function yr(e,t=[]){let n;switch(e){case"Browser":n=ar(Re());break;case"Worker":n=`${ar(Re())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${rn}/${r}`}async function vr(e,t){return Vn(e,"GET","/v2/recaptchaConfig",jn(e,t))}function br(e){return void 0!==e&&void 0!==e.enterprise}class wr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function _r(e){return new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=kn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}))}function Er(e){return`__${e}${Math.floor(1e6*Math.random())}`}class xr{constructor(e){this.type="recaptcha-enterprise",this.auth=Tr(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;br(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{vr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new wr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&br(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));_r("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Sr(e,t,n,r=!1){const i=new xr(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class kr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Ir{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cr(this),this.idTokenSubscription=new Cr(this),this.beforeStateQueue=new kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_n,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await or.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xn(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ke(e):null;return t&&Tn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Tn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(nr(e))}))}async initializeRecaptchaConfig(){const e=await vr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new wr(e);null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new xr(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Me("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&nr(e)||this._popupRedirectResolver;Tn(t,this,"argument-error"),this.redirectPersistenceManager=await or.create(this,[nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Tn(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){En.logLevel<=Xe.WARN&&En.warn(`Auth (${rn}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Tr(e){return Ke(e)}class Cr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new $e(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ar(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Dr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,t){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}}async function Or(e,t){return zn(e,"POST","/v1/accounts:signInWithPassword",jn(e,t))}class Rr extends Dr{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Rr(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Rr(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Sr(e,n,"signInWithPassword");return Or(e,t)}return Or(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Sr(e,n,"signInWithPassword");return Or(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return zn(e,"POST","/v1/accounts:signInWithEmailLink",jn(e,t))}(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Vn(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return zn(e,"POST","/v1/accounts:signInWithEmailLink",jn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pr(e,t){return zn(e,"POST","/v1/accounts:signInWithIdp",jn(e,t))}class Fr extends Dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=bn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Fr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Pr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Pr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ue(t)}return e}}const Mr={USER_NOT_FOUND:"user-not-found"};class Lr extends Dr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Lr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Lr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return zn(e,"POST","/v1/accounts:signInWithPhoneNumber",jn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await zn(e,"POST","/v1/accounts:signInWithPhoneNumber",jn(e,t));if(n.temporaryProof)throw qn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return zn(e,"POST","/v1/accounts:signInWithPhoneNumber",jn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Mr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Lr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class jr{constructor(e){var t,n,r,i,s,o;const a=ze(Be(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Tn(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=ze(Be(e)).link,n=t?ze(Be(t)).deep_link_id:null,r=ze(Be(e)).deep_link_id;return(r?ze(Be(r)).link:null)||r||n||t||e}(e);try{return new jr(t)}catch(e){return null}}}class Vr{constructor(){this.providerId=Vr.PROVIDER_ID}static credential(e,t){return Rr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=jr.parseLink(t);return Tn(n,"argument-error"),Rr._fromEmailAndCode(e,n.code,n.tenantId)}}Vr.PROVIDER_ID="password",Vr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Vr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ur{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zr extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Br extends zr{constructor(){super("facebook.com")}static credential(e){return Fr._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch(e){return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com",Br.PROVIDER_ID="facebook.com";class $r extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fr._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return $r.credential(t,n)}catch(e){return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com",$r.PROVIDER_ID="google.com";class qr extends zr{constructor(){super("github.com")}static credential(e){return Fr._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch(e){return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com",qr.PROVIDER_ID="github.com";class Kr extends zr{constructor(){super("twitter.com")}static credential(e,t){return Fr._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Kr.credential(t,n)}catch(e){return null}}}async function Hr(e,t){return zn(e,"POST","/v1/accounts:signUp",jn(e,t))}Kr.TWITTER_SIGN_IN_METHOD="twitter.com",Kr.PROVIDER_ID="twitter.com";class Gr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await er._fromIdTokenResponse(e,n,r),s=Wr(n);return new Gr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wr(n);return new Gr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Qr extends Fe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Qr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Qr(e,t,n,r)}}function Yr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Qr._fromErrorAndOperation(e,n,t,r);throw n}))}async function Xr(e,t,n=!1){const r="signIn",i=await Yr(e,r,t),s=await Gr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const Jr="__sak";class Zr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jr,"1"),this.storage.removeItem(Jr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ei extends Zr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Re();return ur(e)||mr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=gr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=Re();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ei.type="LOCAL";const ti=ei;class ni extends Zr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ni.type="SESSION";const ri=ni;class ii{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ii(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function si(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}ii.receivers=[];class oi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=si("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ai(){return window}function li(){return void 0!==ai().WorkerGlobalScope&&"function"==typeof ai().importScripts}const ui="firebaseLocalStorageDb",ci="firebaseLocalStorage",hi="fbase_key";class di{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function fi(e,t){return e.transaction([ci],t?"readwrite":"readonly").objectStore(ci)}function pi(){const e=indexedDB.open(ui,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ci,{keyPath:hi})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ci)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ui);return new di(e).toPromise()}(),t(await pi()))}))}))}async function mi(e,t,n){const r=fi(e,!0).put({[hi]:t,value:n});return new di(r).toPromise()}function gi(e,t){const n=fi(e,!0).delete(t);return new di(n).toPromise()}class yi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await pi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return li()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ii._getInstance(li()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new oi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}var t}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pi();return await mi(e,Jr,"1"),await gi(e,Jr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>mi(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=fi(e,!1).get(t),r=await new di(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>gi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=fi(e,!1).getAll();return new di(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}yi.type="LOCAL";const vi=yi;Er("rcb"),new Rn(3e4,6e4);class bi{constructor(e){this.providerId=bi.PROVIDER_ID,this.auth=Tr(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(Tn("string"==typeof i,e,"argument-error"),Tn("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Tn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Vn(e,"POST","/v2/accounts/mfaEnrollment:start",jn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Tn("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Tn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Vn(e,"POST","/v2/accounts/mfaSignIn:start",jn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Vn(e,"POST","/v1/accounts:sendVerificationCode",jn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,Ke(t))}static credential(e,t){return Lr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return bi.credentialFromTaggedObject(t)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Lr._fromTokenResponse(t,n):null}}bi.PROVIDER_ID="phone",bi.PHONE_SIGN_IN_METHOD="phone";class wi extends Dr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _i(e){return Xr(e.auth,new wi(e),e.bypassAuthState)}function Ei(e){const{auth:t,user:n}=e;return Tn(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await Wn(e,Yr(r,i,t,e),n);Tn(s.idToken,r,"internal-error");const o=Gn(s.idToken);Tn(o,r,"internal-error");const{sub:a}=o;return Tn(e.uid===a,r,"user-mismatch"),Gr._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Sn(r,"user-mismatch"),e}}(n,new wi(e),e.bypassAuthState)}async function xi(e){const{auth:t,user:n}=e;return Tn(n,t,"internal-error"),async function(e,t,n=!1){const r=await Wn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gr._forOperation(e,"link",r)}(n,new wi(e),e.bypassAuthState)}class Si{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _i;case"linkViaPopup":case"linkViaRedirect":return xi;case"reauthViaPopup":case"reauthViaRedirect":return Ei;default:Sn(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ki=new Rn(2e3,1e4);class Ii extends Si{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tn(e,this.auth,"internal-error"),e}async onExecution(){An(1===this.filter.length,"Popup operations only handle one event");const e=si();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(kn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ki.get())};e()}}Ii.currentPopupAction=null;const Ti="pendingRedirect",Ci=new Map;class Ai extends Si{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ci.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return sr(Ti,e.config.apiKey,e.name)}(t),r=function(e){return nr(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ci.set(this.auth._key(),e)}return this.bypassAuthState||Ci.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ni(e,t){Ci.set(e._key(),t)}async function Di(e,t,n=!1){const r=Tr(e),i=function(e,t){return t?nr(t):(Tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new Ai(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Oi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Pi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(kn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ri(e))}saveEventToCache(e){this.cachedEventUids.add(Ri(e)),this.lastProcessedEventTime=Date.now()}}function Ri(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Pi({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mi=/^https?/;function Li(e){const t=Nn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Mi.test(n))return!1;if(Fi.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ji=new Rn(3e4,6e4);function Vi(){const e=ai().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Ui=null;function zi(e){return Ui=Ui||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Vi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vi(),n(kn(e,"network-request-failed"))},timeout:ji.get()})}if(null===(i=null===(r=ai().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ai().gapi)||void 0===s?void 0:s.load)){const t=Er("iframefcb");return ai()[t]=()=>{gapi.load?o():n(kn(e,"network-request-failed"))},_r(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Ui=null,e}))}(e),Ui}const Bi=new Rn(5e3,15e3),$i={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ki(e){const t=e.config;Tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Pn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:rn},i=qi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ue(r).slice(1)}`}const Hi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Wi=encodeURIComponent("fac");async function Qi(e,t,n,r,i,s){Tn(e.config.authDomain,e,"auth-domain-config-required"),Tn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rn,eventId:i};if(t instanceof Ur){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof zr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const l=await e._getAppCheckToken(),u=l?`#${Wi}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?Pn(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Ue(a).slice(1)}${u}`}const Yi="webStorageSupport",Xi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ri,this._completeRedirectFn=Di,this._overrideRedirectResult=Ni}async _openPopup(e,t,n,r){var i;return An(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Hi),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Re().toLowerCase();n&&(a=cr(u)?"_blank":n),lr(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Re()){var t;return mr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Gi(null);const h=window.open(t||"",a,c);Tn(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Gi(h)}(e,await Qi(e,t,n,Nn(),r),si())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await Qi(e,t,n,Nn(),r),ai().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(An(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await zi(e),n=ai().gapi;return Tn(n,e,"internal-error"),t.open({where:document.body,url:Ki(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$i,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=kn(e,"network-request-failed"),s=ai().setTimeout((()=>{r(i)}),Bi.get());function o(){ai().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Oi(e);return t.register("authEvent",(t=>(Tn(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yi,{type:Yi},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Yi];void 0!==i&&t(!!i),Sn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Vn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Li(e))return}catch(e){}Sn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gr()||ur()||mr()}};var Ji="@firebase/auth",Zi="0.23.2";class es{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ts=De("authIdTokenMaxAge")||300;let ns=null;function rs(e=on()){const t=en(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=en(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(je(n.getOptions(),null!=t?t:{}))return e;Sn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xi,persistence:[vi,ti,ri]}),r=De("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ts)return;const r=null==t?void 0:t.token;ns!==r&&(ns=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Ke(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,r,i){Ke(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var i;const s=Ae("auth");return s&&function(e,t,n){const r=Tr(e);Tn(r._canInitEmulator,r,"emulator-config-failed"),Tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ar(t),{host:o,port:a}=function(e){const t=Ar(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Nr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Nr(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}var is;is="Browser",Zt(new He("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Tn(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:is,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yr(is)},l=new Ir(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nr);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Zt(new He("auth-internal",(e=>(e=>new es(e))(Tr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),an(Ji,Zi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(is)),an(Ji,Zi,"esm2017");var ss=e=>"checkbox"===e.type,os=e=>e instanceof Date,as=e=>null==e;const ls=e=>"object"==typeof e;var us=e=>!as(e)&&!Array.isArray(e)&&ls(e)&&!os(e),cs=e=>us(e)&&e.target?ss(e.target)?e.target.checked:e.target.value:e,hs=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),ds=e=>{const t=e.constructor&&e.constructor.prototype;return us(t)&&t.hasOwnProperty("isPrototypeOf")},fs="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function ps(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(fs&&(e instanceof Blob||e instanceof FileList)||!n&&!us(e))return e;if(t=n?[]:{},n||ds(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=ps(e[n]));else t=e}return t}var ms=e=>Array.isArray(e)?e.filter(Boolean):[],gs=e=>void 0===e,ys=(e,t,n)=>{if(!t||!us(e))return n;const r=ms(t.split(/[,[\].]+?/)).reduce(((e,t)=>as(e)?e:e[t]),e);return gs(r)||r===e?gs(e[t])?n:e[t]:r},vs=e=>"boolean"==typeof e,bs=e=>/^\w*$/.test(e),ws=e=>ms(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_s=(e,t,n)=>{let r=-1;const i=bs(t)?[t]:ws(t),s=i.length,o=s-1;for(;++r<s;){const t=i[r];let s=n;if(r!==o){const n=e[t];s=us(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t)return;e[t]=s,e=e[t]}return e};const Es={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ss="pattern",ks="required",Is=n.createContext(null),Ts=()=>n.useContext(Is);var Cs=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t._proxyFormState[i]!==xs.all&&(t._proxyFormState[i]=!r||xs.all),n&&(n[i]=!0),e[i]}});return i},As=e=>us(e)&&!Object.keys(e).length,Ns=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return As(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||xs.all)))},Ds=e=>Array.isArray(e)?e:[e],Os=(e,t,n)=>!e||!t||e===t||Ds(e).some((e=>e&&(n?e===t:e.startsWith(t)||t.startsWith(e))));function Rs(e){const t=n.useRef(e);t.current=e,n.useEffect((()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}}),[e.disabled])}var Ps=e=>"string"==typeof e,Fs=(e,t,n,r,i)=>Ps(e)?(r&&t.watch.add(e),ys(n,e,i)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),ys(n,e)))):(r&&(t.watchAll=!0),n);function Ms(e){const t=Ts(),{control:r=t.control,name:i,defaultValue:s,disabled:o,exact:a}=e||{},l=n.useRef(i);l.current=i,Rs({disabled:o,subject:r._subjects.values,next:e=>{Os(l.current,e.name,a)&&c(ps(Fs(l.current,r._names,e.values||r._formValues,!1,s)))}});const[u,c]=n.useState(r._getWatch(i,s));return n.useEffect((()=>r._removeUnmounted())),u}var Ls=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},js=e=>({isOnSubmit:!e||e===xs.onSubmit,isOnBlur:e===xs.onBlur,isOnChange:e===xs.onChange,isOnAll:e===xs.all,isOnTouch:e===xs.onTouched}),Vs=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const Us=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=ys(e,i);if(n){const{_f:e,...s}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;Us(s,t)}else us(s)&&Us(s,t)}}};var zs=(e,t,n)=>{const r=Ds(ys(e,n));return _s(r,"root",t[n]),_s(e,n,r),e},Bs=e=>"file"===e.type,$s=e=>"function"==typeof e,qs=e=>{if(!fs)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ks=e=>Ps(e),Hs=e=>"radio"===e.type,Gs=e=>e instanceof RegExp;const Ws={value:!1,isValid:!1},Qs={value:!0,isValid:!0};var Ys=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!gs(e[0].attributes.value)?gs(e[0].value)||""===e[0].value?Qs:{value:e[0].value,isValid:!0}:Qs:Ws}return Ws};const Xs={isValid:!1,value:null};var Js=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Xs):Xs;function Zs(e,t,n="validate"){if(Ks(e)||Array.isArray(e)&&e.every(Ks)||vs(e)&&!e)return{type:n,message:Ks(e)?e:"",ref:t}}var eo=e=>us(e)&&!Gs(e)?e:{value:e,message:""},to=async(e,t,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:c,max:h,pattern:d,validate:f,name:p,valueAsNumber:m,mount:g,disabled:y}=e._f,v=ys(t,p);if(!g||y)return{};const b=o?o[0]:s,w=e=>{r&&b.reportValidity&&(b.setCustomValidity(vs(e)?"":e||""),b.reportValidity())},_={},E=Hs(s),x=ss(s),S=E||x,k=(m||Bs(s))&&gs(s.value)&&gs(v)||qs(s)&&""===s.value||""===v||Array.isArray(v)&&!v.length,I=Ls.bind(null,p,n,_),T=(e,t,n,r="maxLength",i="minLength")=>{const o=e?t:n;_[p]={type:e?r:i,message:o,ref:s,...I(e?r:i,o)}};if(i?!Array.isArray(v)||!v.length:a&&(!S&&(k||as(v))||vs(v)&&!v||x&&!Ys(o).isValid||E&&!Js(o).isValid)){const{value:e,message:t}=Ks(a)?{value:!!a,message:a}:eo(a);if(e&&(_[p]={type:ks,message:t,ref:b,...I(ks,t)},!n))return w(t),_}if(!(k||as(c)&&as(h))){let e,t;const r=eo(h),i=eo(c);if(as(v)||isNaN(v)){const n=s.valueAsDate||new Date(v),o=e=>new Date((new Date).toDateString()+" "+e),a="time"==s.type,l="week"==s.type;Ps(r.value)&&v&&(e=a?o(v)>o(r.value):l?v>r.value:n>new Date(r.value)),Ps(i.value)&&v&&(t=a?o(v)<o(i.value):l?v<i.value:n<new Date(i.value))}else{const n=s.valueAsNumber||(v?+v:v);as(r.value)||(e=n>r.value),as(i.value)||(t=n<i.value)}if((e||t)&&(T(!!e,r.message,i.message,"max","min"),!n))return w(_[p].message),_}if((l||u)&&!k&&(Ps(v)||i&&Array.isArray(v))){const e=eo(l),t=eo(u),r=!as(e.value)&&v.length>+e.value,i=!as(t.value)&&v.length<+t.value;if((r||i)&&(T(r,e.message,t.message),!n))return w(_[p].message),_}if(d&&!k&&Ps(v)){const{value:e,message:t}=eo(d);if(Gs(e)&&!v.match(e)&&(_[p]={type:Ss,message:t,ref:s,...I(Ss,t)},!n))return w(t),_}if(f)if($s(f)){const e=Zs(await f(v,t),b);if(e&&(_[p]={...e,...I("validate",e.message)},!n))return w(e.message),_}else if(us(f)){let e={};for(const r in f){if(!As(e)&&!n)break;const i=Zs(await f[r](v,t),b,r);i&&(e={...i,...I(r,i.message)},w(i.message),n&&(_[p]=e))}if(!As(e)&&(_[p]={ref:b,...e},!n))return _}return w(!0),_};function no(e,t){const n=Array.isArray(t)?t:bs(t)?[t]:ws(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=gs(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,s=n[i];return r&&delete r[s],0!==i&&(us(r)&&As(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!gs(e[t]))return!1;return!0}(r))&&no(e,n.slice(0,-1)),e}var ro=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},io=e=>as(e)||!ls(e);function so(e,t){if(io(e)||io(t))return e===t;if(os(e)&&os(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(os(n)&&os(e)||us(n)&&us(e)||Array.isArray(n)&&Array.isArray(e)?!so(n,e):n!==e)return!1}}return!0}var oo=e=>"select-multiple"===e.type,ao=e=>Hs(e)||ss(e),lo=e=>qs(e)&&e.isConnected,uo=e=>{for(const t in e)if($s(e[t]))return!0;return!1};function co(e,t={}){const n=Array.isArray(e);if(us(e)||n)for(const n in e)Array.isArray(e[n])||us(e[n])&&!uo(e[n])?(t[n]=Array.isArray(e[n])?[]:{},co(e[n],t[n])):as(e[n])||(t[n]=!0);return t}function ho(e,t,n){const r=Array.isArray(e);if(us(e)||r)for(const r in e)Array.isArray(e[r])||us(e[r])&&!uo(e[r])?gs(t)||io(n[r])?n[r]=Array.isArray(e[r])?co(e[r],[]):{...co(e[r])}:ho(e[r],as(t)?{}:t[r],n[r]):n[r]=!so(e[r],t[r]);return n}var fo=(e,t)=>ho(e,t,co(t)),po=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>gs(e)?e:t?""===e?NaN:e?+e:e:n&&Ps(e)?new Date(e):r?r(e):e;function mo(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Bs(t)?t.files:Hs(t)?Js(e.refs).value:oo(t)?[...t.selectedOptions].map((({value:e})=>e)):ss(t)?Ys(e.refs).value:po(gs(t.value)?e.ref.value:t.value,e)}var go=(e,t,n,r)=>{const i={};for(const n of e){const e=ys(t,n);e&&_s(i,n,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},yo=e=>gs(e)?e:Gs(e)?e.source:us(e)?Gs(e.value)?e.value.source:e.value:e,vo=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function bo(e,t,n){const r=ys(e,n);if(r||bs(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=ys(t,r),o=ys(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(o&&o.type)return{name:r,error:o};i.pop()}return{name:n}}var wo=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),_o=(e,t)=>!ms(ys(e,t)).length&&no(e,t);const Eo={mode:xs.onSubmit,reValidateMode:xs.onChange,shouldFocusError:!0};function xo(e={}){let t,n={...Eo,...e},r={submitCount:0,isDirty:!1,isLoading:$s(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},s=(us(n.defaultValues)||us(n.values))&&ps(n.defaultValues||n.values)||{},o=n.shouldUnregister?{}:ps(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:ro(),array:ro(),state:ro()},d=js(n.mode),f=js(n.reValidateMode),p=n.criteriaMode===xs.all,m=async e=>{if(c.isValid||e){const e=n.resolver?As((await b()).errors):await w(i,!0);e!==r.isValid&&h.state.next({isValid:e})}},g=(e,t)=>{(c.isValidating||c.validatingFields)&&((e||Array.from(l.mount)).forEach((e=>{e&&(t?_s(r.validatingFields,e,t):no(r.validatingFields,e))})),h.state.next({validatingFields:r.validatingFields,isValidating:!As(r.validatingFields)}))},y=(e,t,n,r)=>{const l=ys(i,e);if(l){const i=ys(o,e,gs(n)?ys(s,e):n);gs(i)||r&&r.defaultChecked||t?_s(o,e,t?i:mo(l._f)):x(e,i),a.mount&&m()}},v=(e,t,n,o,a)=>{let l=!1,u=!1;const d={name:e},f=!!(ys(i,e)&&ys(i,e)._f&&ys(i,e)._f.disabled);if(!n||o){c.isDirty&&(u=r.isDirty,r.isDirty=d.isDirty=_(),l=u!==d.isDirty);const n=f||so(ys(s,e),t);u=!(f||!ys(r.dirtyFields,e)),n||f?no(r.dirtyFields,e):_s(r.dirtyFields,e,!0),d.dirtyFields=r.dirtyFields,l=l||c.dirtyFields&&u!==!n}if(n){const t=ys(r.touchedFields,e);t||(_s(r.touchedFields,e,n),d.touchedFields=r.touchedFields,l=l||c.touchedFields&&t!==n)}return l&&a&&h.state.next(d),l?d:{}},b=async e=>{g(e,!0);const t=await n.resolver(o,n.context,go(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return g(e),t},w=async(e,t,i={valid:!0})=>{for(const s in e){const a=e[s];if(a){const{_f:e,...u}=a;if(e){const u=l.array.has(e.name);g([s],!0);const c=await to(a,o,p,n.shouldUseNativeValidation&&!t,u);if(g([s]),c[e.name]&&(i.valid=!1,t))break;!t&&(ys(c,e.name)?u?zs(r.errors,c,e.name):_s(r.errors,e.name,c[e.name]):no(r.errors,e.name))}u&&await w(u,t,i)}}return i.valid},_=(e,t)=>(e&&t&&_s(o,e,t),!so(A(),s)),E=(e,t,n)=>Fs(e,l,{...a.mount?o:gs(t)?s:Ps(e)?{[e]:t}:t},n,t),x=(e,t,n={})=>{const r=ys(i,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&_s(o,e,po(t,n)),s=qs(n.ref)&&as(t)?"":t,oo(n.ref)?[...n.ref.options].forEach((e=>e.selected=s.includes(e.value))):n.refs?ss(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):n.refs[0]&&(n.refs[0].checked=!!s):n.refs.forEach((e=>e.checked=e.value===s)):Bs(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||h.values.next({name:e,values:{...o}})))}(n.shouldDirty||n.shouldTouch)&&v(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},S=(e,t,n)=>{for(const r in t){const s=t[r],o=`${e}.${r}`,a=ys(i,o);!l.array.has(e)&&io(s)&&(!a||a._f)||os(s)?x(o,s,n):S(o,s,n)}},k=(e,t,n={})=>{const u=ys(i,e),d=l.array.has(e),f=ps(t);_s(o,e,f),d?(h.array.next({name:e,values:{...o}}),(c.isDirty||c.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:fo(s,o),isDirty:_(e,f)})):!u||u._f||as(f)?x(e,f,n):S(e,f,n),Vs(e,l)&&h.state.next({...r}),h.values.next({name:a.mount?e:void 0,values:{...o}})},I=async s=>{a.mount=!0;const y=s.target;let _=y.name,E=!0;const x=ys(i,_),S=e=>{E=Number.isNaN(e)||e===ys(o,_,e)};if(x){let a,k;const I=y.type?mo(x._f):cs(s),T=s.type===Es.BLUR||s.type===Es.FOCUS_OUT,A=!vo(x._f)&&!n.resolver&&!ys(r.errors,_)&&!x._f.deps||wo(T,ys(r.touchedFields,_),r.isSubmitted,f,d),N=Vs(_,l,T);_s(o,_,I),T?(x._f.onBlur&&x._f.onBlur(s),t&&t(0)):x._f.onChange&&x._f.onChange(s);const D=v(_,I,T,!1),O=!As(D)||N;if(!T&&h.values.next({name:_,type:s.type,values:{...o}}),A)return c.isValid&&m(),O&&h.state.next({name:_,...N?{}:D});if(!T&&N&&h.state.next({...r}),n.resolver){const{errors:e}=await b([_]);if(S(I),E){const t=bo(r.errors,i,_),n=bo(e,i,t.name||_);a=n.error,_=n.name,k=As(e)}}else g([_],!0),a=(await to(x,o,p,n.shouldUseNativeValidation))[_],g([_]),S(I),E&&(a?k=!1:c.isValid&&(k=await w(i,!0)));E&&(x._f.deps&&C(x._f.deps),((n,i,s,o)=>{const a=ys(r.errors,n),l=c.isValid&&vs(i)&&r.isValid!==i;if(e.delayError&&s?(d=()=>((e,t)=>{_s(r.errors,e,t),h.state.next({errors:r.errors})})(n,s),t=e=>{clearTimeout(u),u=setTimeout(d,e)},t(e.delayError)):(clearTimeout(u),t=null,s?_s(r.errors,n,s):no(r.errors,n)),(s?!so(a,s):a)||!As(o)||l){const e={...o,...l&&vs(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},h.state.next(e)}var d})(_,k,a,D))}},T=(e,t)=>{if(ys(r.errors,t)&&e.focus)return e.focus(),1},C=async(e,t={})=>{let s,o;const a=Ds(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await b(e);if(e)for(const n of e){const e=ys(t,n);e?_s(r.errors,n,e):no(r.errors,n)}else r.errors=t;return t})(gs(e)?e:a);s=As(t),o=e?!a.some((e=>ys(t,e))):s}else e?(o=(await Promise.all(a.map((async e=>{const t=ys(i,e);return await w(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&m()):o=s=await w(i);return h.state.next({...!Ps(e)||c.isValid&&s!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:s}:{},errors:r.errors}),t.shouldFocus&&!o&&Us(i,T,e?a:l.mount),o},A=e=>{const t={...a.mount?o:s};return gs(e)?t:Ps(e)?ys(t,e):e.map((e=>ys(t,e)))},N=(e,t)=>({invalid:!!ys((t||r).errors,e),isDirty:!!ys((t||r).dirtyFields,e),error:ys((t||r).errors,e),isValidating:!!ys(r.validatingFields,e),isTouched:!!ys((t||r).touchedFields,e)}),D=(e,t,n)=>{const s=(ys(i,e,{_f:{}})._f||{}).ref,o=ys(r.errors,e)||{},{ref:a,message:l,type:u,...c}=o;_s(r.errors,e,{...c,...t,ref:s}),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},O=(e,t={})=>{for(const a of e?Ds(e):l.mount)l.mount.delete(a),l.array.delete(a),t.keepValue||(no(i,a),no(o,a)),!t.keepError&&no(r.errors,a),!t.keepDirty&&no(r.dirtyFields,a),!t.keepTouched&&no(r.touchedFields,a),!t.keepIsValidating&&no(r.validatingFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&no(s,a);h.values.next({values:{...o}}),h.state.next({...r,...t.keepDirty?{isDirty:_()}:{}}),!t.keepIsValid&&m()},R=({disabled:e,name:t,field:n,fields:r,value:i})=>{if(vs(e)&&a.mount||e){const s=e?void 0:gs(i)?mo(n?n._f:ys(r,t)._f):i;_s(o,t,s),v(t,s,!1,!1,!0)}},P=(e,t={})=>{let r=ys(i,e);const o=vs(t.disabled);return _s(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?R({field:r,disabled:t.disabled,name:e,value:t.value}):y(e,!0,t.value),{...o?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:yo(t.min),max:yo(t.max),minLength:yo(t.minLength),maxLength:yo(t.maxLength),pattern:yo(t.pattern)}:{},name:e,onChange:I,onBlur:I,ref:o=>{if(o){P(e,t),r=ys(i,e);const n=gs(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=ao(n),l=r._f.refs||[];if(a?l.find((e=>e===n)):n===r._f.ref)return;_s(i,e,{_f:{...r._f,...a?{refs:[...l.filter(lo),n,...Array.isArray(ys(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),y(e,!1,void 0,n)}else r=ys(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!hs(l.array,e)||!a.action)&&l.unMount.add(e)}}},F=()=>n.shouldFocusError&&Us(i,T,l.mount),M=(e,t)=>async s=>{let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let l=ps(o);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await b();r.errors=e,l=t}else await w(i);if(no(r.errors,"root"),As(r.errors)){h.state.next({errors:{}});try{await e(l,s)}catch(e){a=e}}else t&&await t({...r.errors},s),F(),setTimeout(F);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:As(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a},L=(t,n={})=>{const u=t?ps(t):s,d=ps(u),f=As(t),p=f?s:d;if(n.keepDefaultValues||(s=u),!n.keepValues){if(n.keepDirtyValues)for(const e of l.mount)ys(r.dirtyFields,e)?_s(p,e,ys(o,e)):k(e,ys(p,e));else{if(fs&&gs(t))for(const e of l.mount){const t=ys(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(qs(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}o=e.shouldUnregister?n.keepDefaultValues?ps(s):{}:ps(p),h.array.next({values:{...p}}),h.values.next({values:{...p}})}l={mount:n.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!c.isValid||!!n.keepIsValid||!!n.keepDirtyValues,a.watch=!!e.shouldUnregister,h.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:!f&&(n.keepDirty?r.isDirty:!(!n.keepDefaultValues||so(t,s))),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:f?{}:n.keepDirtyValues?n.keepDefaultValues&&o?fo(s,o):r.dirtyFields:n.keepDefaultValues&&t?fo(s,t):n.keepDirty?r.dirtyFields:{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},j=(e,t)=>L($s(e)?e(o):e,t);return{control:{register:P,unregister:O,getFieldState:N,handleSubmit:M,setError:D,_executeSchema:b,_getWatch:E,_getDirty:_,_updateValid:m,_removeUnmounted:()=>{for(const e of l.unMount){const t=ys(i,e);t&&(t._f.refs?t._f.refs.every((e=>!lo(e))):!lo(t._f.ref))&&O(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],n,l,u=!0,d=!0)=>{if(l&&n){if(a.action=!0,d&&Array.isArray(ys(i,e))){const t=n(ys(i,e),l.argA,l.argB);u&&_s(i,e,t)}if(d&&Array.isArray(ys(r.errors,e))){const t=n(ys(r.errors,e),l.argA,l.argB);u&&_s(r.errors,e,t),_o(r.errors,e)}if(c.touchedFields&&d&&Array.isArray(ys(r.touchedFields,e))){const t=n(ys(r.touchedFields,e),l.argA,l.argB);u&&_s(r.touchedFields,e,t)}c.dirtyFields&&(r.dirtyFields=fo(s,o)),h.state.next({name:e,isDirty:_(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _s(o,e,t)},_updateDisabledField:R,_getFieldArray:t=>ms(ys(a.mount?o:s,t,e.shouldUnregister?ys(s,t,[]):[])),_reset:L,_resetDefaultValues:()=>$s(n.defaultValues)&&n.defaultValues().then((e=>{j(e,n.resetOptions),h.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{vs(e)&&(h.state.next({disabled:e}),Us(i,((t,n)=>{const r=ys(i,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach((t=>{t.disabled=r._f.disabled||e})))}),0,!1))},_subjects:h,_proxyFormState:c,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:C,register:P,handleSubmit:M,watch:(e,t)=>$s(e)?h.values.subscribe({next:n=>e(E(void 0,t),n)}):E(e,t,!0),setValue:k,getValues:A,reset:j,resetField:(e,t={})=>{ys(i,e)&&(gs(t.defaultValue)?k(e,ps(ys(s,e))):(k(e,t.defaultValue),_s(s,e,ps(t.defaultValue))),t.keepTouched||no(r.touchedFields,e),t.keepDirty||(no(r.dirtyFields,e),r.isDirty=t.defaultValue?_(e,ps(ys(s,e))):_()),t.keepError||(no(r.errors,e),c.isValid&&m()),h.state.next({...r}))},clearErrors:e=>{e&&Ds(e).forEach((e=>no(r.errors,e))),h.state.next({errors:e?r.errors:{}})},unregister:O,setError:D,setFocus:(e,t={})=>{const n=ys(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:N}}function So(e={}){const t=n.useRef(),r=n.useRef(),[i,s]=n.useState({isDirty:!1,isValidating:!1,isLoading:$s(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:$s(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...xo(e),formState:i});const o=t.current.control;return o._options=e,Rs({subject:o._subjects.state,next:e=>{Ns(e,o._proxyFormState,o._updateFormState,!0)&&s({...o._formState})}}),n.useEffect((()=>o._disableForm(e.disabled)),[o,e.disabled]),n.useEffect((()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==i.isDirty&&o._subjects.state.next({isDirty:e})}}),[o,i.isDirty]),n.useEffect((()=>{e.values&&!so(e.values,r.current)?(o._reset(e.values,o._options.resetOptions),r.current=e.values,s((e=>({...e})))):o._resetDefaultValues()}),[e.values,o]),n.useEffect((()=>{e.errors&&o._setErrors(e.errors)}),[e.errors,o]),n.useEffect((()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()})),n.useEffect((()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})}),[e.shouldUnregister,o]),t.current.formState=Cs(i,o),t.current}var ko,Io;try{ko=Map}catch(e){}try{Io=Set}catch(e){}function To(e,t,n){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(Co);if(ko&&e instanceof ko)return new Map(Array.from(e.entries()));if(Io&&e instanceof Io)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var s=t.findIndex((function(t){return t===e[i]}));r[i]=s>-1?n[s]:To(e[i],t,n)}return r}return e}function Co(e){return To(e,[],[])}const Ao=Object.prototype.toString,No=Error.prototype.toString,Do=RegExp.prototype.toString,Oo="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",Ro=/^Symbol\((.*)\)(.*)$/;function Po(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return Oo.call(e).replace(Ro,"Symbol($1)");const r=Ao.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+No.call(e)+"]":"RegExp"===r?Do.call(e):null}function Fo(e,t){let n=Po(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=Po(this[e],t);return null!==r?r:n}),2)}let Mo={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{let i=null!=r&&r!==n,s=`${e} must be a \`${t}\` type, but the final value was: \`${Fo(n,!0)}\``+(i?` (cast from the value \`${Fo(r,!0)}\`).`:".");return null===n&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},Lo={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},jo={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Vo={noUnknown:"${path} field has unspecified keys: ${unknown}"},Uo={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:Mo,string:Lo,number:{min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date:jo,object:Vo,array:Uo,boolean:{isValue:"${path} field must be ${value}"}});var zo=i(9264),Bo=i.n(zo);const $o=e=>e&&e.__isYupSchema__,qo=class{constructor(e,t){if(this.fn=void 0,this.refs=e,this.refs=e,"function"==typeof t)return void(this.fn=t);if(!Bo()(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,s="function"==typeof n?n:(...e)=>e.every((e=>e===n));this.fn=function(...e){let t=e.pop(),n=e.pop(),o=s(...e)?r:i;if(o)return"function"==typeof o?o(n):n.concat(o.resolve(t))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!$o(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}};function Ko(e){return null==e?[]:[].concat(e)}function Ho(){return Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}let Go=/\$\{\s*(\w+)\s*\}/g;class Wo extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Ho({},t,{path:n})),"string"==typeof e?e.replace(Go,((e,n)=>Fo(t[n]))):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],Ko(e).forEach((e=>{Wo.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,Wo)}}function Qo(e,t){let{endEarly:n,tests:r,args:i,value:s,errors:o,sort:a,path:l}=e,u=(e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}})(t),c=r.length;const h=[];if(o=o||[],!c)return o.length?u(new Wo(o,s,l)):u(null,s);for(let e=0;e<r.length;e++)(0,r[e])(i,(function(e){if(e){if(!Wo.isError(e))return u(e,s);if(n)return e.value=s,u(e,s);h.push(e)}if(--c<=0){if(h.length&&(a&&h.sort(a),o.length&&h.push(...o),o=h),o.length)return void u(new Wo(o,s,l),s);u(null,s)}}))}var Yo=i(4532),Xo=i.n(Yo),Jo=i(9683);class Zo{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext="$"===this.key[0],this.isValue="."===this.key[0],this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?"$":this.isValue?".":"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,Jo.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function ea(){return ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ea.apply(this,arguments)}function ta(e){function t(t,n){let{value:r,path:i="",label:s,options:o,originalValue:a,sync:l}=t,u=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]);const{name:c,test:h,params:d,message:f}=e;let{parent:p,context:m}=o;function g(e){return Zo.isRef(e)?e.getValue(r,p,m):e}function y(e={}){const t=Xo()(ea({value:r,originalValue:a,label:s,path:e.path||i},d,e.params),g),n=new Wo(Wo.formatError(e.message||f,t),r,t.path,e.type||c);return n.params=t,n}let v,b=ea({path:i,parent:p,type:c,createError:y,resolve:g,options:o,originalValue:a},u);if(l){try{var w;if(v=h.call(b,r,b),"function"==typeof(null==(w=v)?void 0:w.then))throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(e){return void n(e)}Wo.isError(v)?n(v):v?n(null,v):n(y())}else try{Promise.resolve(h.call(b,r,b)).then((e=>{Wo.isError(e)?n(e):e?n(null,e):n(y())})).catch(n)}catch(e){n(e)}}return t.OPTIONS=e,t}function na(e,t,n,r=n){let i,s,o;return t?((0,Jo.forEach)(t,((a,l,u)=>{let c=l?(e=>e.substr(0,e.length-1).substr(1))(a):a;if((e=e.resolve({context:r,parent:i,value:n})).innerType){let r=u?parseInt(c,10):0;if(n&&r>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[r],e=e.innerType}if(!u){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e._type}")`);i=n,n=n&&n[c],e=e.fields[c]}s=c,o=l?"["+a+"]":"."+a})),{schema:e,parent:i,parentPath:s}):{parent:i,parentPath:t,schema:e}}Zo.prototype.__isYupRef=!0;class ra{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(e){return this.toArray().reduce(((t,n)=>t.concat(Zo.isRef(n)?e(n):n)),[])}add(e){Zo.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Zo.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}clone(){const e=new ra;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function ia(){return ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ia.apply(this,arguments)}class sa{constructor(e){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new ra,this._blacklist=new ra,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(Mo.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=ia({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=ia({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Co(ia({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=ia({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(ia({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let i=Fo(e),s=Fo(r);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". \n\nattempted value: ${i} \n`+(s!==i?`result of cast: ${s}`:""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:r,path:i,from:s=[],originalValue:o=e,strict:a=this.spec.strict,abortEarly:l=this.spec.abortEarly}=t,u=e;a||(u=this._cast(u,ia({assert:!1},t)));let c={value:u,path:i,options:t,originalValue:o,schema:this,label:this.spec.label,sync:r,from:s},h=[];this._typeError&&h.push(this._typeError);let d=[];this._whitelistError&&d.push(this._whitelistError),this._blacklistError&&d.push(this._blacklistError),Qo({args:c,value:u,path:i,sync:r,tests:h,endEarly:l},(e=>{e?n(e,u):Qo({tests:this.tests.concat(d),args:c,path:i,sync:r,value:u,endEarly:l},n)}))}validate(e,t,n){let r=this.resolve(ia({},t,{value:e}));return"function"==typeof n?r._validate(e,t,n):new Promise(((n,i)=>r._validate(e,t,((e,t)=>{e?i(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(ia({},t,{value:e}))._validate(e,ia({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(Wo.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(e){if(Wo.isError(e))return!1;throw e}}_getDefault(){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this):Co(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}strict(e=!0){let t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=Mo.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=Mo.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){let e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=Mo.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=ta(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let n=this.clone(),r=Ko(e).map((e=>new Zo(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new qo(r,t)),n}typeError(e){let t=this.clone();return t._typeError=ta({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=Mo.oneOf){let n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=ta({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}notOneOf(e,t=Mo.notOneOf){let n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=ta({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec,r={meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return r}}sa.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])sa.prototype[`${e}At`]=function(t,n,r={}){const{parent:i,parentPath:s,schema:o}=na(this,t,n,r.context);return o[e](i&&i[s],ia({},r,{parent:i,path:t}))};for(const e of["equals","is"])sa.prototype[e]=sa.prototype.oneOf;for(const e of["not","nope"])sa.prototype[e]=sa.prototype.notOneOf;sa.prototype.optional=sa.prototype.notRequired;sa.prototype;const oa=e=>null==e;let aa=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,la=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,ua=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ca=e=>oa(e)||e===e.trim(),ha={}.toString();function da(){return new fa}class fa extends sa{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===ha?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=Lo.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return oa(t)||t.length===this.resolve(e)}})}min(e,t=Lo.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return oa(t)||t.length>=this.resolve(e)}})}max(e,t=Lo.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return oa(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"==typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||Lo.matches,params:{regex:e},test:t=>oa(t)||""===t&&i||-1!==t.search(e)})}email(e=Lo.email){return this.matches(aa,{name:"email",message:e,excludeEmptyString:!0})}url(e=Lo.url){return this.matches(la,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Lo.uuid){return this.matches(ua,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=Lo.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:ca})}lowercase(e=Lo.lowercase){return this.transform((e=>oa(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>oa(e)||e===e.toLowerCase()})}uppercase(e=Lo.uppercase){return this.transform((e=>oa(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>oa(e)||e===e.toUpperCase()})}}da.prototype=fa.prototype;var pa=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let ma=new Date("");function ga(){return new ya}class ya extends sa{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=pa.exec(e)){for(var s,o=0;s=r[o];++o)n[s]=+n[s]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?ma:new Date(e))}))}))}_typeCheck(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}prepareParam(e,t){let n;if(Zo.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=jo.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return oa(e)||e>=this.resolve(n)}})}max(e,t=jo.max){let n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return oa(e)||e<=this.resolve(n)}})}}ya.INVALID_DATE=ma,ga.prototype=ya.prototype,ga.INVALID_DATE=ma;var va=i(500),ba=i.n(va),wa=i(8002),_a=i.n(wa),Ea=i(6850),xa=i.n(Ea),Sa=i(7949),ka=i.n(Sa);function Ia(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function Ta(e){return(t,n)=>Ia(e,t)-Ia(e,n)}function Ca(){return Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ca.apply(this,arguments)}let Aa=e=>"[object Object]"===Object.prototype.toString.call(e);const Na=Ta([]);class Da extends sa{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=Na,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return Aa(e)||"function"==typeof e}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let i=this.fields,s=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),a={},l=Ca({},t,{parent:a,__validating:t.__validating||!1}),u=!1;for(const e of o){let n=i[e],o=Bo()(r,e);if(n){let i,s=r[e];l.path=(t.path?`${t.path}.`:"")+e,n=n.resolve({value:s,context:t.context,parent:a});let o="spec"in n?n.spec:void 0,c=null==o?void 0:o.strict;if(null==o?void 0:o.strip){u=u||e in r;continue}i=t.__validating&&c?r[e]:n.cast(r[e],l),void 0!==i&&(a[e]=i)}else o&&!s&&(a[e]=r[e]);a[e]!==r[e]&&(u=!0)}return u?a:r}_validate(e,t={},n){let r=[],{sync:i,from:s=[],originalValue:o=e,abortEarly:a=this.spec.abortEarly,recursive:l=this.spec.recursive}=t;s=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,t.from=s,super._validate(e,t,((e,u)=>{if(e){if(!Wo.isError(e)||a)return void n(e,u);r.push(e)}if(!l||!Aa(u))return void n(r[0]||null,u);o=o||u;let c=this._nodes.map((e=>(n,r)=>{let i=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,a=this.fields[e];a&&"validate"in a?a.validate(u[e],Ca({},t,{path:i,from:s,strict:!0,parent:u,originalValue:o[e]}),r):r(null)}));Qo({sync:i,tests:c,value:u,errors:r,endEarly:a,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=Ca({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[e,t]of Object.entries(this.fields)){const r=n[e];void 0===r?n[e]=t:r instanceof sa&&t instanceof sa&&(n[e]=t.concat(r))}return t.withMutation((()=>t.shape(n,this._excludedEdges)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let n=this.clone(),r=Object.assign(n.fields,e);return n.fields=r,n._sortErrors=Ta(Object.keys(r)),t.length&&(Array.isArray(t[0])||(t=[t]),n._excludedEdges=[...n._excludedEdges,...t]),n._nodes=function(e,t=[]){let n=[],r=new Set,i=new Set(t.map((([e,t])=>`${e}-${t}`)));function s(e,t){let s=(0,Jo.split)(e)[0];r.add(s),i.has(`${t}-${s}`)||n.push([t,s])}for(const t in e)if(Bo()(e,t)){let n=e[t];r.add(t),Zo.isRef(n)&&n.isSibling?s(n.path,t):$o(n)&&"deps"in n&&n.deps.forEach((e=>s(e,t)))}return ka().array(Array.from(r),n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const t of e)delete n[t];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=(0,Jo.getter)(e,!0);return this.transform((i=>{if(null==i)return i;let s=i;return Bo()(i,e)&&(s=Ca({},i),n||delete s[e],s[t]=r(i)),s}))}noUnknown(e=!0,t=Vo.noUnknown){"string"==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=Vo.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&xa()(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys(_a())}snakeCase(){return this.transformKeys(ba())}constantCase(){return this.transformKeys((e=>ba()(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=Xo()(this.fields,(e=>e.describe())),e}}function Oa(e){return new Da(e)}function Ra(){return Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(this,arguments)}function Pa(e){return new Fa(e)}Oa.prototype=Da.prototype;class Fa extends sa{constructor(e){super({type:"array"}),this.innerType=void 0,this.innerType=e,this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null}))}))}_typeCheck(e){return Array.isArray(e)}get _subType(){return this.innerType}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const i=n.map(((e,n)=>{const i=this.innerType.cast(e,Ra({},t,{path:`${t.path||""}[${n}]`}));return i!==e&&(r=!0),i}));return r?i:n}_validate(e,t={},n){var r,i;let s=[],o=t.sync,a=t.path,l=this.innerType,u=null!=(r=t.abortEarly)?r:this.spec.abortEarly,c=null!=(i=t.recursive)?i:this.spec.recursive,h=null!=t.originalValue?t.originalValue:e;super._validate(e,t,((e,r)=>{if(e){if(!Wo.isError(e)||u)return void n(e,r);s.push(e)}if(!c||!l||!this._typeCheck(r))return void n(s[0]||null,r);h=h||r;let i=new Array(r.length);for(let e=0;e<r.length;e++){let n=r[e],s=`${t.path||""}[${e}]`,o=Ra({},t,{path:s,strict:!0,parent:r,index:e,originalValue:h[e]});i[e]=(e,t)=>l.validate(n,o,t)}Qo({sync:o,path:a,value:r,errors:s,endEarly:u,tests:i},n)}))}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!$o(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Fo(e));return t.innerType=e,t}length(e,t=Uo.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return oa(t)||t.length===this.resolve(e)}})}min(e,t){return t=t||Uo.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return oa(t)||t.length>=this.resolve(e)}})}max(e,t){return t=t||Uo.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return oa(t)||t.length<=this.resolve(e)}})}ensure(){return this.default((()=>[])).transform(((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t)))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform((e=>null!=e?e.filter(t):e))}describe(){let e=super.describe();return this.innerType&&(e.innerType=this.innerType.describe()),e}nullable(e=!0){return super.nullable(e)}defined(){return super.defined()}required(e){return super.required(e)}}Pa.prototype=Fa.prototype;var Ma,La=function(e,t,n){if(e&&"reportValidity"in e){var r=ys(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},ja=function(e,t){var n=function(n){var r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?La(r.ref,n,e):r.refs&&r.refs.forEach((function(t){return La(t,n,e)}))};for(var r in t.fields)n(r)},Va=function(e,t){t.shouldUseNativeValidation&&ja(e,t);var n={};for(var r in e){var i=ys(t.fields,r);_s(n,r,Object.assign(e[r],{ref:i&&i.ref}))}return n},Ua=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](r,Object.assign({abortEarly:!1},t,{context:i}))).then((function(e){return s.shouldUseNativeValidation&&ja({},s),{values:n.rawValues?r:e,errors:{}}})))}catch(e){return a(e)}return l&&l.then?l.then(void 0,a):l}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:Va((t=e,n=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var r=e[t.path].types,i=r&&r[t.type];e[t.path]=Ls(t.path,n,e,t.type,i?[].concat(i,t.message):t.message)}return e}),{})),s)};var t,n})))}catch(e){return Promise.reject(e)}}};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WRONG_PASSWORD=1]="WRONG_PASSWORD",e[e.TOO_MANY_REQUESTS=2]="TOO_MANY_REQUESTS",e[e.EMAIL_ALREADY_IN_USE=3]="EMAIL_ALREADY_IN_USE",e[e.USER_NOT_FOUND=4]="USER_NOT_FOUND",e[e.NETWORK_REQUEST_FAILED=5]="NETWORK_REQUEST_FAILED"}(Ma||(Ma={}));const za={"wrong-password":{key:Ma.WRONG_PASSWORD,message:"Username and password do not match"},"too-many-requests":{key:Ma.TOO_MANY_REQUESTS,message:"Too many login attempts! Your account access has been temporarily disabled, try again later or reset your password."},"email-already-in-use":{key:Ma.EMAIL_ALREADY_IN_USE,message:"Email already in use"},"user-not-found":{key:Ma.USER_NOT_FOUND,message:"User not found"},"network-request-failed":{key:Ma.NETWORK_REQUEST_FAILED,message:"Could not connect to network. Are you connected to the internet?"}};function Ba(e,t){for(const[t,n]of Object.entries(za))if(e.message.includes(t))return n;return console.error("Unhandled firebase error",e),{key:Ma.UNKNOWN,message:t}}const $a=Oa().shape({email:da().email("Must be a valid email").required("Email is required"),password:da().required("Password is required")}),qa=function({auth:e}){const r=So({resolver:Ua($a),mode:"onBlur",reValidateMode:"onChange",defaultValues:{email:"",password:""}}),{register:i,handleSubmit:s,formState:{errors:o}}=r,[a,l]=(0,n.useState)(void 0);return(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("form",{onSubmit:s((t=>(l(void 0),function(e,t,n){return async function(e,t){return Xr(Tr(e),t)}(Ke(e),Vr.credential(t,n))}(e,t.email,t.password).catch((e=>{l(Ba(e,"Something went wrong when trying to log you in. Please try again later.").message)}))))),className:"form",children:[(0,t.jsxs)("div",{className:"inputContainer",children:[(0,t.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),(0,t.jsx)("input",{...i("email"),type:"text",className:"input",inputMode:"email",id:"username-input"})]}),(0,t.jsxs)("div",{className:"inputContainer",children:[(0,t.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),(0,t.jsx)("input",{...i("password"),type:"password",className:"input",id:"password-input"})]}),(0,t.jsx)("input",{className:"submit",type:"submit",value:"Log in"}),(0,t.jsxs)("div",{className:"errorContainer",children:[(0,t.jsx)("em",{className:"error",children:a}),(0,t.jsx)("em",{className:"error",children:o.email?.message||""}),(0,t.jsx)("em",{className:"error",children:o.password?.message||""})]})]})})},Ka=function({error:e}){return e?(0,t.jsx)("em",{className:"error",children:e.message}):null},Ha=Oa().shape({email:da().email("Must be a valid email").required("Email is required"),password:da().min(8,"Must be at least 8 characters long").required("Password is required")}),Ga=function({auth:e}){const r=So({resolver:Ua(Ha),mode:"onBlur",reValidateMode:"onChange",defaultValues:{email:"",password:""}}),{register:i,handleSubmit:s,formState:{errors:o}}=r,[a,l]=(0,n.useState)(void 0);return(0,t.jsxs)("form",{onSubmit:s((t=>{l(void 0),async function(e,t,n){var r;const i=Tr(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Sr(i,s,"signUpPassword");o=Hr(i,e)}else o=Hr(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Sr(i,s,"signUpPassword");return Hr(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await Gr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(e,t.email,t.password).catch((e=>{l(Ba(e,"Something went wrong when trying to sign you up. Please try again later.").message)}))})),children:[(0,t.jsx)("h1",{children:"Sign up"}),(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{...i("email"),type:"text",inputMode:"email",id:"username-input"}),(0,t.jsx)(Ka,{error:o.email}),(0,t.jsx)("br",{}),(0,t.jsx)("label",{htmlFor:"password",children:"Password"}),(0,t.jsx)("input",{...i("password"),type:"password",id:"password-input"}),(0,t.jsx)(Ka,{error:o.password}),(0,t.jsx)("input",{type:"submit",value:"Sign up"}),(0,t.jsx)("p",{children:a})]})},Wa={fontSize:"var(--font-size-large)",flex:"0 0 auto"},Qa={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},Ya=function({message:e}){return(0,t.jsx)("div",{style:Qa,children:(0,t.jsx)("em",{style:Wa,children:e})})},Xa=(0,n.createContext)({}),Ja=function({auth:e,db:r,children:i}){const[s,o]=(0,n.useState)("pre-auth"),[a,l]=(0,n.useState)(!0);return function(e,t,n,r){Ke(e).onAuthStateChanged((e=>{console.log("Auth state changed. User:",e),o(e)}),void 0,void 0)}(e),"pre-auth"===s?(0,t.jsx)(Ya,{message:"Trying to log you in..."}):s?(0,t.jsx)(Xa.Provider,{value:{user:s},children:i}):a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(qa,{auth:e}),(0,t.jsx)("button",{onClick:()=>l(!1),children:"Sign up"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ga,{auth:e}),(0,t.jsx)("button",{onClick:()=>l(!0),children:"Log in"})]})};var Za,el="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tl={},nl=nl||{},rl=el||self;function il(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function sl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ol="closure_uid_"+(1e9*Math.random()>>>0),al=0;function ll(e,t,n){return e.call.apply(e.bind,arguments)}function ul(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function cl(e,t,n){return(cl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ll:ul).apply(null,arguments)}function hl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function fl(){this.s=this.s,this.o=this.o}fl.prototype.s=!1,fl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ol)&&e[ol]||(e[ol]=++al))},fl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ml(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function gl(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(il(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function yl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}yl.prototype.h=function(){this.defaultPrevented=!0};var vl=function(){if(!rl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{rl.addEventListener("test",(()=>{}),t),rl.removeEventListener("test",(()=>{}),t)}catch(e){}return e}();function bl(e){return/^[\s\xa0]*$/.test(e)}function wl(){var e=rl.navigator;return e&&(e=e.userAgent)?e:""}function _l(e){return-1!=wl().indexOf(e)}function El(e){return El[" "](e),e}El[" "]=function(){};var xl,Sl,kl,Il=_l("Opera"),Tl=_l("Trident")||_l("MSIE"),Cl=_l("Edge"),Al=Cl||Tl,Nl=_l("Gecko")&&!(-1!=wl().toLowerCase().indexOf("webkit")&&!_l("Edge"))&&!(_l("Trident")||_l("MSIE"))&&!_l("Edge"),Dl=-1!=wl().toLowerCase().indexOf("webkit")&&!_l("Edge");function Ol(){var e=rl.document;return e?e.documentMode:void 0}e:{var Rl="",Pl=(Sl=wl(),Nl?/rv:([^\);]+)(\)|;)/.exec(Sl):Cl?/Edge\/([\d\.]+)/.exec(Sl):Tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sl):Dl?/WebKit\/(\S+)/.exec(Sl):Il?/(?:Version)[ \/]?(\S+)/.exec(Sl):void 0);if(Pl&&(Rl=Pl?Pl[1]:""),Tl){var Fl=Ol();if(null!=Fl&&Fl>parseFloat(Rl)){xl=String(Fl);break e}}xl=Rl}rl.document&&Tl?kl=Ol()||parseInt(xl,10)||void 0:kl=void 0;var Ml=kl;function Ll(e,t){if(yl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Nl){e:{try{El(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:jl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ll.$.h.call(this)}}dl(Ll,yl);var jl={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),Ul=0;function zl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ul,this.fa=this.ia=!1}function Bl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $l(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ql(e){const t={};for(const n in e)t[n]=e[n];return t}const Kl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hl(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Kl.length;t++)n=Kl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Gl(e){this.src=e,this.g={},this.h=0}function Wl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=pl(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Bl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ql(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Gl.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ql(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new zl(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Yl="closure_lm_"+(1e6*Math.random()|0),Xl={};function Jl(e,t,n,r,i){if(r&&r.once)return eu(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Jl(e,t[s],n,r,i);return null}return n=au(n),e&&e[Vl]?e.O(t,n,sl(r)?!!r.capture:!!r,i):Zl(e,t,n,!1,r,i)}function Zl(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=sl(i)?!!i.capture:!!i,a=su(e);if(a||(e[Yl]=a=new Gl(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=iu;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ru(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function eu(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)eu(e,t[s],n,r,i);return null}return n=au(n),e&&e[Vl]?e.P(t,n,sl(r)?!!r.capture:!!r,i):Zl(e,t,n,!0,r,i)}function tu(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)tu(e,t[s],n,r,i);else r=sl(r)?!!r.capture:!!r,n=au(n),e&&e[Vl]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Ql(s=e.g[t],n,r,i))&&(Bl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=su(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ql(t,n,r,i)),(n=-1<e?t[e]:null)&&nu(n))}function nu(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Vl])Wl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ru(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=su(t))?(Wl(n,e),0==n.h&&(n.src=null,t[Yl]=null)):Bl(e)}}}function ru(e){return e in Xl?Xl[e]:Xl[e]="on"+e}function iu(e,t){if(e.fa)e=!0;else{t=new Ll(t,this);var n=e.listener,r=e.la||e.src;e.ia&&nu(e),e=n.call(r,t)}return e}function su(e){return(e=e[Yl])instanceof Gl?e:null}var ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function au(e){return"function"==typeof e?e:(e[ou]||(e[ou]=function(t){return e.handleEvent(t)}),e[ou])}function lu(){fl.call(this),this.i=new Gl(this),this.S=this,this.J=null}function uu(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new yl(t,e);else if(t instanceof yl)t.target=t.target||e;else{var i=t;Hl(t=new yl(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=cu(o,r,!0,t)&&i}if(i=cu(o=t.g=e,r,!0,t)&&i,i=cu(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=cu(o=t.g=n[s],r,!1,t)&&i}function cu(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Wl(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}dl(lu,fl),lu.prototype[Vl]=!0,lu.prototype.removeEventListener=function(e,t,n,r){tu(this,e,t,n,r)},lu.prototype.N=function(){if(lu.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bl(n[r]);delete t.g[e],t.h--}}this.J=null},lu.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},lu.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var hu=rl.JSON.stringify;function du(){var e=bu;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var fu=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new pu),(e=>e.reset()));class pu{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mu(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function gu(e){rl.setTimeout((()=>{throw e}),0)}let yu,vu=!1,bu=new class{constructor(){this.h=this.g=null}add(e,t){const n=fu.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},wu=()=>{const e=rl.Promise.resolve(void 0);yu=()=>{e.then(_u)}};var _u=()=>{for(var e;e=du();){try{e.h.call(e.g)}catch(e){gu(e)}var t=fu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}vu=!1};function Eu(e,t){lu.call(this),this.h=e||1,this.g=t||rl,this.j=cl(this.qb,this),this.l=Date.now()}function xu(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Su(e,t,n){if("function"==typeof e)n&&(e=cl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=cl(e.handleEvent,e)}return 2147483647<Number(t)?-1:rl.setTimeout(e,t||0)}function ku(e){e.g=Su((()=>{e.g=null,e.i&&(e.i=!1,ku(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}dl(Eu,lu),(Za=Eu.prototype).ga=!1,Za.T=null,Za.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),uu(this,"tick"),this.ga&&(xu(this),this.start()))}},Za.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Za.N=function(){Eu.$.N.call(this),xu(this),delete this.g};class Iu extends fl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ku(this)}N(){super.N(),this.g&&(rl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tu(e){fl.call(this),this.h=e,this.g={}}dl(Tu,fl);var Cu=[];function Au(e,t,n,r){Array.isArray(n)||(n&&(Cu[0]=n.toString()),n=Cu);for(var i=0;i<n.length;i++){var s=Jl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Nu(e){$l(e.g,(function(e,t){this.g.hasOwnProperty(t)&&nu(e)}),e),e.g={}}function Du(){this.g=!0}function Ou(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return hu(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Tu.prototype.N=function(){Tu.$.N.call(this),Nu(this)},Tu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Du.prototype.Ea=function(){this.g=!1},Du.prototype.info=function(){};var Ru={},Pu=null;function Fu(){return Pu=Pu||new lu}function Mu(e){yl.call(this,Ru.Ta,e)}function Lu(e){const t=Fu();uu(t,new Mu(t))}function ju(e,t){yl.call(this,Ru.STAT_EVENT,e),this.stat=t}function Vu(e){const t=Fu();uu(t,new ju(t,e))}function Uu(e,t){yl.call(this,Ru.Ua,e),this.size=t}function zu(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return rl.setTimeout((function(){e()}),t)}Ru.Ta="serverreachability",dl(Mu,yl),Ru.STAT_EVENT="statevent",dl(ju,yl),Ru.Ua="timingevent",dl(Uu,yl);var Bu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$u={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qu(){}function Ku(e){return e.h||(e.h=e.i())}function Hu(){}qu.prototype.h=null;var Gu,Wu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qu(){yl.call(this,"d")}function Yu(){yl.call(this,"c")}function Xu(){}function Ju(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Tu(this),this.P=ec,e=Al?125:void 0,this.V=new Eu(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Zu}function Zu(){this.i=null,this.g="",this.h=!1}dl(Qu,yl),dl(Yu,yl),dl(Xu,qu),Xu.prototype.g=function(){return new XMLHttpRequest},Xu.prototype.i=function(){return{}},Gu=new Xu;var ec=45e3,tc={},nc={};function rc(e,t,n){e.L=1,e.v=Ec(yc(t)),e.s=n,e.S=!0,ic(e,null)}function ic(e,t){e.G=Date.now(),lc(e),e.A=yc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Fc(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Zu,e.g=Fh(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Iu(cl(e.Pa,e,e.g),e.O)),Au(e.U,e.g,"readystatechange",e.nb),t=e.I?ql(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Lu(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function sc(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function oc(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ac(e,n),r==nc){4==t&&(e.o=4,Vu(14),i=!1),Ou(e.j,e.m,null,"[Incomplete Response]");break}if(r==tc){e.o=4,Vu(15),Ou(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ou(e.j,e.m,r,null),fc(e,r)}sc(e)&&r!=nc&&r!=tc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Th(t),t.M=!0,Vu(11))):(Ou(e.j,e.m,n,"[Invalid Chunked Response]"),dc(e),hc(e))}function ac(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?nc:(n=Number(t.substring(n,r)),isNaN(n)?tc:(r+=1)+n>t.length?nc:(t=t.slice(r,r+n),e.C=r+n,t))}function lc(e){e.Y=Date.now()+e.P,uc(e,e.P)}function uc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zu(cl(e.lb,e),t)}function cc(e){e.B&&(rl.clearTimeout(e.B),e.B=null)}function hc(e){0==e.l.H||e.J||Nh(e.l,e)}function dc(e){cc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,xu(e.V),Nu(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function fc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Bc(n.i,e)))if(!e.K&&Bc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ah(n),bh(n)}Ih(n),Vu(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zu(cl(n.ib,n),6e3));if(1>=zc(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else Oh(n,11)}else if((e.K||n.g==e)&&Ah(n),!bl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($c(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,_c(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ph(r,r.J?r.pa:null,r.Y),o.K){qc(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(cc(a),lc(a)),r.g=o}else kh(r);0<n.j.length&&_h(n)}else"stop"!=u[0]&&"close"!=u[0]||Oh(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Oh(n,7):vh(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Lu()}catch(e){}}function pc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(il(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(il(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(il(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Za=Ju.prototype).setTimeout=function(e){this.P=e},Za.nb=function(e){e=e.target;const t=this.M;t&&3==dh(e)?t.l():this.Pa(e)},Za.Pa=function(e){try{if(e==this.g)e:{const c=dh(this.g);var t=this.g.Ia();if(this.g.da(),!(3>c)&&(3!=c||Al||this.g&&(this.h.h||this.g.ja()||fh(this.g)))){this.J||4!=c||7==t||Lu(),cc(this);var n=this.g.da();this.ca=n;t:if(sc(this)){var r=fh(this.g);e="";var i=r.length,s=4==dh(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dc(this),hc(this);var o="";break t}this.h.i=new rl.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bl(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Vu(12),dc(this),hc(this);break e}Ou(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fc(this,n)}this.S?(oc(this,c,o),Al&&this.i&&3==c&&(Au(this.U,this.V,"tick",this.mb),this.V.start())):(Ou(this.j,this.m,o,null),fc(this,o)),4==c&&dc(this),this.i&&!this.J&&(4==c?Nh(this.l,this):(this.i=!1,lc(this)))}else(function(e){const t={};e=(e.g&&2<=dh(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(bl(e[r]))continue;var n=mu(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Vu(12)):(this.o=0,Vu(13)),dc(this),hc(this)}}}catch(e){}},Za.mb=function(){if(this.g){var e=dh(this.g),t=this.g.ja();this.C<t.length&&(cc(this),oc(this,e,t),this.i&&4!=e&&lc(this))}},Za.cancel=function(){this.J=!0,dc(this)},Za.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Lu(),Vu(17)),dc(this),this.o=2,hc(this)):uc(this,this.Y-e)};var mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof gc){this.h=e.h,vc(this,e.j),this.s=e.s,this.g=e.g,bc(this,e.m),this.l=e.l;var t=e.i,n=new Dc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wc(this,n),this.o=e.o}else e&&(t=String(e).match(mc))?(this.h=!1,vc(this,t[1]||"",!0),this.s=xc(t[2]||""),this.g=xc(t[3]||"",!0),bc(this,t[4]),this.l=xc(t[5]||"",!0),wc(this,t[6]||"",!0),this.o=xc(t[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}function yc(e){return new gc(e)}function vc(e,t,n){e.j=n?xc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wc(e,t,n){t instanceof Dc?(e.i=t,function(e,t){t&&!e.j&&(Oc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rc(this,t),Fc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Sc(t,Ac)),e.i=new Dc(t,e.h))}function _c(e,t,n){e.i.set(t,n)}function Ec(e){return _c(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Sc(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,kc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function kc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Sc(t,Ic,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Sc(t,Ic,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Sc(n,"/"==n.charAt(0)?Cc:Tc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Sc(n,Nc)),e.join("")};var Ic=/[#\/\?@]/g,Tc=/[#\?:]/g,Cc=/[#\?]/g,Ac=/[#\?@]/g,Nc=/#/g;function Dc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Oc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rc(e,t){Oc(e),t=Mc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pc(e,t){return Oc(e),t=Mc(e,t),e.g.has(t)}function Fc(e,t,n){Rc(e,t),0<n.length&&(e.i=null,e.g.set(Mc(e,t),ml(n)),e.h+=n.length)}function Mc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Za=Dc.prototype).add=function(e,t){Oc(this),this.i=null,e=Mc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Za.forEach=function(e,t){Oc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Za.ta=function(){Oc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Za.Z=function(e){Oc(this);let t=[];if("string"==typeof e)Pc(this,e)&&(t=t.concat(this.g.get(Mc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Za.set=function(e,t){return Oc(this),this.i=null,Pc(this,e=Mc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Za.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Za.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Lc=class{constructor(e,t){this.g=e,this.map=t}};function jc(e){this.l=e||Vc,e=rl.PerformanceNavigationTiming?0<(e=rl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(rl.g&&rl.g.Ka&&rl.g.Ka()&&rl.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vc=10;function Uc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zc(e){return e.h?1:e.g?e.g.size:0}function Bc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function $c(e,t){e.g?e.g.add(t):e.h=t}function qc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ml(e.i)}jc.prototype.cancel=function(){if(this.i=Kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Hc=class{stringify(e){return rl.JSON.stringify(e,void 0)}parse(e){return rl.JSON.parse(e,void 0)}};function Gc(){this.g=new Hc}function Wc(e,t,n){const r=n||"";try{pc(e,(function(e,n){let i=e;sl(e)&&(i=hu(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Qc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Yc(e){this.l=e.fc||null,this.j=e.ob||!1}function Xc(e,t){lu.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Jc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dl(Yc,qu),Yc.prototype.g=function(){return new Xc(this.l,this.j)},Yc.prototype.i=function(e){return function(){return e}}({}),dl(Xc,lu);var Jc=0;function Zc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function eh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,th(e)}function th(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Za=Xc.prototype).open=function(e,t){if(this.readyState!=Jc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,th(this)},Za.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||rl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Za.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eh(this)),this.readyState=Jc},Za.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,th(this)),this.g&&(this.readyState=3,th(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==rl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Za.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?eh(this):th(this),3==this.readyState&&Zc(this)}},Za.Za=function(e){this.g&&(this.response=this.responseText=e,eh(this))},Za.Ya=function(e){this.g&&(this.response=e,eh(this))},Za.ka=function(){this.g&&eh(this)},Za.setRequestHeader=function(e,t){this.v.append(e,t)},Za.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Za.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nh=rl.JSON.parse;function rh(e){lu.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ih,this.L=this.M=!1}dl(rh,lu);var ih="",sh=/^https?$/i,oh=["POST","PUT"];function ah(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,lh(e),ch(e)}function lh(e){e.F||(e.F=!0,uu(e,"complete"),uu(e,"error"))}function uh(e){if(e.h&&void 0!==nl&&(!e.C[1]||4!=dh(e)||2!=e.da()))if(e.v&&4==dh(e))Su(e.La,0,e);else if(uu(e,"readystatechange"),4==dh(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(mc)[1]||null;!i&&rl.self&&rl.self.location&&(i=rl.self.location.protocol.slice(0,-1)),r=!sh.test(i?i.toLowerCase():"")}n=r}if(n)uu(e,"complete"),uu(e,"success");else{e.m=6;try{var s=2<dh(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",lh(e)}}finally{ch(e)}}}function ch(e,t){if(e.g){hh(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||uu(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function hh(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(rl.clearTimeout(e.A),e.A=null)}function dh(e){return e.g?e.g.readyState:0}function fh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ih:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ph(e){let t="";return $l(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function mh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ph(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):_c(e,t,n))}function gh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function yh(e){this.Ga=0,this.j=[],this.l=new Du,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gh("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gh("baseRetryDelayMs",5e3,e),this.hb=gh("retryDelaySeedMs",1e4,e),this.eb=gh("forwardChannelMaxRetries",2,e),this.xa=gh("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new jc(e&&e.concurrentRequestLimit),this.Ja=new Gc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function vh(e){if(wh(e),3==e.H){var t=e.W++,n=yc(e.I);if(_c(n,"SID",e.K),_c(n,"RID",t),_c(n,"TYPE","terminate"),xh(e,n),(t=new Ju(e,e.l,t)).L=2,t.v=Ec(yc(n)),n=!1,rl.navigator&&rl.navigator.sendBeacon)try{n=rl.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&rl.Image&&((new Image).src=t.v,n=!0),n||(t.g=Fh(t.l,null),t.g.ha(t.v)),t.G=Date.now(),lc(t)}Rh(e)}function bh(e){e.g&&(Th(e),e.g.cancel(),e.g=null)}function wh(e){bh(e),e.u&&(rl.clearTimeout(e.u),e.u=null),Ah(e),e.i.cancel(),e.m&&("number"==typeof e.m&&rl.clearTimeout(e.m),e.m=null)}function _h(e){if(!Uc(e.i)&&!e.m){e.m=!0;var t=e.Na;yu||wu(),vu||(yu(),vu=!0),bu.add(t,e),e.C=0}}function Eh(e,t){var n;n=t?t.m:e.W++;const r=yc(e.I);_c(r,"SID",e.K),_c(r,"RID",n),_c(r,"AID",e.V),xh(e,r),e.o&&e.s&&mh(r,e.o,e.s),n=new Ju(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Sh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),$c(e.i,n),rc(n,r,t)}function xh(e,t){e.na&&$l(e.na,(function(e,n){_c(t,n,e)})),e.h&&pc({},(function(e,n){_c(t,n,e)}))}function Sh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?cl(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Wc(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function kh(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;yu||wu(),vu||(yu(),vu=!0),bu.add(t,e),e.A=0}}function Ih(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=zu(cl(e.Ma,e),Dh(e,e.A)),e.A++,0))}function Th(e){null!=e.B&&(rl.clearTimeout(e.B),e.B=null)}function Ch(e){e.g=new Ju(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=yc(e.wa);_c(t,"RID","rpc"),_c(t,"SID",e.K),_c(t,"AID",e.V),_c(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&_c(t,"TO",e.qa),_c(t,"TYPE","xmlhttp"),xh(e,t),e.o&&e.s&&mh(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ec(yc(t)),n.s=null,n.S=!0,ic(n,e)}function Ah(e){null!=e.v&&(rl.clearTimeout(e.v),e.v=null)}function Nh(e,t){var n=null;if(e.g==t){Ah(e),Th(e),e.g=null;var r=2}else{if(!Bc(e.i,t))return;n=t.F,qc(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;uu(r=Fu(),new Uu(r,n)),_h(e)}else kh(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(zc(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=zu(cl(e.Na,e,t),Dh(e,e.C)),e.C++,0)))}(e,t)||2==r&&Ih(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Oh(e,5);break;case 4:Oh(e,10);break;case 3:Oh(e,6);break;default:Oh(e,2)}}function Dh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Oh(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=cl(e.pb,e);n||(n=new gc("//www.google.com/images/cleardot.gif"),rl.location&&"http"==rl.location.protocol||vc(n,"https"),Ec(n)),function(e,t){const n=new Du;if(rl.Image){const r=new Image;r.onload=hl(Qc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hl(Qc,n,r,"TestLoadImage: error",!1,t),r.onabort=hl(Qc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hl(Qc,n,r,"TestLoadImage: timeout",!1,t),rl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vu(2);e.H=0,e.h&&e.h.za(t),Rh(e),wh(e)}function Rh(e){if(e.H=0,e.ma=[],e.h){const t=Kc(e.i);0==t.length&&0==e.j.length||(gl(e.ma,t),gl(e.ma,e.j),e.i.i.length=0,ml(e.j),e.j.length=0),e.h.ya()}}function Ph(e,t,n){var r=n instanceof gc?yc(n):new gc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bc(r,r.m);else{var i=rl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new gc(null);r&&vc(s,r),t&&(s.g=t),i&&bc(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&_c(r,n,t),_c(r,"VER",e.ra),xh(e,r),r}function Fh(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new rh(new Yc({ob:!0})):new rh(e.va)).Oa(e.J),t}function Mh(){}function Lh(){if(Tl&&!(10<=Number(Ml)))throw Error("Environmental error: no available transport.")}function jh(e,t){lu.call(this),this.g=new yh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!bl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new zh(this)}function Vh(e){Qu.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Uh(){Yu.call(this),this.status=1}function zh(e){this.g=e}function Bh(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $h(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function qh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Za=rh.prototype).Oa=function(e){this.M=e},Za.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gu.g(),this.C=this.u?Ku(this.u):Ku(Gu),this.g.onreadystatechange=cl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void ah(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=rl.FormData&&e instanceof rl.FormData,!(0<=pl(oh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hh(this),0<this.B&&((this.L=function(e){return Tl&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cl(this.ua,this)):this.A=Su(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){ah(this,e)}},Za.ua=function(){void 0!==nl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,uu(this,"timeout"),this.abort(8))},Za.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,uu(this,"complete"),uu(this,"abort"),ch(this))},Za.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ch(this,!0)),rh.$.N.call(this)},Za.La=function(){this.s||(this.G||this.v||this.l?uh(this):this.kb())},Za.kb=function(){uh(this)},Za.isActive=function(){return!!this.g},Za.da=function(){try{return 2<dh(this)?this.g.status:-1}catch(e){return-1}},Za.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Za.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nh(t)}},Za.Ia=function(){return this.m},Za.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Za=yh.prototype).ra=8,Za.H=1,Za.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ju(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ql(s),Hl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Sh(this,i,t),_c(n=yc(this.I),"RID",e),_c(n,"CVER",22),this.F&&_c(n,"X-HTTP-Session-Id",this.F),xh(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ph(s)))+"&"+t:this.o&&mh(n,this.o,s)),$c(this.i,i),this.bb&&_c(n,"TYPE","init"),this.P?(_c(n,"$req",t),_c(n,"SID","null"),i.aa=!0,rc(i,n,null)):rc(i,n,t),this.H=2}}else 3==this.H&&(e?Eh(this,e):0==this.j.length||Uc(this.i)||Eh(this))},Za.Ma=function(){if(this.u=null,Ch(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zu(cl(this.jb,this),e)}},Za.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vu(10),bh(this),Ch(this))},Za.ib=function(){null!=this.v&&(this.v=null,bh(this),Ih(this),Vu(19))},Za.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Vu(2)):(this.l.info("Failed to ping google.com"),Vu(1))},Za.isActive=function(){return!!this.h&&this.h.isActive(this)},(Za=Mh.prototype).Ba=function(){},Za.Aa=function(){},Za.za=function(){},Za.ya=function(){},Za.isActive=function(){return!0},Za.Va=function(){},Lh.prototype.g=function(e,t){return new jh(e,t)},dl(jh,lu),jh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Vu(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ph(e,null,e.Y),_h(e)},jh.prototype.close=function(){vh(this.g)},jh.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=hu(e),e=n);t.j.push(new Lc(t.fb++,e)),3==t.H&&_h(t)},jh.prototype.N=function(){this.g.h=null,delete this.j,vh(this.g),delete this.g,jh.$.N.call(this)},dl(Vh,Qu),dl(Uh,Yu),dl(zh,Mh),zh.prototype.Ba=function(){uu(this.g,"a")},zh.prototype.Aa=function(e){uu(this.g,new Vh(e))},zh.prototype.za=function(e){uu(this.g,new Uh)},zh.prototype.ya=function(){uu(this.g,"b")},dl(Bh,(function(){this.blockSize=-1})),Bh.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bh.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)$h(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){$h(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){$h(this,r),i=0;break}}this.h=i,this.i+=t},Bh.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Kh={};function Hh(e){return-128<=e&&128>e?function(e,t){var n=Kh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new qh([0|e],0>e?-1:0)}(e)}(e):new qh([0|e],0>e?-1:0)}function Gh(e){if(isNaN(e)||!isFinite(e))return Qh;if(0>e)return ed(Gh(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Wh;return new qh(t,0)}var Wh=4294967296,Qh=Hh(0),Yh=Hh(1),Xh=Hh(16777216);function Jh(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zh(e){return-1==e.h}function ed(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new qh(n,~e.h).add(Yh)}function td(e,t){return e.add(ed(t))}function nd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function rd(e,t){this.g=e,this.h=t}function id(e,t){if(Jh(t))throw Error("division by zero");if(Jh(e))return new rd(Qh,Qh);if(Zh(e))return t=id(ed(e),t),new rd(ed(t.g),ed(t.h));if(Zh(t))return t=id(e,ed(t)),new rd(ed(t.g),t.h);if(30<e.g.length){if(Zh(e)||Zh(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Yh,r=t;0>=r.X(e);)n=sd(n),r=sd(r);var i=od(n,1),s=od(r,1);for(r=od(r,2),n=od(n,2);!Jh(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=od(r,1),n=od(n,1)}return t=td(e,i.R(t)),new rd(i,t)}for(i=Qh;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Gh(n)).R(t);Zh(o)||0<o.X(e);)o=(s=Gh(n-=r)).R(t);Jh(s)&&(s=Yh),i=i.add(s),e=td(e,o)}return new rd(i,e)}function sd(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new qh(n,e.h)}function od(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new qh(i,e.h)}(Za=qh.prototype).ea=function(){if(Zh(this))return-ed(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Wh+r)*t,t*=Wh}return e},Za.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Jh(this))return"0";if(Zh(this))return"-"+ed(this).toString(e);for(var t=Gh(Math.pow(e,6)),n=this,r="";;){var i=id(n,t).g,s=((0<(n=td(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Jh(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Za.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Za.X=function(e){return Zh(e=td(this,e))?-1:Jh(e)?0:1},Za.abs=function(){return Zh(this)?ed(this):this},Za.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new qh(n,-2147483648&n[n.length-1]?-1:0)},Za.R=function(e){if(Jh(this)||Jh(e))return Qh;if(Zh(this))return Zh(e)?ed(this).R(ed(e)):ed(ed(this).R(e));if(Zh(e))return ed(this.R(ed(e)));if(0>this.X(Xh)&&0>e.X(Xh))return Gh(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,nd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,nd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,nd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,nd(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new qh(n,0)},Za.gb=function(e){return id(this,e).h},Za.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new qh(n,this.h&e.h)},Za.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new qh(n,this.h|e.h)},Za.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new qh(n,this.h^e.h)},Lh.prototype.createWebChannel=Lh.prototype.g,jh.prototype.send=jh.prototype.u,jh.prototype.open=jh.prototype.m,jh.prototype.close=jh.prototype.close,Bu.NO_ERROR=0,Bu.TIMEOUT=8,Bu.HTTP_ERROR=6,$u.COMPLETE="complete",Hu.EventType=Wu,Wu.OPEN="a",Wu.CLOSE="b",Wu.ERROR="c",Wu.MESSAGE="d",lu.prototype.listen=lu.prototype.O,rh.prototype.listenOnce=rh.prototype.P,rh.prototype.getLastError=rh.prototype.Sa,rh.prototype.getLastErrorCode=rh.prototype.Ia,rh.prototype.getStatus=rh.prototype.da,rh.prototype.getResponseJson=rh.prototype.Wa,rh.prototype.getResponseText=rh.prototype.ja,rh.prototype.send=rh.prototype.ha,rh.prototype.setWithCredentials=rh.prototype.Oa,Bh.prototype.digest=Bh.prototype.l,Bh.prototype.reset=Bh.prototype.reset,Bh.prototype.update=Bh.prototype.j,qh.prototype.add=qh.prototype.add,qh.prototype.multiply=qh.prototype.R,qh.prototype.modulo=qh.prototype.gb,qh.prototype.compare=qh.prototype.X,qh.prototype.toNumber=qh.prototype.ea,qh.prototype.toString=qh.prototype.toString,qh.prototype.getBits=qh.prototype.D,qh.fromNumber=Gh,qh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ed(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Gh(Math.pow(n,8)),i=Qh,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Gh(Math.pow(n,o)),i=i.R(o).add(Gh(a))):i=(i=i.R(r)).add(Gh(a))}return i};var ad=tl.createWebChannelTransport=function(){return new Lh},ld=tl.getStatEventTarget=function(){return Fu()},ud=tl.ErrorCode=Bu,cd=tl.EventType=$u,hd=tl.Event=Ru,dd=tl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fd=tl.FetchXmlHttpFactory=Yc,pd=tl.WebChannel=Hu,md=tl.XhrIo=rh,gd=tl.Md5=Bh,yd=tl.Integer=qh;const vd="@firebase/firestore";class bd{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bd.UNAUTHENTICATED=new bd(null),bd.GOOGLE_CREDENTIALS=new bd("google-credentials-uid"),bd.FIRST_PARTY=new bd("first-party-uid"),bd.MOCK_USER=new bd("mock-user");let wd="9.23.0";const _d=new nt("@firebase/firestore");function Ed(){return _d.logLevel}function xd(e,...t){if(_d.logLevel<=Xe.DEBUG){const n=t.map(Id);_d.debug(`Firestore (${wd}): ${e}`,...n)}}function Sd(e,...t){if(_d.logLevel<=Xe.ERROR){const n=t.map(Id);_d.error(`Firestore (${wd}): ${e}`,...n)}}function kd(e,...t){if(_d.logLevel<=Xe.WARN){const n=t.map(Id);_d.warn(`Firestore (${wd}): ${e}`,...n)}}function Id(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Td(e="Unexpected state"){const t=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+e;throw Sd(t),new Error(t)}function Cd(e,t){e||Td()}function Ad(e,t){return e}const Nd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dd extends Fe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Od{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Rd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bd.UNAUTHENTICATED)))}shutdown(){}}class Fd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Md{constructor(e){this.t=e,this.currentUser=bd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Od;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Od,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{xd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xd("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Od)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(xd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Cd("string"==typeof t.accessToken),new Rd(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Cd(null===e||"string"==typeof e),new bd(e)}}class Ld{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=bd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class jd{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ld(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(bd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ud{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&xd("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,xd("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{xd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):xd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Cd("string"==typeof e.token),this.T=e.token,new Vd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Bd{static A(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=zd(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function $d(e,t){return e<t?-1:e>t?1:0}function qd(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Kd(e){return e+"\0"}class Hd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dd(Nd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dd(Nd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dd(Nd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dd(Nd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hd.fromMillis(Date.now())}static fromDate(e){return Hd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Hd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$d(this.nanoseconds,e.nanoseconds):$d(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gd(e)}static min(){return new Gd(new Hd(0,0))}static max(){return new Gd(new Hd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Td(),void 0===n?n=e.length-t:n>e.length-t&&Td(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wd?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qd extends Wd{construct(e,t,n){return new Qd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Dd(Nd.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Qd(t)}static emptyPath(){return new Qd([])}}const Yd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xd extends Wd{construct(e,t,n){return new Xd(e,t,n)}static isValidIdentifier(e){return Yd.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Dd(Nd.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Dd(Nd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Dd(Nd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Dd(Nd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xd(t)}static emptyPath(){return new Xd([])}}class Jd{constructor(e){this.path=e}static fromPath(e){return new Jd(Qd.fromString(e))}static fromName(e){return new Jd(Qd.fromString(e).popFirst(5))}static empty(){return new Jd(Qd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jd(new Qd(e.slice()))}}class Zd{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ef(e){return e.fields.find((e=>2===e.kind))}function tf(e){return e.fields.filter((e=>2!==e.kind))}Zd.UNKNOWN_ID=-1;class nf{constructor(e,t){this.fieldPath=e,this.kind=t}}class rf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rf(0,of.min())}}function sf(e){return new of(e.readTime,e.key,-1)}class of{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new of(Gd.min(),Jd.empty(),-1)}static max(){return new of(Gd.max(),Jd.empty(),-1)}}function af(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Jd.comparator(e.documentKey,t.documentKey),0!==n?n:$d(e.largestBatchId,t.largestBatchId))}const lf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function cf(e){if(e.code!==Nd.FAILED_PRECONDITION||e.message!==lf)throw e;xd("LocalStore","Unexpectedly lost primary lease")}class hf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Td(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new hf(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof hf?t:hf.resolve(t)}catch(e){return hf.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):hf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):hf.reject(t)}static resolve(e){return new hf(((t,n)=>{t(e)}))}static reject(e){return new hf(((t,n)=>{n(e)}))}static waitFor(e){return new hf(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=hf.resolve(!1);for(const n of e)t=t.next((e=>e?hf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new hf(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new hf(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class df{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Od,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new mf(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=wf(t.target.error);this.v.reject(new mf(e,n))}}static open(e,t,n,r){try{return new df(t,e.transaction(r,n))}catch(e){throw new mf(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yf(t)}}class ff{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===ff.S(Re())&&Sd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xd("SimpleDb","Removing database:",e),vf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pe())return!1;if(ff.C())return!0;const e=Re(),t=ff.S(e),n=0<t&&t<10,r=ff.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(xd("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Dd(Nd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Dd(Nd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new mf(e,r))},r.onupgradeneeded=e=>{xd("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{xd("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=df.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),hf.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(xd("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class pf{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vf(this.L.delete())}}class mf extends Dd{constructor(e,t){super(Nd.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gf(e){return"IndexedDbTransactionError"===e.name}class yf{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(xd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(xd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vf(n)}add(e){return xd("SimpleDb","ADD",this.store.name,e,e),vf(this.store.add(e))}get(e){return vf(this.store.get(e)).next((t=>(void 0===t&&(t=null),xd("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return xd("SimpleDb","DELETE",this.store.name,e),vf(this.store.delete(e))}count(){return xd("SimpleDb","COUNT",this.store.name),vf(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new hf(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new hf(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){xd("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new hf(((n,r)=>{t.onerror=e=>{const t=wf(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new hf(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new pf(i),o=t(i.primaryKey,i.value,s);if(o instanceof hf){const e=o.catch((e=>(s.done(),hf.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>hf.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vf(e){return new hf(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=wf(e.target.error);n(t)}}))}let bf=!1;function wf(e){const t=ff.S(Re());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Dd("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bf||(bf=!0,setTimeout((()=>{throw e}),0)),e}}return e}class _f{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){xd("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{xd("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(e){gf(e)?xd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await cf(e)}await this.et(6e4)}))}}class Ef{constructor(e,t){this.localStore=e,this.persistence=t}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return hf.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return xd("IndexBackiller",`Processing collection: ${t}`),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(xd("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=sf(t);af(r,n)>0&&(n=r)})),new of(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Sf(e){return null==e}function kf(e){return 0===e&&1/e==-1/0}function If(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Cf(t)),t=Tf(e.get(n),t);return Cf(t)}function Tf(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Cf(e){return e+""}function Af(e){const t=e.length;if(Cd(t>=2),2===t)return Cd(""===e.charAt(0)&&""===e.charAt(1)),Qd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&Td(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:Td()}s=t+2}return new Qd(r)}xf.ct=-1;const Nf=["userId","batchId"];function Df(e,t){return[e,If(t)]}function Of(e,t,n){return[e,If(t),n]}const Rf={},Pf=["prefixPath","collectionGroup","readTime","documentId"],Ff=["prefixPath","collectionGroup","documentId"],Mf=["collectionGroup","readTime","prefixPath","documentId"],Lf=["canonicalId","targetId"],jf=["targetId","path"],Vf=["path","targetId"],Uf=["collectionId","parent"],zf=["indexId","uid"],Bf=["uid","sequenceNumber"],$f=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qf=["indexId","uid","orderedDocumentKey"],Kf=["userId","collectionPath","documentId"],Hf=["userId","collectionPath","largestBatchId"],Gf=["userId","collectionGroup","largestBatchId"],Wf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qf=[...Wf,"documentOverlays"],Yf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xf=Yf,Jf=[...Xf,"indexConfiguration","indexState","indexEntries"];class Zf extends uf{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ep(e,t){const n=Ad(e);return ff.M(n.ht,t)}function tp(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function np(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ip{constructor(e,t){this.comparator=e,this.root=t||op.EMPTY}insert(e,t){return new ip(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,op.BLACK,null,null))}remove(e){return new ip(this.comparator,this.root.remove(e,this.comparator).copy(null,null,op.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sp(this.root,e,this.comparator,!0)}}class sp{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class op{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:op.RED,this.left=null!=r?r:op.EMPTY,this.right=null!=i?i:op.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new op(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return op.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return op.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,op.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,op.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Td();if(this.right.isRed())throw Td();const e=this.left.check();if(e!==this.right.check())throw Td();return e+(this.isRed()?0:1)}}op.EMPTY=null,op.RED=!0,op.BLACK=!1,op.EMPTY=new class{constructor(){this.size=0}get key(){throw Td()}get value(){throw Td()}get color(){throw Td()}get left(){throw Td()}get right(){throw Td()}copy(e,t,n,r,i){return this}insert(e,t,n){return new op(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ap{constructor(e){this.comparator=e,this.data=new ip(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lp(this.data.getIterator())}getIteratorFrom(e){return new lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ap))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ap(this.comparator);return t.data=e,t}}class lp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function up(e){return e.hasNext()?e.getNext():void 0}class cp{constructor(e){this.fields=e,e.sort(Xd.comparator)}static empty(){return new cp([])}unionWith(e){let t=new ap(Xd.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new cp(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qd(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class hp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hp("Invalid base64 string: "+e):e}}(e);return new dp(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $d(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dp.EMPTY_BYTE_STRING=new dp("");const fp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pp(e){if(Cd(!!e),"string"==typeof e){let t=0;const n=fp.exec(e);if(Cd(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mp(e.seconds),nanos:mp(e.nanos)}}function mp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gp(e){return"string"==typeof e?dp.fromBase64String(e):dp.fromUint8Array(e)}function yp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vp(e){const t=e.mapValue.fields.__previous_value__;return yp(t)?vp(t):t}function bp(e){const t=pp(e.mapValue.fields.__local_write_time__.timestampValue);return new Hd(t.seconds,t.nanos)}class wp{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class _p{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _p("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _p&&e.projectId===this.projectId&&e.database===this.database}}const Ep={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xp={nullValue:"NULL_VALUE"};function Sp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yp(e)?4:jp(e)?9007199254740991:10:Td()}function kp(e,t){if(e===t)return!0;const n=Sp(e);if(n!==Sp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bp(e).isEqual(bp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pp(e.timestampValue),r=pp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gp(e.bytesValue).isEqual(gp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mp(e.geoPointValue.latitude)===mp(t.geoPointValue.latitude)&&mp(e.geoPointValue.longitude)===mp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mp(e.integerValue)===mp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mp(e.doubleValue),r=mp(t.doubleValue);return n===r?kf(n)===kf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qd(e.arrayValue.values||[],t.arrayValue.values||[],kp);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tp(n)!==tp(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!kp(n[e],r[e])))return!1;return!0}(e,t);default:return Td()}}function Ip(e,t){return void 0!==(e.values||[]).find((e=>kp(e,t)))}function Tp(e,t){if(e===t)return 0;const n=Sp(e),r=Sp(t);if(n!==r)return $d(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $d(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mp(e.integerValue||e.doubleValue),r=mp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Cp(e.timestampValue,t.timestampValue);case 4:return Cp(bp(e),bp(t));case 5:return $d(e.stringValue,t.stringValue);case 6:return function(e,t){const n=gp(e),r=gp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=$d(n[e],r[e]);if(0!==t)return t}return $d(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$d(mp(e.latitude),mp(t.latitude));return 0!==n?n:$d(mp(e.longitude),mp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Tp(n[e],r[e]);if(t)return t}return $d(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ep.mapValue&&t===Ep.mapValue)return 0;if(e===Ep.mapValue)return 1;if(t===Ep.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=$d(r[e],s[e]);if(0!==t)return t;const o=Tp(n[r[e]],i[s[e]]);if(0!==o)return o}return $d(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Td()}}function Cp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $d(e,t);const n=pp(e),r=pp(t),i=$d(n.seconds,r.seconds);return 0!==i?i:$d(n.nanos,r.nanos)}function Ap(e){return Np(e)}function Np(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pp(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jd.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Np(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Np(e.fields[i])}`;return n+"}"}(e.mapValue):Td();var t,n}function Dp(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Op(e){return!!e&&"integerValue"in e}function Rp(e){return!!e&&"arrayValue"in e}function Pp(e){return!!e&&"nullValue"in e}function Fp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mp(e){return!!e&&"mapValue"in e}function Lp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return np(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Lp(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function jp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vp(e){return"nullValue"in e?xp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Dp(_p.empty(),Jd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Td()}function Up(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Dp(_p.empty(),Jd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ep:Td()}function zp(e,t){const n=Tp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Bp(e,t){const n=Tp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class $p{constructor(e){this.value=e}static empty(){return new $p({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(t)}setAll(e){let t=Xd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Lp(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){np(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new $p(Lp(this.value))}}function qp(e){const t=[];return np(e.fields,((e,n)=>{const r=new Xd([e]);if(Mp(n)){const e=qp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new cp(t)}class Kp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Kp(e,0,Gd.min(),Gd.min(),Gd.min(),$p.empty(),0)}static newFoundDocument(e,t,n,r){return new Kp(e,1,t,Gd.min(),n,r,0)}static newNoDocument(e,t){return new Kp(e,2,t,Gd.min(),Gd.min(),$p.empty(),0)}static newUnknownDocument(e,t){return new Kp(e,3,t,Gd.min(),Gd.min(),$p.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$p.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$p.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hp{constructor(e,t){this.position=e,this.inclusive=t}}function Gp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Jd.comparator(Jd.fromName(o.referenceValue),n.key):Tp(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Wp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!kp(e.position[n],t.position[n]))return!1;return!0}class Qp{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Xp{}class Jp extends Xp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new lm(e,t,n):"array-contains"===t?new dm(e,n):"in"===t?new fm(e,n):"not-in"===t?new pm(e,n):"array-contains-any"===t?new mm(e,n):new Jp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new um(e,n):new cm(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tp(t,this.value)):null!==t&&Sp(this.value)===Sp(t)&&this.matchesComparison(Tp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Td()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Zp extends Xp{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Zp(e,t)}matches(e){return em(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function em(e){return"and"===e.op}function tm(e){return"or"===e.op}function nm(e){return rm(e)&&em(e)}function rm(e){for(const t of e.filters)if(t instanceof Zp)return!1;return!0}function im(e){if(e instanceof Jp)return e.field.canonicalString()+e.op.toString()+Ap(e.value);if(nm(e))return e.filters.map((e=>im(e))).join(",");{const t=e.filters.map((e=>im(e))).join(",");return`${e.op}(${t})`}}function sm(e,t){return e instanceof Jp?function(e,t){return t instanceof Jp&&e.op===t.op&&e.field.isEqual(t.field)&&kp(e.value,t.value)}(e,t):e instanceof Zp?function(e,t){return t instanceof Zp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&sm(n,t.filters[r])),!0)}(e,t):void Td()}function om(e,t){const n=e.filters.concat(t);return Zp.create(n,e.op)}function am(e){return e instanceof Jp?function(e){return`${e.field.canonicalString()} ${e.op} ${Ap(e.value)}`}(e):e instanceof Zp?function(e){return e.op.toString()+" {"+e.getFilters().map(am).join(" ,")+"}"}(e):"Filter"}class lm extends Jp{constructor(e,t,n){super(e,t,n),this.key=Jd.fromName(n.referenceValue)}matches(e){const t=Jd.comparator(e.key,this.key);return this.matchesComparison(t)}}class um extends Jp{constructor(e,t){super(e,"in",t),this.keys=hm(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cm extends Jp{constructor(e,t){super(e,"not-in",t),this.keys=hm(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Jd.fromName(e.referenceValue)))}class dm extends Jp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rp(t)&&Ip(t.arrayValue,this.value)}}class fm extends Jp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ip(this.value.arrayValue,t)}}class pm extends Jp{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ip(this.value.arrayValue,t)}}class mm extends Jp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ip(this.value.arrayValue,e)))}}class gm{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function ym(e,t=null,n=[],r=[],i=null,s=null,o=null){return new gm(e,t,n,r,i,s,o)}function vm(e){const t=Ad(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>im(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Sf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ap(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ap(e))).join(",")),t.dt=e}return t.dt}function bm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Wp(e.startAt,t.startAt)&&Wp(e.endAt,t.endAt)}function wm(e){return Jd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function _m(e,t){return e.filters.filter((e=>e instanceof Jp&&e.field.isEqual(t)))}function Em(e,t,n){let r=xp,i=!0;for(const n of _m(e,t)){let e=xp,t=!0;switch(n.op){case"<":case"<=":e=Vp(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=xp}zp({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];zp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function xm(e,t,n){let r=Ep,i=!0;for(const n of _m(e,t)){let e=Ep,t=!0;switch(n.op){case">=":case">":e=Up(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=Ep}Bp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Bp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Sm{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function km(e){return new Sm(e)}function Im(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Tm(e){const t=Ad(e);if(null===t.wt){t.wt=[];const e=function(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}(t),n=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Qp(e)),t.wt.push(new Qp(Xd.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Qp(Xd.keyField(),e))}}}return t.wt}function Cm(e){const t=Ad(e);if(!t._t)if("F"===t.limitType)t._t=ym(t.path,t.collectionGroup,Tm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Tm(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Qp(n.field,t))}const n=t.endAt?new Hp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hp(t.startAt.position,t.startAt.inclusive):null;t._t=ym(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Am(e,t,n){return new Sm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nm(e,t){return bm(Cm(e),Cm(t))&&e.limitType===t.limitType}function Dm(e){return`${vm(Cm(e))}|lt:${e.limitType}`}function Om(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>am(e))).join(", ")}]`),Sf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ap(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ap(e))).join(",")),`Target(${t})`}(Cm(e))}; limitType=${e.limitType})`}function Rm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Tm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Gp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Tm(e),t)||e.endAt&&!function(e,t,n){const r=Gp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Tm(e),t))}(e,t)}function Pm(e){return(t,n)=>{let r=!1;for(const i of Tm(e)){const e=Fm(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Fm(e,t,n){const r=e.field.isKeyField()?Jd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tp(r,i):Td()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Td()}}class Mm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){np(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return rp(this.inner)}size(){return this.innerSize}}const Lm=new ip(Jd.comparator);function jm(){return Lm}const Vm=new ip(Jd.comparator);function Um(...e){let t=Vm;for(const n of e)t=t.insert(n.key,n);return t}function zm(e){let t=Vm;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Bm(){return qm()}function $m(){return qm()}function qm(){return new Mm((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Km=new ip(Jd.comparator),Hm=new ap(Jd.comparator);function Gm(...e){let t=Hm;for(const n of e)t=t.add(n);return t}const Wm=new ap($d);function Qm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(t)?"-0":t}}function Ym(e){return{integerValue:""+e}}function Xm(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!kf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Ym(t):Qm(e,t)}class Jm{constructor(){this._=void 0}}function Zm(e,t,n){return e instanceof ng?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yp(t)&&(t=vp(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rg?ig(e,t):e instanceof sg?og(e,t):function(e,t){const n=tg(e,t),r=lg(n)+lg(e.gt);return Op(n)&&Op(e.gt)?Ym(r):Qm(e.serializer,r)}(e,t)}function eg(e,t,n){return e instanceof rg?ig(e,t):e instanceof sg?og(e,t):n}function tg(e,t){return e instanceof ag?Op(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ng extends Jm{}class rg extends Jm{constructor(e){super(),this.elements=e}}function ig(e,t){const n=ug(t);for(const t of e.elements)n.some((e=>kp(e,t)))||n.push(t);return{arrayValue:{values:n}}}class sg extends Jm{constructor(e){super(),this.elements=e}}function og(e,t){let n=ug(t);for(const t of e.elements)n=n.filter((e=>!kp(e,t)));return{arrayValue:{values:n}}}class ag extends Jm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function lg(e){return mp(e.integerValue||e.doubleValue)}function ug(e){return Rp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cg{constructor(e,t){this.field=e,this.transform=t}}class hg{constructor(e,t){this.version=e,this.transformResults=t}}class dg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dg}static exists(e){return new dg(void 0,e)}static updateTime(e){return new dg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class pg{}function mg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kg(e.key,dg.none()):new wg(e.key,e.data,dg.none());{const n=e.data,r=$p.empty();let i=new ap(Xd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new _g(e.key,r,new cp(i.toArray()),dg.none())}}function gg(e,t,n){e instanceof wg?function(e,t,n){const r=e.value.clone(),i=xg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _g?function(e,t,n){if(!fg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Eg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function yg(e,t,n,r){return e instanceof wg?function(e,t,n,r){if(!fg(e.precondition,t))return n;const i=e.value.clone(),s=Sg(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _g?function(e,t,n,r){if(!fg(e.precondition,t))return n;const i=Sg(e.fieldTransforms,r,t),s=t.data;return s.setAll(Eg(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return fg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=tg(r.transform,e||null);null!=i&&(null===n&&(n=$p.empty()),n.set(r.field,i))}return n||null}function bg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qd(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rg&&t instanceof rg||e instanceof sg&&t instanceof sg?qd(e.elements,t.elements,kp):e instanceof ag&&t instanceof ag?kp(e.gt,t.gt):e instanceof ng&&t instanceof ng}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wg extends pg{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _g extends pg{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Eg(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function xg(e,t,n){const r=new Map;Cd(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,eg(o,a,n[i]))}return r}function Sg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Zm(e,s,t))}return r}class kg extends pg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ig extends pg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&gg(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=yg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=yg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$m();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=mg(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Gd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gm())}isEqual(e){return this.batchId===e.batchId&&qd(this.mutations,e.mutations,((e,t)=>bg(e,t)))&&qd(this.baseMutations,e.baseMutations,((e,t)=>bg(e,t)))}}class Cg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Cd(e.mutations.length===n.length);let r=Km;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Cg(e,t,n,r)}}class Ag{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ng{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dg,Og;function Rg(e){if(void 0===e)return Sd("GRPC error has no .code"),Nd.UNKNOWN;switch(e){case Dg.OK:return Nd.OK;case Dg.CANCELLED:return Nd.CANCELLED;case Dg.UNKNOWN:return Nd.UNKNOWN;case Dg.DEADLINE_EXCEEDED:return Nd.DEADLINE_EXCEEDED;case Dg.RESOURCE_EXHAUSTED:return Nd.RESOURCE_EXHAUSTED;case Dg.INTERNAL:return Nd.INTERNAL;case Dg.UNAVAILABLE:return Nd.UNAVAILABLE;case Dg.UNAUTHENTICATED:return Nd.UNAUTHENTICATED;case Dg.INVALID_ARGUMENT:return Nd.INVALID_ARGUMENT;case Dg.NOT_FOUND:return Nd.NOT_FOUND;case Dg.ALREADY_EXISTS:return Nd.ALREADY_EXISTS;case Dg.PERMISSION_DENIED:return Nd.PERMISSION_DENIED;case Dg.FAILED_PRECONDITION:return Nd.FAILED_PRECONDITION;case Dg.ABORTED:return Nd.ABORTED;case Dg.OUT_OF_RANGE:return Nd.OUT_OF_RANGE;case Dg.UNIMPLEMENTED:return Nd.UNIMPLEMENTED;case Dg.DATA_LOSS:return Nd.DATA_LOSS;default:return Td()}}(Og=Dg||(Dg={}))[Og.OK=0]="OK",Og[Og.CANCELLED=1]="CANCELLED",Og[Og.UNKNOWN=2]="UNKNOWN",Og[Og.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Og[Og.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Og[Og.NOT_FOUND=5]="NOT_FOUND",Og[Og.ALREADY_EXISTS=6]="ALREADY_EXISTS",Og[Og.PERMISSION_DENIED=7]="PERMISSION_DENIED",Og[Og.UNAUTHENTICATED=16]="UNAUTHENTICATED",Og[Og.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Og[Og.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Og[Og.ABORTED=10]="ABORTED",Og[Og.OUT_OF_RANGE=11]="OUT_OF_RANGE",Og[Og.UNIMPLEMENTED=12]="UNIMPLEMENTED",Og[Og.INTERNAL=13]="INTERNAL",Og[Og.UNAVAILABLE=14]="UNAVAILABLE",Og[Og.DATA_LOSS=15]="DATA_LOSS";class Pg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Fg}static getOrCreateInstance(){return null===Fg&&(Fg=new Pg),Fg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Fg=null;const Mg=new yd([4294967295,4294967295],0);function Lg(e){const t=(new TextEncoder).encode(e),n=new gd;return n.update(t),new Uint8Array(n.digest())}function jg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new yd([n,r],0),new yd([i,s],0)]}class Vg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ug(`Invalid padding: ${t}`);if(n<0)throw new Ug(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Ug(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Ug(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=yd.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(yd.fromNumber(n)));return 1===r.compare(Mg)&&(r=new yd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Lg(e),[n,r]=jg(t);for(let e=0;e<this.hashCount;e++){const t=this.Et(n,r,e);if(!this.At(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Vg(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Lg(e),[n,r]=jg(t);for(let e=0;e<this.hashCount;e++){const t=this.Et(n,r,e);this.Rt(t)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ug extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Bg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zg(Gd.min(),r,new ip($d),jm(),Gm())}}class Bg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bg(n,t,Gm(),Gm(),Gm())}}class $g{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class qg{constructor(e,t){this.targetId=e,this.Vt=t}}class Kg{constructor(e,t,n=dp.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Hg{constructor(){this.St=0,this.Dt=Qg(),this.Ct=dp.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gm(),t=Gm(),n=Gm();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Td()}})),new Bg(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Qg()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Gg{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=jm(),this.zt=Wg(),this.Wt=new ip($d)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Td()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(wm(s))if(0===r){const e=new Jd(s.path);this.Yt(n,e,Kp.newNoDocument(e,Gd.min()))}else Cd(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Pg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=gp(i).toUint8Array()}catch(e){if(e instanceof hp)return kd("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Vg(a,s,o)}catch(e){return kd(e instanceof Ug?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&wm(i.target)){const t=new Jd(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Kp.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Gm();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new zg(e,t,this.Wt,this.jt,n);return this.jt=jm(),this.zt=Wg(),this.Wt=new ip($d),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Hg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ap($d),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xd("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Hg),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Wg(){return new ip(Jd.comparator)}function Qg(){return new ip(Jd.comparator)}const Yg={asc:"ASCENDING",desc:"DESCENDING"},Xg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jg={and:"AND",or:"OR"};class Zg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ey(e,t){return e.useProto3Json||Sf(t)?t:{value:t}}function ty(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ny(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ry(e,t){return ty(e,t.toTimestamp())}function iy(e){return Cd(!!e),Gd.fromTimestamp(function(e){const t=pp(e);return new Hd(t.seconds,t.nanos)}(e))}function sy(e,t){return function(e){return new Qd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function oy(e){const t=Qd.fromString(e);return Cd(Ty(t)),t}function ay(e,t){return sy(e.databaseId,t.path)}function ly(e,t){const n=oy(t);if(n.get(1)!==e.databaseId.projectId)throw new Dd(Nd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Dd(Nd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jd(dy(n))}function uy(e,t){return sy(e.databaseId,t)}function cy(e){const t=oy(e);return 4===t.length?Qd.emptyPath():dy(t)}function hy(e){return new Qd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dy(e){return Cd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function fy(e,t,n){return{name:ay(e,t),fields:n.value.mapValue.fields}}function py(e,t){let n;if(t instanceof wg)n={update:fy(e,t.key,t.value)};else if(t instanceof kg)n={delete:ay(e,t.key)};else if(t instanceof _g)n={update:fy(e,t.key,t.data),updateMask:Iy(t.fieldMask)};else{if(!(t instanceof Ig))return Td();n={verify:ay(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ng)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ag)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Td()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ry(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Td()}(e,t.precondition)),n}function my(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?dg.updateTime(iy(e.updateTime)):void 0!==e.exists?dg.exists(e.exists):dg.none()}(t.currentDocument):dg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Cd("REQUEST_TIME"===t.setToServerValue),n=new ng;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new rg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new sg(e)}else"increment"in t?n=new ag(e,t.increment):Td();const r=Xd.fromServerFormat(t.fieldPath);return new cg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=ly(e,t.update.name),s=new $p({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new cp(t.map((e=>Xd.fromServerFormat(e))))}(t.updateMask);return new _g(i,s,e,n,r)}return new wg(i,s,n,r)}if(t.delete){const r=ly(e,t.delete);return new kg(r,n)}if(t.verify){const r=ly(e,t.verify);return new Ig(r,n)}return Td()}function gy(e,t){return{documents:[uy(e,t.path)]}}function yy(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=uy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=uy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return ky(Zp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:xy(e.field),direction:wy(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ey(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function vy(e){let t=cy(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Cd(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=by(e);return t instanceof Zp&&nm(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Qp(Sy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Sf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hp(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Hp(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new Sm(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,u)}function by(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sy(e.unaryFilter.field);return Jp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sy(e.unaryFilter.field);return Jp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sy(e.unaryFilter.field);return Jp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Sy(e.unaryFilter.field);return Jp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Td()}}(e):void 0!==e.fieldFilter?function(e){return Jp.create(Sy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Td()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zp.create(e.compositeFilter.filters.map((e=>by(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Td()}}(e.compositeFilter.op))}(e):Td()}function wy(e){return Yg[e]}function _y(e){return Xg[e]}function Ey(e){return Jg[e]}function xy(e){return{fieldPath:e.canonicalString()}}function Sy(e){return Xd.fromServerFormat(e.fieldPath)}function ky(e){return e instanceof Jp?function(e){if("=="===e.op){if(Fp(e.value))return{unaryFilter:{field:xy(e.field),op:"IS_NAN"}};if(Pp(e.value))return{unaryFilter:{field:xy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fp(e.value))return{unaryFilter:{field:xy(e.field),op:"IS_NOT_NAN"}};if(Pp(e.value))return{unaryFilter:{field:xy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xy(e.field),op:_y(e.op),value:e.value}}}(e):e instanceof Zp?function(e){const t=e.getFilters().map((e=>ky(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ey(e.op),filters:t}}}(e):Td()}function Iy(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ty(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Cy{constructor(e,t,n,r,i=Gd.min(),s=Gd.min(),o=dp.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Cy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ay{constructor(e){this.fe=e}}function Ny(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ay(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ty(e,t.version.toTimestamp()),createTime:ty(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Oy(t.version)};else{if(!t.isUnknownDocument())return Td();r.unknownDocument={path:n.path.toArray(),version:Oy(t.version)}}return r}function Dy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Oy(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ry(e){const t=new Hd(e.seconds,e.nanoseconds);return Gd.fromTimestamp(t)}function Py(e,t){const n=(t.baseMutations||[]).map((t=>my(e.fe,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>my(e.fe,t))),i=Hd.fromMillis(t.localWriteTimeMs);return new Tg(t.batchId,i,n,r)}function Fy(e){const t=Ry(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ry(e.lastLimboFreeSnapshotVersion):Gd.min();let r;var i;return void 0!==e.query.documents?(Cd(1===(i=e.query).documents.length),r=Cm(km(cy(i.documents[0])))):r=function(e){return Cm(vy(e))}(e.query),new Cy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,dp.fromBase64String(e.resumeToken))}function My(e,t){const n=Oy(t.snapshotVersion),r=Oy(t.lastLimboFreeSnapshotVersion);let i;i=wm(t.target)?gy(e.fe,t.target):yy(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:vm(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ly(e){const t=vy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Am(t,t.limit,"L"):t}function jy(e,t){return new Ag(t.largestBatchId,my(e.fe,t.overlayMutation))}function Vy(e,t){const n=t.path.lastSegment();return[e,If(t.path.popLast()),n]}function Uy(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Oy(r.readTime),documentKey:If(r.documentKey.path),largestBatchId:r.largestBatchId}}class zy{getBundleMetadata(e,t){return By(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Ry(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return By(e).put({bundleId:(n=t).id,createTime:Oy(iy(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return $y(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Ly(t.bundledQuery),readTime:Ry(t.readTime)};var t}))}saveNamedQuery(e,t){return $y(e).put(function(e){return{name:e.name,readTime:Oy(iy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function By(e){return ep(e,"bundles")}function $y(e){return ep(e,"namedQueries")}class qy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new qy(e,n)}getOverlay(e,t){return Ky(e).get(Vy(this.userId,t)).next((e=>e?jy(this.serializer,e):null))}getOverlays(e,t){const n=Bm();return hf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ag(t,i);r.push(this.we(e,s))})),hf.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(If(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Ky(e).J("collectionPathOverlayIndex",r))})),hf.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Bm(),i=If(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ky(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=jy(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Bm();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ky(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=jy(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return Ky(e).put(function(e,t,n){const[r,i,s]=Vy(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:py(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Ky(e){return ep(e,"documentOverlays")}class Hy{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mp(e.integerValue));else if("doubleValue"in e){const n=mp(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),kf(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(gp(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?jp(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Td()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const e of Object.keys(n))this.Te(e,t),this.me(n[e],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const e of n)this.me(e,t)}ve(e,t){this.ye(t,37),Jd.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Gy(e){if(0===e)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function Wy(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Gy(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Hy.Ve=new Hy;class Qy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Wy(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Le(e){const t=this.Fe(e),n=Wy(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Yy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Xy{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Jy{constructor(){this.je=new Qy,this.ze=new Yy(this.je),this.We=new Xy(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Zy{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Zy(this.indexId,this.documentKey,this.arrayValue,n)}}function ev(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=tv(e.arrayValue,t.arrayValue),0!==n?n:(n=tv(e.directionalValue,t.directionalValue),0!==n?n:Jd.comparator(e.documentKey,t.documentKey)))}function tv(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class nv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Cd(e.collectionGroup===this.collectionId);const t=ef(e);if(void 0!==t&&!this.en(t))return!1;const n=tf(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rv(e){var t,n;if(Cd(e instanceof Jp||e instanceof Zp),e instanceof Jp){if(e instanceof fm){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Jp.create(e.field,"==",t))))||[];return Zp.create(r,"or")}return e}const r=e.filters.map((e=>rv(e)));return Zp.create(r,e.op)}function iv(e){if(0===e.getFilters().length)return[];const t=lv(rv(e));return Cd(av(t)),sv(t)||ov(t)?[t]:t.getFilters()}function sv(e){return e instanceof Jp}function ov(e){return e instanceof Zp&&nm(e)}function av(e){return sv(e)||ov(e)||function(e){if(e instanceof Zp&&tm(e)){for(const t of e.getFilters())if(!sv(t)&&!ov(t))return!1;return!0}return!1}(e)}function lv(e){if(Cd(e instanceof Jp||e instanceof Zp),e instanceof Jp)return e;if(1===e.filters.length)return lv(e.filters[0]);const t=e.filters.map((e=>lv(e)));let n=Zp.create(t,e.op);return n=hv(n),av(n)?n:(Cd(n instanceof Zp),Cd(em(n)),Cd(n.filters.length>1),n.filters.reduce(((e,t)=>uv(e,t))))}function uv(e,t){let n;return Cd(e instanceof Jp||e instanceof Zp),Cd(t instanceof Jp||t instanceof Zp),n=e instanceof Jp?t instanceof Jp?function(e,t){return Zp.create([e,t],"and")}(e,t):cv(e,t):t instanceof Jp?cv(t,e):function(e,t){if(Cd(e.filters.length>0&&t.filters.length>0),em(e)&&em(t))return om(e,t.getFilters());const n=tm(e)?e:t,r=tm(e)?t:e,i=n.filters.map((e=>uv(e,r)));return Zp.create(i,"or")}(e,t),hv(n)}function cv(e,t){if(em(t))return om(t,e.getFilters());{const n=t.filters.map((t=>uv(e,t)));return Zp.create(n,"or")}}function hv(e){if(Cd(e instanceof Jp||e instanceof Zp),e instanceof Jp)return e;const t=e.getFilters();if(1===t.length)return hv(t[0]);if(rm(e))return e;const n=t.map((e=>hv(e))),r=[];return n.forEach((t=>{t instanceof Jp?r.push(t):t instanceof Zp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Zp.create(r,e.op)}class dv{constructor(){this.rn=new fv}addToCollectionParentIndex(e,t){return this.rn.add(t),hf.resolve()}getCollectionParents(e,t){return hf.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return hf.resolve()}deleteFieldIndex(e,t){return hf.resolve()}getDocumentsMatchingTarget(e,t){return hf.resolve(null)}getIndexType(e,t){return hf.resolve(0)}getFieldIndexes(e,t){return hf.resolve([])}getNextCollectionGroupToUpdate(e){return hf.resolve(null)}getMinOffset(e,t){return hf.resolve(of.min())}getMinOffsetFromCollectionGroup(e,t){return hf.resolve(of.min())}updateCollectionGroup(e,t,n){return hf.resolve()}updateIndexEntries(e,t){return hf.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ap(Qd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ap(Qd.comparator)).toArray()}}const pv=new Uint8Array(0);class mv{constructor(e,t){this.user=e,this.databaseId=t,this.on=new fv,this.un=new Mm((e=>vm(e)),((e,t)=>bm(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:If(r)};return gv(e).put(i)}return hf.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Kd(t),""],!1,!0);return gv(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Af(r.parent))}return n}))}addFieldIndex(e,t){const n=vv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=bv(e);return i.next((e=>{n.put(Uy(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=vv(e),r=bv(e),i=yv(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=yv(e);let r=!0;const i=new Map;return hf.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Gm();const r=[];return hf.forEach(i,((i,s)=>{var o;xd("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${vm(t)}`);const a=function(e,t){const n=ef(t);if(void 0===n)return null;for(const t of _m(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),l=function(e,t){const n=new Map;for(const r of tf(t))for(const t of _m(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of tf(t)){const t=0===i.kind?Em(e,i.fieldPath,e.startAt):xm(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Hp(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of tf(t)){const t=0===i.kind?xm(e,i.fieldPath,e.endAt):Em(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Hp(n,r)}(s,i),h=this.hn(i,s,u),d=this.hn(i,s,c),f=this.ln(i,s,l),p=this.fn(i.indexId,a,h,u.inclusive,d,c.inclusive,f);return hf.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Jd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return hf.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:iv(Zp.create(e.filters,"and")).map((t=>ym(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.dn(t[c/l]):pv,h=this.wn(e,a,n[c%l],r),d=this._n(e,a,i[c%l],s),f=o.map((t=>this.wn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}wn(e,t,n,r){const i=new Zy(e,Jd.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new Zy(e,Jd.empty(),t,n);return r?i.Je():i}an(e,t){const n=new nv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return hf.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new ap(Xd.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new Jy;for(const r of tf(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);Hy.Ve._e(e,i)}return n.Qe()}dn(e){const t=new Jy;return Hy.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Jy;return Hy.Ve._e(Dp(this.databaseId,t),n.He(function(e){const t=tf(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Jy);let i=0;for(const s of tf(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&Rp(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);Hy.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Jy;r.seed(n.Qe()),Hy.Ve._e(e,r.He(t.kind)),i.push(r)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof Jp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=vv(e),r=bv(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return hf.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new rf(t.sequenceNumber,new of(Ry(t.readTime),new Jd(Af(t.documentKey)),t.largestBatchId)):rf.empty(),r=e.fields.map((([e,t])=>new nf(Xd.fromServerFormat(e),t)));return new Zd(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:$d(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=vv(e),i=bv(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>hf.forEach(t,(t=>i.put(Uy(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return hf.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?hf.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),hf.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?hf.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return yv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return yv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=yv(e);let i=new ap(ev);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new Zy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new ap(ev);const r=this.mn(t,e);if(null==r)return n;const i=ef(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Rp(s))for(const i of s.arrayValue.values||[])n=n.add(new Zy(t.indexId,e.key,this.dn(i),r))}else n=n.add(new Zy(t.indexId,e.key,pv,r));return n}vn(e,t,n,r,i){xd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=up(s),l=up(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=up(o)):t?(i(a),a=up(s)):(a=up(s),l=up(o))}}(r,i,ev,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),hf.waitFor(s)}Tn(e){let t=1;return bv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>ev(e,t))).filter(((e,t,n)=>!t||0!==ev(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=ev(i,e),s=ev(i,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(i),r.push(i.Je());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.bn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,pv,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,pv,[]];i.push(IDBKeyRange.bound(t,n))}return i}bn(e,t){return ev(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wv)}getMinOffset(e,t){return hf.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||Td())))).next(wv)}}function gv(e){return ep(e,"collectionParents")}function yv(e){return ep(e,"indexEntries")}function vv(e){return ep(e,"indexConfiguration")}function bv(e){return ep(e,"indexState")}function wv(e){Cd(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;af(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new of(t.readTime,t.documentKey,n)}const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ev{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ev(e,Ev.DEFAULT_COLLECTION_PERCENTILE,Ev.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xv(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Cd(1===a)})));const u=[];for(const e of n.mutations){const r=Of(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return hf.waitFor(s).next((()=>u))}function Sv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Td();t=e.noDocument}return JSON.stringify(t).length}Ev.DEFAULT_COLLECTION_PERCENTILE=10,Ev.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ev.DEFAULT=new Ev(41943040,Ev.DEFAULT_COLLECTION_PERCENTILE,Ev.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ev.DISABLED=new Ev(-1,0,0);class kv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Cd(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new kv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tv(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Cv(e),s=Tv(e);return s.add({}).next((o=>{Cd("number"==typeof o);const a=new Tg(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>py(e.fe,t))),i=n.mutations.map((t=>py(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new ap(((e,t)=>$d(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Of(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Rf))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),hf.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Tv(e).get(t).next((e=>e?(Cd(e.userId===this.userId),Py(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?hf.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Tv(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Cd(t.batchId>=n),i=Py(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Tv(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tv(e).j("userMutationsIndex",t).next((e=>e.map((e=>Py(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Df(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Cv(e).X({range:r},((n,r,s)=>{const[o,a,l]=n,u=Af(a);if(o===this.userId&&t.path.isEqual(u))return Tv(e).get(l).next((e=>{if(!e)throw Td();Cd(e.userId===this.userId),i.push(Py(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ap($d);const r=[];return t.forEach((t=>{const i=Df(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Cv(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,l=Af(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),hf.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Df(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ap($d);return Cv(e).X({range:s},((e,t,i)=>{const[s,a,l]=e,u=Af(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Tv(e).get(t).next((e=>{if(null===e)throw Td();Cd(e.userId===this.userId),n.push(Py(this.serializer,e))})))})),hf.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return xv(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),hf.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return hf.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Cv(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Af(e[1]);r.push(t)}else n.done()})).next((()=>{Cd(0===r.length)}))}))}containsKey(e,t){return Iv(e,this.userId,t)}xn(e){return Av(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Iv(e,t,n){const r=Df(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Cv(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Tv(e){return ep(e,"mutations")}function Cv(e){return ep(e,"documentMutations")}function Av(e){return ep(e,"mutationQueues")}class Nv{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Nv(0)}static Mn(){return new Nv(-1)}}class Dv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new Nv(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>Gd.fromTimestamp(new Hd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ov(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(Cd(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Ov(e).X(((s,o)=>{const a=Fy(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>hf.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Ov(e).X(((e,n)=>{const r=Fy(n);t(r)}))}$n(e){return Rv(e).get("targetGlobalKey").next((e=>(Cd(null!==e),e)))}On(e,t){return Rv(e).put("targetGlobalKey",t)}Fn(e,t){return Ov(e).put(My(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=vm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Ov(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Fy(n);bm(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Pv(e);return t.forEach((t=>{const s=If(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),hf.waitFor(r)}removeMatchingKeys(e,t,n){const r=Pv(e);return hf.forEach(t,(t=>{const i=If(t.path);return hf.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Pv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pv(e);let i=Gm();return r.X({range:n,Y:!0},((e,t,n)=>{const r=Af(e[1]),s=new Jd(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=If(t.path),r=IDBKeyRange.bound([n],[Kd(n)],!1,!0);let i=0;return Pv(e).X({index:"documentTargetsIndex",Y:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}le(e,t){return Ov(e).get(t).next((e=>e?Fy(e):null))}}function Ov(e){return ep(e,"targets")}function Rv(e){return ep(e,"targetGlobal")}function Pv(e){return ep(e,"targetDocuments")}function Fv([e,t],[n,r]){const i=$d(e,n);return 0===i?$d(t,r):i}class Mv{constructor(e){this.Ln=e,this.buffer=new ap(Fv),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Fv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){xd("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gf(e)?xd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await cf(e)}await this.Qn(3e5)}))}}class jv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return hf.resolve(xf.ct);const n=new Mv(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xd("LruGarbageCollector","Garbage collection skipped; disabled"),hf.resolve(_v)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(xd("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(xd("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ed()<=Xe.DEBUG&&xd("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),hf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Vv{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new jv(e,t)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Uv(e,n)}removeReference(e,t,n){return Uv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Uv(e,t)}Xn(e,t){return function(e,t){let n=!1;return Av(e).Z((r=>Iv(e,r,t).next((e=>(e&&(n=!0),hf.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Gd.min()),Pv(e).delete([0,If(s.path)]))))}));r.push(t)}})).next((()=>hf.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Uv(e,t)}Yn(e,t){const n=Pv(e);let r,i=xf.ct;return n.X({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==xf.ct&&t(new Jd(Af(r)),i),i=o,r=s):i=xf.ct})).next((()=>{i!==xf.ct&&t(new Jd(Af(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uv(e,t){return Pv(e).put(function(e,t){return{targetId:0,path:If(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class zv{constructor(){this.changes=new Mm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?hf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Hv(e).put(n)}removeEntry(e,t,n){return Hv(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Dy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Kp.newInvalidDocument(t);return Hv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gv(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Kp.newInvalidDocument(t)};return Hv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gv(t))},((e,r)=>{n={document:this.ts(t,r),size:Sv(r)}})).next((()=>n))}getEntries(e,t){let n=jm();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=jm(),r=new ip(Jd.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,Sv(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return hf.resolve();let r=new ap(Qv);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Gv(r.first()),Gv(r.last())),s=r.getIterator();let o=s.getNext();return Hv(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Jd.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Qv(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(Gv(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),Dy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hv(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=jm();for(const i of e){const e=this.ts(Jd.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Rm(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=jm();const s=Wv(t,n),o=Wv(t,of.max());return Hv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(Jd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new qv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Kv(e).get("remoteDocumentGlobalKey").next((e=>(Cd(!!e),e)))}Zn(e,t){return Kv(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=function(e,t,n){const r=ly(e,t.name),i=iy(t.updateTime),s=t.createTime?iy(t.createTime):Gd.min(),o=new $p({mapValue:{fields:t.fields}}),a=Kp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Jd.fromSegments(t.noDocument.path),r=Ry(t.noDocument.readTime);n=Kp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Td();{const e=Jd.fromSegments(t.unknownDocument.path),r=Ry(t.unknownDocument.version);n=Kp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Hd(e[0],e[1]);return Gd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Gd.min()))return e}return Kp.newInvalidDocument(e)}}function $v(e){return new Bv(e)}class qv extends zv{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Mm((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new ap(((e,t)=>$d(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Ny(this.os.serializer,s);r=r.add(i.path.popLast());const l=Sv(a);n+=l-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Ny(this.os.serializer,s.convertToNoDocument(Gd.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),hf.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((({documents:e,rs:t})=>(t.forEach(((t,n)=>{this.us.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Kv(e){return ep(e,"remoteDocumentGlobal")}function Hv(e){return ep(e,"remoteDocumentsV14")}function Gv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Wv(e,t){const n=t.documentKey.path.toArray();return[e,Dy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qv(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=$d(n[e],r[e]),i)return i;return i=$d(n.length,r.length),i||(i=$d(n[n.length-2],r[r.length-2]),i||$d(n[n.length-1],r[r.length-1]))}class Yv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&yg(n.mutation,e,cp.empty(),Hd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gm()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Gm()){const r=Bm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Um();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Bm();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gm())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=jm();const s=qm(),o=qm();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof _g)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),yg(o.mutation,t,o.mutation.getFieldMask(),Hd.now())):s.set(t.key,cp.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Yv(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=qm();let r=new ip(((e,t)=>e-t)),i=Gm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||cp.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Gm()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=$m();l.forEach((e=>{if(!i.has(e)){const r=mg(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return hf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Jd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):hf.resolve(Bm());let o=-1,a=i;return s.next((t=>hf.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?hf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Gm()))).next((e=>({batchId:o,changes:zm(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jd(t)).next((e=>{let t=Um();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Um();return this.indexManager.getCollectionParents(e,r).next((s=>hf.forEach(s,(s=>{const o=function(e,t){return new Sm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Kp.newInvalidDocument(r)))}));let n=Um();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&yg(s.mutation,i,cp.empty(),Hd.now()),Rm(t,i)&&(n=n.insert(e,i))})),n}))}}class Jv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return hf.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:iy(n.createTime)}),hf.resolve()}getNamedQuery(e,t){return hf.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Ly(e.bundledQuery),readTime:iy(e.readTime)}}(t)),hf.resolve()}}class Zv{constructor(){this.overlays=new ip(Jd.comparator),this.ls=new Map}getOverlay(e,t){return hf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bm();return hf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),hf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),hf.resolve()}getOverlaysForCollection(e,t,n){const r=Bm(),i=t.length+1,s=new Jd(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return hf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ip(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bm(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Bm(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return hf.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ag(t,n));let i=this.ls.get(t);void 0===i&&(i=Gm(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class eb{constructor(){this.fs=new ap(tb.ds),this.ws=new ap(tb._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new tb(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new tb(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Jd(new Qd([])),n=new tb(t,e),r=new tb(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Jd(new Qd([])),n=new tb(t,e),r=new tb(t,e+1);let i=Gm();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new tb(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tb{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Jd.comparator(e.key,t.key)||$d(e.As,t.As)}static _s(e,t){return $d(e.As,t.As)||Jd.comparator(e.key,t.key)}}class nb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ap(tb.ds)}checkEmpty(e){return hf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Tg(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.Rs=this.Rs.add(new tb(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return hf.resolve(s)}lookupMutationBatch(e,t){return hf.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return hf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return hf.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return hf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tb(t,0),r=new tb(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),hf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ap($d);return t.forEach((e=>{const t=new tb(e,0),r=new tb(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),hf.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Jd.isDocumentKey(i)||(i=i.child(""));const s=new tb(new Jd(i),0);let o=new ap($d);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),hf.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Cd(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return hf.forEach(t.mutations,(r=>{const i=new tb(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new tb(t,0),r=this.Rs.firstAfterOrEqual(n);return hf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,hf.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rb{constructor(e){this.Ds=e,this.docs=new ip(Jd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return hf.resolve(n?n.document.mutableCopy():Kp.newInvalidDocument(t))}getEntries(e,t){let n=jm();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Kp.newInvalidDocument(e))})),hf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=jm();const s=t.path,o=new Jd(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||af(sf(o),n)<=0||(r.has(o.key)||Rm(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return hf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Td()}Cs(e,t){return hf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ib(this)}getSize(e){return hf.resolve(this.size)}}class ib extends zv{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),hf.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class sb{constructor(e){this.persistence=e,this.xs=new Mm((e=>vm(e)),bm),this.lastRemoteSnapshotVersion=Gd.min(),this.highestTargetId=0,this.Ns=0,this.ks=new eb,this.targetCount=0,this.Ms=Nv.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),hf.resolve()}getLastRemoteSnapshotVersion(e){return hf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hf.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),hf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),hf.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Nv(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,hf.resolve()}updateTargetData(e,t){return this.Fn(t),hf.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,hf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),hf.waitFor(i).next((()=>r))}getTargetCount(e){return hf.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return hf.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),hf.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),hf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),hf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return hf.resolve(n)}containsKey(e,t){return hf.resolve(this.ks.containsKey(t))}}class ob{constructor(e,t){this.$s={},this.overlays={},this.Os=new xf(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new sb(this),this.indexManager=new dv,this.remoteDocumentCache=function(e){return new rb(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Ay(t),this.qs=new Jv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new nb(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){xd("MemoryPersistence","Starting transaction:",e);const r=new ab(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return hf.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class ab extends uf{constructor(e){super(),this.currentSequenceNumber=e}}class lb{constructor(e){this.persistence=e,this.Qs=new eb,this.js=null}static zs(e){return new lb(e)}get Ws(){if(this.js)return this.js;throw Td()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),hf.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),hf.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),hf.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hf.forEach(this.Ws,(n=>{const r=Jd.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Gd.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return hf.or([()=>hf.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ub{constructor(e){this.serializer=e}O(e,t,n,r){const i=new df("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nf,{unique:!0}),e.createObjectStore("documentMutations")}(e),cb(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=hf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),cb(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return hf.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Kf});t.createIndex("collectionPathOverlayIndex",Hf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Gf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Pf});t.createIndex("documentKeyIndex",Ff),t.createIndex("collectionGroupIndex",Mf)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zf}).createIndex("sequenceNumberIndex",Bf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:$f}).createIndex("documentKeyIndex",qf,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=Sv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>hf.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>hf.forEach(n,(n=>{Cd(n.userId===t.userId);const r=Py(this.serializer,n);return xv(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new Qd(n),o=function(e){return[0,If(e)]}(s);r.push(t.get(o).next((n=>n?hf.resolve():(n=>t.put({targetId:0,path:If(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>hf.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Uf});const n=t.store("collectionParents"),r=new fv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:If(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new Qd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},(([e,t,n],r)=>{const s=Af(t);return i(s.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=Fy(n),i=My(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Jd(Qd.fromString(o.document.name).popFirst(5)):o.noDocument?Jd.fromSegments(o.noDocument.path):o.unknownDocument?Jd.fromSegments(o.unknownDocument.path):Td()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>hf.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=$v(this.serializer),i=new ob(lb.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Gm();Py(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),hf.forEach(n,((e,n)=>{const s=new bd(n),o=qy.de(this.serializer,s),a=i.getIndexManager(s),l=kv.de(s,this.serializer,a,i.referenceDelegate);return new Xv(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Zf(t,xf.ct),e).next()}))}))}}function cb(e){e.createObjectStore("targetDocuments",{keyPath:jf}).createIndex("documentTargetsIndex",Vf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lf,{unique:!0}),e.createObjectStore("targetGlobal")}const hb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class db{constructor(e,t,n,r,i,s,o,a,l,u,c=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=l,this.oi=u,this.ui=c,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!db.D())throw new Dd(Nd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vv(this,r),this.di=t+"main",this.serializer=new Ay(a),this.wi=new ff(this.di,this.ui,new ub(this.serializer)),this.Bs=new Dv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$v(this.serializer),this.qs=new zy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===u&&Sd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Dd(Nd.FAILED_PRECONDITION,hb);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new xf(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(gf(e))return xd("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return fb(e).get("owner").next((e=>hf.resolve(this.Ri(e))))}Pi(e){return pb(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=ep(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return hf.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?hf.resolve(!0):fb(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Dd(Nd.FAILED_PRECONDITION,hb);return!1}}return!(!this.networkEnabled||!this.inForeground)||pb(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&xd("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Zf(e,xf.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>pb(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return kv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mv(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return qy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){xd("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?Jf:14===s?Xf:13===s?Yf:12===s?Qf:11===s?Wf:void Td();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new Zf(r,this.Os?this.Os.next():xf.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Sd(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new Dd(Nd.FAILED_PRECONDITION,lf);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return fb(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Dd(Nd.FAILED_PRECONDITION,hb)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fb(e).put("owner",t)}static D(){return ff.D()}Ai(e){const t=fb(e);return t.get("owner").next((e=>this.Ri(e)?(xd("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):hf.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Sd(`Detected an update time that is in the future: ${e} > ${n}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!function(){var e;const t=null===(e=Ce())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xd("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Sd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Sd("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fb(e){return ep(e,"owner")}function pb(e){return ep(e,"clientMetadata")}class mb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Gm(),r=Gm();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new mb(e,t.fromCache,n,r)}}class gb{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Im(t))return hf.resolve(null);let n=Cm(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Am(t,null,"F"),n=Cm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gm(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Am(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Im(t)||r.isEqual(Gd.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Ed()<=Xe.DEBUG&&xd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Om(t)),this.Wi(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Gd.fromTimestamp(1e9===r?new Hd(n+1,0):new Hd(n,r));return new of(i,Jd.empty(),t)}(r,-1)))}))}ji(e,t){let n=new ap(Pm(e));return t.forEach(((t,r)=>{Rm(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Ed()<=Xe.DEBUG&&xd("QueryEngine","Using full collection scan to execute query:",Om(t)),this.Ui.getDocumentsMatchingQuery(e,t,of.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class yb{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new ip($d),this.Yi=new Mm((e=>vm(e)),bm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function vb(e,t,n,r){return new yb(e,t,n,r)}async function bb(e,t){const n=Ad(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Gm();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function wb(e){const t=Ad(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function _b(e,t){const n=Ad(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function Eb(e,t,n){const r=Ad(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!gf(e))throw e;xd("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function xb(e,t,n){const r=Ad(e);let i=Gd.min(),s=Gm();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Ad(e),i=r.Yi.get(n);return void 0!==i?hf.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Cm(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Gd.min(),n?s:Gm()))).next((e=>(function(e,t,n){let r=e.Xi.get(t)||Gd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:s})))))}class Sb{constructor(){this.activeTargetIds=Wm}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kb{constructor(){this.Hr=new Sb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Sb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ib{Yr(e){}shutdown(){}}class Tb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cb=null;function Ab(){return null===Cb?Cb=268435456+Math.round(2147483648*Math.random()):Cb++,"0x"+Cb.toString(16)}const Nb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Db{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ob="WebChannelConnection";class Rb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Ab(),o=this.To(e,t);xd("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(xd("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw kd("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+wd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Nb[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Ab();return new Promise(((s,o)=>{const a=new md;a.setWithCredentials(!0),a.listenOnce(cd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ud.NO_ERROR:const t=a.getResponseJson();xd(Ob,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ud.TIMEOUT:xd(Ob,`RPC '${e}' ${i} timed out`),o(new Dd(Nd.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const n=a.getStatus();if(xd(Ob,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Nd).indexOf(t)>=0?t:Nd.UNKNOWN}(t.status);o(new Dd(e,t.message))}else o(new Dd(Nd.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Dd(Nd.UNAVAILABLE,"Connection failed."));break;default:Td()}}finally{xd(Ob,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);xd(Ob,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Ab(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ad(),o=ld(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new fd({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");xd(Ob,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Db({ro:t=>{d?xd(Ob,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(xd(Ob,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),xd(Ob,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,pd.EventType.OPEN,(()=>{d||xd(Ob,`RPC '${e}' stream ${r} transport opened.`)})),p(c,pd.EventType.CLOSE,(()=>{d||(d=!0,xd(Ob,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(c,pd.EventType.ERROR,(t=>{d||(d=!0,kd(Ob,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Dd(Nd.UNAVAILABLE,"The operation could not be completed")))})),p(c,pd.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Cd(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xd(Ob,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Dg[e];if(void 0!==t)return Rg(t)}(t),i=o.message;void 0===n&&(n=Nd.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Dd(n,i)),c.close()}else xd(Ob,`RPC '${e}' stream ${r} received:`,i),f._o(i)}})),p(o,hd.STAT_EVENT,(t=>{t.stat===dd.PROXY?xd(Ob,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===dd.NOPROXY&&xd(Ob,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Pb(){return"undefined"!=typeof document?document:null}function Fb(e){return new Zg(e,!0)}class Mb{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&xd("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Lb{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Mb(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Nd.RESOURCE_EXHAUSTED?(Sd(t.toString()),Sd("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Nd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Fo===t&&this.Zo(e,n)}),(t=>{e((()=>{const e=new Dd(Nd.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return xd("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(xd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jb extends Lb{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Td()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Cd(void 0===t||"string"==typeof t),dp.fromBase64String(t||"")):(Cd(void 0===t||t instanceof Uint8Array),dp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Nd.UNKNOWN:Rg(e.code);return new Dd(t,e.message||"")}(o);n=new Kg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ly(e,r.document.name),s=iy(r.document.updateTime),o=r.document.createTime?iy(r.document.createTime):Gd.min(),a=new $p({mapValue:{fields:r.document.fields}}),l=Kp.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new $g(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ly(e,r.document),s=r.readTime?iy(r.readTime):Gd.min(),o=Kp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $g([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ly(e,r.document),s=r.removedTargetIds||[];n=new $g([],s,i,null)}else{if(!("filter"in t))return Td();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ng(r,i),o=e.targetId;n=new qg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gd.min():t.readTime?iy(t.readTime):Gd.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=hy(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=wm(r)?{documents:gy(e,r)}:{query:yy(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ny(e,t.resumeToken);const r=ey(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gd.min())>0){n.readTime=ty(e,t.snapshotVersion.toTimestamp());const r=ey(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Td()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=hy(this.serializer),t.removeTarget=e,this.Wo(t)}}class Vb extends Lb{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Cd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Cd(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?iy(e.updateTime):iy(t);return n.isEqual(Gd.min())&&(n=iy(t)),new hg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=iy(e.commitTime);return this.listener.cu(n,t)}return Cd(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hy(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>py(this.serializer,e)))};this.Wo(t)}}class Ub extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Dd(Nd.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.Io(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Nd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Dd(Nd.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.vo(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Nd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Dd(Nd.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class zb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Sd(t),this.mu=!1):xd("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Bb{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Xb(this)&&(xd("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ad(e);t.vu.add(4),await qb(t),t.bu.set("Unknown"),t.vu.delete(4),await $b(t)}(this))}))})),this.bu=new zb(n,r)}}async function $b(e){if(Xb(e))for(const t of e.Ru)await t(!0)}async function qb(e){for(const t of e.Ru)await t(!1)}function Kb(e,t){const n=Ad(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Yb(n)?Qb(n):pw(n).Ko()&&Gb(n,t))}function Hb(e,t){const n=Ad(e),r=pw(n);n.Au.delete(t),r.Ko()&&Wb(n,t),0===n.Au.size&&(r.Ko()?r.jo():Xb(n)&&n.bu.set("Unknown"))}function Gb(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pw(e).su(t)}function Wb(e,t){e.Vu.qt(t),pw(e).iu(t)}function Qb(e){e.Vu=new Gg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),pw(e).start(),e.bu.gu()}function Yb(e){return Xb(e)&&!pw(e).Uo()&&e.Au.size>0}function Xb(e){return 0===Ad(e).vu.size}function Jb(e){e.Vu=void 0}async function Zb(e){e.Au.forEach(((t,n)=>{Gb(e,t)}))}async function ew(e,t){Jb(e),Yb(e)?(e.bu.Iu(t),Qb(e)):e.bu.set("Unknown")}async function tw(e,t,n){if(e.bu.set("Online"),t instanceof Kg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){xd("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nw(e,n)}else if(t instanceof $g?e.Vu.Ht(t):t instanceof qg?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Gd.min()))try{const t=await wb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(dp.EMPTY_BYTE_STRING,r.snapshotVersion)),Wb(e,t);const i=new Cy(r.target,t,n,r.sequenceNumber);Gb(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xd("RemoteStore","Failed to raise snapshot:",t),await nw(e,t)}}async function nw(e,t,n){if(!gf(t))throw t;e.vu.add(1),await qb(e),e.bu.set("Offline"),n||(n=()=>wb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{xd("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await $b(e)}))}function rw(e,t){return t().catch((n=>nw(e,n,t)))}async function iw(e){const t=Ad(e),n=mw(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;sw(t);)try{const e=await _b(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,ow(t,e)}catch(e){await nw(t,e)}aw(t)&&lw(t)}function sw(e){return Xb(e)&&e.Eu.length<10}function ow(e,t){e.Eu.push(t);const n=mw(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function aw(e){return Xb(e)&&!mw(e).Uo()&&e.Eu.length>0}function lw(e){mw(e).start()}async function uw(e){mw(e).hu()}async function cw(e){const t=mw(e);for(const n of e.Eu)t.uu(n.mutations)}async function hw(e,t,n){const r=e.Eu.shift(),i=Cg.from(r,t,n);await rw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await iw(e)}async function dw(e,t){t&&mw(e).ou&&await async function(e,t){if(function(e){switch(e){default:return Td();case Nd.CANCELLED:case Nd.UNKNOWN:case Nd.DEADLINE_EXCEEDED:case Nd.RESOURCE_EXHAUSTED:case Nd.INTERNAL:case Nd.UNAVAILABLE:case Nd.UNAUTHENTICATED:return!1;case Nd.INVALID_ARGUMENT:case Nd.NOT_FOUND:case Nd.ALREADY_EXISTS:case Nd.PERMISSION_DENIED:case Nd.FAILED_PRECONDITION:case Nd.ABORTED:case Nd.OUT_OF_RANGE:case Nd.UNIMPLEMENTED:case Nd.DATA_LOSS:return!0}}(n=t.code)&&n!==Nd.ABORTED){const n=e.Eu.shift();mw(e).Qo(),await rw(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await iw(e)}var n}(e,t),aw(e)&&lw(e)}async function fw(e,t){const n=Ad(e);n.asyncQueue.verifyOperationInProgress(),xd("RemoteStore","RemoteStore received new credentials");const r=Xb(n);n.vu.add(3),await qb(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await $b(n)}function pw(e){return e.Su||(e.Su=function(e,t,n){const r=Ad(e);return r.fu(),new jb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Zb.bind(null,e),ao:ew.bind(null,e),nu:tw.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Yb(e)?Qb(e):e.bu.set("Unknown")):(await e.Su.stop(),Jb(e))}))),e.Su}function mw(e){return e.Du||(e.Du=function(e,t,n){const r=Ad(e);return r.fu(),new Vb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:uw.bind(null,e),ao:dw.bind(null,e),au:cw.bind(null,e),cu:hw.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await iw(e)):(await e.Du.stop(),e.Eu.length>0&&(xd("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class gw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Od,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gw(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dd(Nd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yw(e,t){if(Sd("AsyncQueue",`${t}: ${e}`),gf(e))return new Dd(Nd.UNAVAILABLE,`${t}: ${e}`);throw e}class vw{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Jd.comparator(t.key,n.key):(e,t)=>Jd.comparator(e.key,t.key),this.keyedMap=Um(),this.sortedSet=new ip(this.comparator)}static emptySet(e){return new vw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bw{constructor(){this.Cu=new ip(Jd.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Td():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ww{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new ww(e,t,vw.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class _w{constructor(){this.Nu=void 0,this.listeners=[]}}class Ew{constructor(){this.queries=new Mm((e=>Dm(e)),Nm),this.onlineState="Unknown",this.ku=new Set}}function xw(e,t){const n=Ad(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.$u(e)&&(r=!0);i.Nu=e}}r&&kw(n)}function Sw(e,t,n){const r=Ad(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function kw(e){e.ku.forEach((e=>{e.next()}))}class Iw{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ww(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=ww.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Tw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class Aw{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gm(),this.mutatedKeys=Gm(),this.tc=Pm(e),this.ec=new vw(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new bw,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Rm(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Td()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new ww(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gm(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Cw(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Tw(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Gm();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ww.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Nw{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dw{constructor(e){this.key=e,this.fc=!1}}class Ow{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Mm((e=>Dm(e)),Nm),this._c=new Map,this.mc=new Set,this.gc=new ip(Jd.comparator),this.yc=new Map,this.Ic=new eb,this.Tc={},this.Ec=new Map,this.Ac=Nv.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Rw(e,t){const n=function(e){const t=Ad(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lw.bind(null,t),t.dc.nu=xw.bind(null,t.eventManager),t.dc.Pc=Sw.bind(null,t.eventManager),t}(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await function(e,t){const n=Ad(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,hf.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Cy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}(n.localStore,Cm(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await xb(e.localStore,t.query,!1).then((({documents:e})=>t.view.sc(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return qw(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await xb(e.localStore,t,!0),o=new Aw(t,s.ir),a=o.sc(s.documents),l=Bg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);qw(e,n,u.cc);const c=new Nw(t,n,o);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Kb(n.remoteStore,e)}return i}async function Pw(e,t){const n=Ad(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!Nm(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Eb(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Hb(n.remoteStore,r.targetId),Bw(n,r.targetId)})).catch(cf)):(Bw(n,r.targetId),await Eb(n.localStore,r.targetId,!0))}async function Fw(e,t){const n=Ad(e);try{const e=await function(e,t){const n=Ad(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(dp.EMPTY_BYTE_STRING,Gd.min()).withLastLimboFreeSnapshotVersion(Gd.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Bs.updateTargetData(e,u))}));let a=jm(),l=Gm();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=Gm(),i=Gm();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=jm();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Gd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):xd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(Gd.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return hf.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Cd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Cd(r.fc):e.removedDocuments.size>0&&(Cd(r.fc),r.fc=!1))})),await Gw(n,e,t)}catch(e){await cf(e)}}function Mw(e,t,n){const r=Ad(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ad(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Mu(t)&&(r=!0)})),r&&kw(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lw(e,t,n){const r=Ad(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new ip(Jd.comparator);e=e.insert(s,Kp.newNoDocument(s,Gd.min()));const n=Gm().add(s),i=new zg(Gd.min(),new Map,new ip($d),e,n);await Fw(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Hw(r)}else await Eb(r.localStore,t,!1).then((()=>Bw(r,t,n))).catch(cf)}async function jw(e,t){const n=Ad(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ad(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=hf.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Cd(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);zw(n,r,null),Uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gw(n,e)}catch(e){await cf(e)}}async function Vw(e,t,n){const r=Ad(e);try{const e=await function(e,t){const n=Ad(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Cd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);zw(r,t,n),Uw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Gw(r,e)}catch(n){await cf(n)}}function Uw(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function zw(e,t,n){const r=Ad(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Bw(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||$w(e,t)}))}function $w(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Hb(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Hw(e))}function qw(e,t,n){for(const r of n)r instanceof Tw?(e.Ic.addReference(r.key,t),Kw(e,r)):r instanceof Cw?(xd("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||$w(e,r.key)):Td()}function Kw(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(xd("SyncEngine","New document in limbo: "+n),e.mc.add(r),Hw(e))}function Hw(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Jd(Qd.fromString(t)),r=e.Ac.next();e.yc.set(r,new Dw(n)),e.gc=e.gc.insert(n,r),Kb(e.remoteStore,new Cy(Cm(km(n.path)),r,"TargetPurposeLimboResolution",xf.ct))}}async function Gw(e,t,n){const r=Ad(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=mb.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Ad(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>hf.forEach(t,(t=>hf.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>hf.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!gf(e))throw e;xd("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ji.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(t,i)}}}(r.localStore,s))}async function Ww(e,t){const n=Ad(e);if(!n.currentUser.isEqual(t)){xd("SyncEngine","User change. New user:",t.toKey());const e=await bb(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Dd(Nd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gw(n,e.er)}}function Qw(e,t){const n=Ad(e),r=n.yc.get(t);if(r&&r.fc)return Gm().add(r.key);{let e=Gm();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Yw(e){const t=Ad(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vw.bind(null,t),t}class Xw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Fb(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vb(this.persistence,new gb,e.initialUser,this.serializer)}createPersistence(e){return new ob(lb.zs,this.serializer)}createSharedClientState(e){return new kb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Jw extends Xw{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Yw(this.Vc.syncEngine),await iw(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return vb(this.persistence,new gb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Lv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ef(t,this.persistence);return new _f(e.asyncQueue,n)}createPersistence(e){const t=function(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ev.withCacheSize(this.cacheSizeBytes):Ev.DEFAULT;return new db(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,"undefined"!=typeof window?window:null,Pb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kb}}class Zw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Mw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ww.bind(null,this.syncEngine),await async function(e,t){const n=Ad(e);t?(n.vu.delete(2),await $b(n)):t||(n.vu.add(2),await qb(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ew}createDatastore(e){const t=Fb(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Rb(r));var r;return function(e,t,n,r){return new Ub(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Mw(this.syncEngine,e,0),s=Tb.D()?new Tb:new Ib,new Bb(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ow(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ad(e);xd("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await qb(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class e_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Sd("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class t_{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bd.UNAUTHENTICATED,this.clientId=Bd.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{xd("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(xd("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Dd(Nd.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Od;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function n_(e,t){e.asyncQueue.verifyOperationInProgress(),xd("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function r_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xd("FirestoreClient","Using user provided OfflineComponentProvider");try{await n_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!i_(n))throw n;kd("Error using user provided cache. Falling back to memory cache: "+n),await n_(e,new Xw)}}else xd("FirestoreClient","Using default OfflineComponentProvider"),await n_(e,new Xw);return e._offlineComponents}(e);xd("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>fw(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>fw(t.remoteStore,n))),e._onlineComponents=t}function i_(e){return"FirebaseError"===e.name?e.code===Nd.FAILED_PRECONDITION||e.code===Nd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function s_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xd("FirestoreClient","Using user provided OnlineComponentProvider"),await r_(e,e._uninitializedComponentsProvider._online)):(xd("FirestoreClient","Using default OnlineComponentProvider"),await r_(e,new Zw))),e._onlineComponents}async function o_(e){const t=await s_(e),n=t.eventManager;return n.onListen=Rw.bind(null,t.syncEngine),n.onUnlisten=Pw.bind(null,t.syncEngine),n}function a_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const l_=new Map;function u_(e,t,n){if(!n)throw new Dd(Nd.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function c_(e){if(!Jd.isDocumentKey(e))throw new Dd(Nd.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function h_(e){if(Jd.isDocumentKey(e))throw new Dd(Nd.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function d_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Td()}function f_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Dd(Nd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=d_(e);throw new Dd(Nd.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class p_{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Dd(Nd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Dd(Nd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Dd(Nd.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Dd(Nd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Dd(Nd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Dd(Nd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class m_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Dd(Nd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Dd(Nd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pd;switch(e.type){case"firstParty":return new jd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Dd(Nd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=l_.get(e);t&&(xd("ComponentProvider","Removing Datastore"),l_.delete(e),t.terminate())}(this),Promise.resolve()}}class g_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new v_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new g_(this.firestore,e,this._key)}}class y_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new y_(this.firestore,e,this._query)}}class v_ extends y_{constructor(e,t,n){super(e,t,km(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new g_(this.firestore,null,new Jd(e))}withConverter(e){return new v_(this.firestore,e,this._path)}}function b_(e,t,...n){if(e=Ke(e),1===arguments.length&&(t=Bd.A()),u_("doc","path",t),e instanceof m_){const r=Qd.fromString(t,...n);return c_(r),new g_(e,null,new Jd(r))}{if(!(e instanceof g_||e instanceof v_))throw new Dd(Nd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qd.fromString(t,...n));return c_(r),new g_(e.firestore,e instanceof v_?e.converter:null,new Jd(r))}}class w_{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Mb(this,"async_queue_retry"),this.Xc=()=>{const e=Pb();e&&xd("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Pb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Pb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Od;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!gf(e))throw e;xd("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sd("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=gw.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Td()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function __(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class E_ extends m_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new w_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||S_(this),this._firestoreClient.terminate()}}function x_(e){return e._firestoreClient||S_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function S_(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new wp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,a_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new t_(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class k_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new k_(dp.fromBase64String(e))}catch(e){throw new Dd(Nd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new k_(dp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class I_{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Dd(Nd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xd(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class T_{constructor(e){this._methodName=e}}class C_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dd(Nd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dd(Nd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $d(this._lat,e._lat)||$d(this._long,e._long)}}const A_=/^__.*__$/;class N_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _g(e,this.data,this.fieldMask,t,this.fieldTransforms):new wg(e,this.data,t,this.fieldTransforms)}}function D_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Td()}}class O_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new O_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return $_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(D_(this.ca)&&A_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class R_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fb(e)}ya(e,t,n,r=!1){return new O_({ca:e,methodName:t,ga:n,path:Xd.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P_(e){const t=e._freezeSettings(),n=Fb(e._databaseId);return new R_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function F_(e,t,n,r,i,s={}){const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);V_("Data must be an object, but it was:",o,r);const a=L_(r,o);let l,u;if(s.merge)l=new cp(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=U_(t,r,n);if(!o.contains(i))throw new Dd(Nd.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);q_(e,i)||e.push(i)}l=new cp(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new N_(new $p(a),l,u)}function M_(e,t){if(j_(e=Ke(e)))return V_("Unsupported field value:",t,e),L_(e,t);if(e instanceof T_)return function(e,t){if(!D_(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=M_(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ke(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hd.fromDate(e);return{timestampValue:ty(t.serializer,n)}}if(e instanceof Hd){const n=new Hd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ty(t.serializer,n)}}if(e instanceof C_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof k_)return{bytesValue:ny(t.serializer,e._byteString)};if(e instanceof g_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:sy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${d_(e)}`)}(e,t)}function L_(e,t){const n={};return rp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):np(e,((e,r)=>{const i=M_(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function j_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hd||e instanceof C_||e instanceof k_||e instanceof g_||e instanceof T_)}function V_(e,t,n){if(!j_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=d_(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function U_(e,t,n){if((t=Ke(t))instanceof I_)return t._internalPath;if("string"==typeof t)return B_(e,t);throw $_("Field path arguments must be of type string or ",e,!1,void 0,n)}const z_=new RegExp("[~\\*/\\[\\]]");function B_(e,t,n){if(t.search(z_)>=0)throw $_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new I_(...t.split("."))._internalPath}catch(r){throw $_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Dd(Nd.INVALID_ARGUMENT,a+e+l)}function q_(e,t){return e.some((e=>e.isEqual(t)))}class K_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new g_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new H_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class H_ extends K_{data(){return super.data()}}function G_(e,t){return"string"==typeof t?B_(e,t):t instanceof I_?t._internalPath:t._delegate._internalPath}class W_{convertValue(e,t="none"){switch(Sp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Td()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return np(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new C_(mp(e.latitude),mp(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=vp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}convertTimestamp(e){const t=pp(e);return new Hd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qd.fromString(e);Cd(Ty(n));const r=new _p(n.get(1),n.get(3)),i=new Jd(n.popFirst(5));return r.isEqual(t)||Sd(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class Q_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y_ extends K_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class X_ extends Y_{data(e={}){return super.data(e)}}class J_{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Q_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new X_(this._firestore,this._userDataWriter,n.key,n,new Q_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dd(Nd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new X_(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Q_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new X_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Q_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Z_(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Z_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Td()}}class eE extends W_{constructor(e){super(),this.firestore=e}convertBytes(e){return new k_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new g_(this.firestore,null,t)}}function tE(e,t,n){e=f_(e,g_);const r=f_(e.firestore,E_),i=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);return nE(r,[F_(P_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dg.none())])}function nE(e,t){return function(e,t){const n=new Od;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Yw(e);try{const e=await function(e,t){const n=Ad(e),r=Hd.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gm());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=jm(),l=Gm();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=vg(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new _g(e.key,t,qp(t.value.mapValue),dg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:zm(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new ip($d)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gw(r,e.changes),await iw(r.remoteStore)}catch(e){const t=yw(e,"Failed to persist write");n.reject(t)}}(await function(e){return s_(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(x_(e),t)}var rE;!function(e,t=!0){!function(e){wd=e}(rn),Zt(new He("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new E_(new Md(e.getProvider("auth-internal")),new Ud(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Dd(Nd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),an(vd,"3.13.0",e),an(vd,"3.13.0","esm2017")}();var iE=new Uint8Array(16);function sE(){if(!rE&&!(rE="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rE(iE)}const oE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var aE=[],lE=0;lE<256;++lE)aE.push((lE+256).toString(16).substr(1));const uE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(aE[e[t+0]]+aE[e[t+1]]+aE[e[t+2]]+aE[e[t+3]]+"-"+aE[e[t+4]]+aE[e[t+5]]+"-"+aE[e[t+6]]+aE[e[t+7]]+"-"+aE[e[t+8]]+aE[e[t+9]]+"-"+aE[e[t+10]]+aE[e[t+11]]+aE[e[t+12]]+aE[e[t+13]]+aE[e[t+14]]+aE[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&oE.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},cE=function(e,t,n){var r=(e=e||{}).random||(e.rng||sE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return uE(r)};function hE(e,t){const[r,i]=(0,n.useState)({status:"prefetch"}),s=(0,n.useRef)(new Map);return(0,n.useEffect)((()=>{const n=function(e,...t){var n,r,i;e=Ke(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||__(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(__(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof g_)u=f_(e.firestore,E_),c=km(e._key.path),l={next:n=>{t[o]&&t[o](function(e,t,n){const r=n.docs.get(t._key),i=new eE(e);return new Y_(e,i,t._key,r,new Q_(n.hasPendingWrites,n.fromCache),t.converter)}(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=f_(e,y_);u=f_(n.firestore,E_),c=n._query;const r=new eE(u);l={next:e=>{t[o]&&t[o](new J_(u,r,n,e))},error:t[o+1],complete:t[o+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Dd(Nd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){const i=new e_(r),s=new Iw(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ad(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new _w),i)try{s.Nu=await n.onListen(r)}catch(e){const n=yw(e,`Initialization of query '${Om(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&kw(n)}(await o_(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ad(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(await o_(e),s)))}}(x_(u),c,a,l)}(function(e,t,...n){if(e=Ke(e),u_("collection","path",t),e instanceof m_){const r=Qd.fromString(t,...n);return h_(r),new v_(e,null,r)}{if(!(e instanceof g_||e instanceof v_))throw new Dd(Nd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qd.fromString(t,...n));return h_(r),new v_(e.firestore,null,r)}}(e,`users/${t.uid}/recipies`),{includeMetadataChanges:!0},(e=>{const t=new Map(e.docs.map((e=>{const t=e.data();return console.assert(void 0!==t.name,`Recipe ${e.id} pulled from DB has no name field`),[e.id,t]}))),n=e.docChanges().map((e=>{const t=e.doc;return{type:e.type,data:t.data(),id:t.id}}));n.forEach((e=>{const t=s.current.get(e.id+"-"+e.type);t&&(console.log("Callback on",e),t(e.id,e.data))}));const r=e.metadata.fromCache?"local cache":"server";console.log(`Recipes snapshot (from ${r}):`,{recipes:t,changes:n}),i({status:"ok",data:t})}),(e=>{i({status:"error",message:"Could not get your recipes"}),console.error("Recipes snapshot failed:",e)}));return console.log("Subscribed to recipe snapshots"),function(){console.log("Unsubscribed from recipe snapshots"),n()}}),[e,t.uid]),{recipes:r,addRecipe:(n,r)=>{const i=cE();return r&&s.current.set(i+"-added",r),tE(b_(e,`users/${t.uid}/recipies/${i}`),n).then((()=>{console.log("Recipe written to server with ID",i)}))},editRecipe:(n,r,i)=>(i&&s.current.set(r+"-modified",i),tE(b_(e,`users/${t.uid}/recipies/${r}`),n).then((()=>{console.log("Recipe edited on server with ID",r)}))),deleteRecipe:(n,r)=>{return r&&s.current.set(n+"-removed",r),(i=b_(e,`users/${t.uid}/recipies/${n}`),nE(f_(i.firestore,E_),[new kg(i._key,dg.none())])).then((()=>{console.log("Recipe deleted on server with ID",n)}));var i}}}const dE=(0,n.createContext)({});function fE({db:e,children:r}){const i=hE(e,(0,n.useContext)(Xa).user);return(0,t.jsx)(dE.Provider,{value:i,children:r})}an("firebase","9.23.0","app");const{db:pE,auth:mE}=function(){const e=sn({apiKey:"AIzaSyBZaU6DaCaZHqeHFuQwg8enna3LkEkJNu8",authDomain:"recipiesapp-85118.firebaseapp.com",projectId:"recipiesapp-85118",storageBucket:"recipiesapp-85118.appspot.com",messagingSenderId:"192864545623",appId:"1:192864545623:web:8178b8ffa7b2b8b43d6c12",measurementId:"G-822KJ4KS41"}),t=function(e,t){const n="string"==typeof e?e:"(default)",r=en("object"==typeof e?e:on(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Ae(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&function(e,t,n,r={}){var i;const s=(e=f_(e,m_))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&kd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bd.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Dd(Nd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bd(s)}e._authCredentials=new Fd(new Rd(t,n))}}(r,...e)}return r}(e);return function(e,t){!function(e){if(e._initialized||e._terminated)throw new Dd(Nd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(e=f_(e,E_));const n=x_(e);if(n._uninitializedComponentsProvider)throw new Dd(Nd.FAILED_PRECONDITION,"SDK cache is already specified.");kd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Zw;return function(e,t,n){const r=new Od;return e.asyncQueue.enqueue((async()=>{try{await n_(e,n),await r_(e,t),r.resolve()}catch(e){const t=e;if(!i_(t))throw t;kd("Error enabling indexeddb cache. Falling back to memory cache: "+t),r.reject(t)}})).then((()=>r.promise))}(n,i,new Jw(i,r.cacheSizeBytes,void 0))}(t).catch((e=>{"failed-precondition"===e.code?console.error("FireStore IndexedDB - failed precondition: Multiple tabs open, persistence can only be enabled in one tab at a a time."):"unimplemented"===e.code&&console.error("FireStore IndexedDB: The current browser does not support all of the features required to enable persistence")})),{firebaseApp:e,db:t,auth:rs()}}();function gE(e){return""!==e.trim()&&!isNaN(+e)}const yE=/^\d+(\.\d+)? *[aA-zZ]+[aA-zZ ]*$/,vE=/^\d+(\.\d+)?$/,bE=e=>{const t=e.from[1].value.ingredients.length;return e.options.index===t-1},wE=da().test("is-num-unit-optional","Must be a number, optionally followed by a unit",((e,t)=>!e||yE.test(e)||gE(e))).max(30,"please make this shorter"),_E=(da().max(200,"Please make this shorter."),da().required("Required").trim().max(200,"Please make this shorter.")),EE=Oa().shape({lists:Pa().of(Oa().shape({name:da().max(200,"Please make this shorter.").required("A name is required."),ingredients:Pa().of(Oa().shape({name:da().default("").test("required","Ingredient name is required.",((e,t)=>bE(t)||""!==e.trim())).max(200,"Please make this shorter."),quantity:da().default("").test("required","Ingredient quantity is required.",((e,t)=>bE(t)||""!==e.trim())).max(30,"please make this shorter").test("is-num-unit-optional","Must be a number, optionally followed by a unit",((e,t)=>!e||yE.test(e)||gE(e))),percentage:da().test("is-num-or-whitespace","Must be a valid percentage.",((e,t)=>void 0!==e&&(""===e.trim()||vE.test(e))))}))})),anchor:da()}),xE=Pa().of(Oa().shape({additions:Pa().of(da()),removals:Pa().of(da()),notes:da().max(500,"Please make these notes shorter.")})),SE=/^(?<value>\d+(\.\d+)?) *(?<unit>[aA-zZ ]*?) *$/,kE=e=>{const t=function(e){const t=+e;return""===e.trim()||isNaN(t)?null:t}(e);if(t)return t;const n=e.match(SE);if(n){const{value:e,unit:t}=n.groups;return{value:parseFloat(e),unit:t}}};var IE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TE=n.createContext&&n.createContext(IE),CE=function(){return CE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},CE.apply(this,arguments)},AE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function NE(e){return e&&e.map((function(e,t){return n.createElement(e.tag,CE({key:t},e.attr),NE(e.child))}))}function DE(e){return function(t){return n.createElement(OE,CE({attr:CE({},e.attr)},t),NE(e.child))}}function OE(e){var t=function(t){var r,i=e.attr,s=e.size,o=e.title,a=AE(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",CE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:r,style:CE(CE({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==TE?n.createElement(TE.Consumer,null,(function(e){return t(e)})):t(IE)}function RE(e){return DE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 15l1.55 1.55c-.96 1.69-3.33 3.04-5.55 3.37V11h3V9h-3V7.82C14.16 7.4 15 6.3 15 5c0-1.65-1.35-3-3-3S9 3.35 9 5c0 1.3.84 2.4 2 2.82V9H8v2h3v8.92c-2.22-.33-4.59-1.68-5.55-3.37L7 15l-4-3v3c0 3.88 4.92 7 9 7s9-3.12 9-7v-3l-4 3zM12 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"}}]})(e)}function PE(e){return DE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function FE(e){return DE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(e)}function ME(e){return DE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}}]})(e)}function LE(e){return DE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}}]})(e)}function jE({text:e,value:n,toggle:r}){const i=n?(0,t.jsx)(LE,{}):(0,t.jsx)(ME,{});return(0,t.jsxs)("li",{role:"button",className:"menu-button",onClick:()=>r(!n),children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{className:"menu-button-checkbox",children:i})]})}function VE(){return VE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VE.apply(this,arguments)}var UE="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,zE={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},BE=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],$E=function(e,t,n,r,i){var s=i.offsetX,o=i.offsetY,a=r?8:0,l=n.split(" "),u=e.top+e.height/2,c=e.left+e.width/2,h=t.height,d=t.width,f=u-h/2,p=c-d/2,m="",g="0%",y="0%";switch(l[0]){case"top":f-=h/2+e.height/2+a,m="rotate(180deg)  translateX(50%)",g="100%",y="50%";break;case"bottom":f+=h/2+e.height/2+a,m="rotate(0deg) translateY(-100%) translateX(-50%)",y="50%";break;case"left":p-=d/2+e.width/2+a,m=" rotate(90deg)  translateY(50%) translateX(-25%)",y="100%",g="50%";break;case"right":p+=d/2+e.width/2+a,m="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(l[1]){case"top":f=e.top,g=e.height/2+"px";break;case"bottom":f=e.top-h+e.height,g=h-e.height/2+"px";break;case"left":p=e.left,y=e.width/2+"px";break;case"right":p=e.left-d+e.width,y=d-e.width/2+"px"}return{top:f="top"===l[0]?f-o:f+o,left:p="left"===l[0]?p-s:p+s,transform:m,arrowLeft:y,arrowTop:g}},qE=0,KE=(0,n.forwardRef)((function(e,t){var r=e.trigger,i=void 0===r?null:r,o=e.onOpen,a=void 0===o?function(){}:o,l=e.onClose,u=void 0===l?function(){}:l,c=e.defaultOpen,h=void 0!==c&&c,d=e.open,f=void 0===d?void 0:d,p=e.disabled,m=void 0!==p&&p,g=e.nested,y=void 0!==g&&g,v=e.closeOnDocumentClick,b=void 0===v||v,w=e.repositionOnResize,_=void 0===w||w,E=e.closeOnEscape,x=void 0===E||E,S=e.on,k=void 0===S?["click"]:S,I=e.contentStyle,T=void 0===I?{}:I,C=e.arrowStyle,A=void 0===C?{}:C,N=e.overlayStyle,D=void 0===N?{}:N,O=e.className,R=void 0===O?"":O,P=e.position,F=void 0===P?"bottom center":P,M=e.modal,L=void 0!==M&&M,j=e.lockScroll,V=void 0!==j&&j,U=e.arrow,z=void 0===U||U,B=e.offsetX,$=void 0===B?0:B,q=e.offsetY,K=void 0===q?0:q,H=e.mouseEnterDelay,G=void 0===H?100:H,W=e.mouseLeaveDelay,Q=void 0===W?100:W,Y=e.keepTooltipInside,X=void 0!==Y&&Y,J=e.children,Z=(0,n.useState)(f||h),ee=Z[0],te=Z[1],ne=(0,n.useRef)(null),re=(0,n.useRef)(null),ie=(0,n.useRef)(null),se=(0,n.useRef)(null),oe=(0,n.useRef)("popup-"+ ++qE),ae=!!L||!i,le=(0,n.useRef)(0);UE((function(){return ee?(se.current=document.activeElement,we(),ye(),me()):ge(),function(){clearTimeout(le.current)}}),[ee]),(0,n.useEffect)((function(){"boolean"==typeof f&&(f?ue():ce())}),[f,m]);var ue=function(e){ee||m||(te(!0),setTimeout((function(){return a(e)}),0))},ce=function(e){var t;ee&&!m&&(te(!1),ae&&(null===(t=se.current)||void 0===t||t.focus()),setTimeout((function(){return u(e)}),0))},he=function(e){null==e||e.stopPropagation(),ee?ce(e):ue(e)},de=function(e){clearTimeout(le.current),le.current=setTimeout((function(){return ue(e)}),G)},fe=function(e){null==e||e.preventDefault(),he()},pe=function(e){clearTimeout(le.current),le.current=setTimeout((function(){return ce(e)}),Q)},me=function(){ae&&V&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},ge=function(){ae&&V&&(document.getElementsByTagName("body")[0].style.overflow="auto")},ye=function(){var e,t=null==re||null===(e=re.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null==n||n.focus()};(0,n.useImperativeHandle)(t,(function(){return{open:function(){ue()},close:function(){ce()},toggle:function(){he()}}}));var ve,be,we=function(){if(!ae&&ee&&(null==ne?void 0:ne.current)&&(null==ne?void 0:ne.current)&&(null==re?void 0:re.current)){var e,t,n=function(e,t,n,r,i,s){var o=i.offsetX,a=i.offsetY,l={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},u=0,c=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t}(s),h=Array.isArray(n)?n:[n];for((s||Array.isArray(n))&&(h=[].concat(h,BE));u<h.length;){var d={top:(l=$E(e,t,h[u],r,{offsetX:o,offsetY:a})).top,left:l.left,width:t.width,height:t.height};if(!(d.top<=c.top||d.left<=c.left||d.top+d.height>=c.top+c.height||d.left+d.width>=c.left+c.width))break;u++}return l}(ne.current.getBoundingClientRect(),re.current.getBoundingClientRect(),F,z,{offsetX:$,offsetY:K},X);re.current.style.top=n.top+window.scrollY+"px",re.current.style.left=n.left+window.scrollX+"px",z&&ie.current&&(ie.current.style.transform=n.transform,ie.current.style.setProperty("-ms-transform",n.transform),ie.current.style.setProperty("-webkit-transform",n.transform),ie.current.style.top=(null===(e=A.top)||void 0===e?void 0:e.toString())||n.arrowTop,ie.current.style.left=(null===(t=A.left)||void 0===t?void 0:t.toString())||n.arrowLeft)}};ve=ce,void 0===(be=x)&&(be=!0),(0,n.useEffect)((function(){if(be){var e=function(e){"Escape"===e.key&&ve(e)};return document.addEventListener("keyup",e),function(){be&&document.removeEventListener("keyup",e)}}}),[ve,be]),function(e,t){void 0===t&&(t=!0),(0,n.useEffect)((function(){if(t){var n=function(t){if(9===t.keyCode){var n,r=null==e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),i=Array.prototype.slice.call(r);if(1===i.length)return void t.preventDefault();var s=i[0],o=i[i.length-1];t.shiftKey&&document.activeElement===s?(t.preventDefault(),o.focus()):document.activeElement===o&&(t.preventDefault(),s.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}}),[e,t])}(re,ee&&ae),function(e,t){void 0===t&&(t=!0),(0,n.useEffect)((function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}}),[e,t])}(we,_),function(e,t,r){void 0===r&&(r=!0),(0,n.useEffect)((function(){if(r){var n=function(n){var r=Array.isArray(e)?e:[e],i=!1;r.forEach((function(e){e.current&&!e.current.contains(n.target)||(i=!0)})),n.stopPropagation(),i||t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){r&&(document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n))}}}),[e,t,r])}(i?[re,ne]:[re],ce,b&&!y);var _e,Ee=function(){return n.createElement("div",Object.assign({},(e=ae?zE.popupContent.modal:zE.popupContent.tooltip,t={className:"popup-content "+(""!==R?R.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:VE({},e,T,{pointerEvents:"auto"}),ref:re,onClick:function(e){e.stopPropagation()}},!L&&k.indexOf("hover")>=0&&(t.onMouseEnter=de,t.onMouseLeave=pe),t),{key:"C",role:ae?"dialog":"tooltip",id:oe.current}),z&&!ae&&n.createElement("div",{ref:ie,style:zE.popupArrow},n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==R?R.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:VE({position:"absolute"},A)},n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),J&&"function"==typeof J?J(ce,ee):J);var e,t},xe=!(k.indexOf("hover")>=0),Se=ae?zE.overlay.modal:zE.overlay.tooltip,ke=[xe&&n.createElement("div",{key:"O","data-testid":"overlay","data-popup":ae?"modal":"tooltip",className:"popup-overlay "+(""!==R?R.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:VE({},Se,D,{pointerEvents:b&&y||ae?"auto":"none"}),onClick:b&&y?ce:void 0,tabIndex:-1},ae&&Ee()),!ae&&Ee()];return n.createElement(n.Fragment,null,function(){for(var e={key:"T",ref:ne,"aria-describedby":oe.current},t=Array.isArray(k)?k:[k],r=0,s=t.length;r<s;r++)switch(t[r]){case"click":e.onClick=he;break;case"right-click":e.onContextMenu=fe;break;case"hover":e.onMouseEnter=de,e.onMouseLeave=pe;break;case"focus":e.onFocus=de,e.onBlur=pe}if("function"==typeof i){var o=i(ee);return!!i&&n.cloneElement(o,e)}return!!i&&n.cloneElement(i,e)}(),ee&&s.createPortal(ke,(null===(_e=document.getElementById("popup-root"))&&((_e=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(_e)),_e)))}));const HE=(0,n.createContext)({setDropdownOpen:e=>{}});function GE({trigger:e,position:r,offset:i,children:s}){console.assert(!i||2===i.length,"DropdownMenu: Offset should be an array [x, y]");const o=i?{top:i[1],left:i[0]}:void 0,[a,l]=(0,n.useState)(!1);return(0,t.jsx)(KE,{trigger:e,position:r,on:"click",closeOnDocumentClick:!0,mouseLeaveDelay:300,mouseEnterDelay:0,arrow:!1,open:a,onOpen:()=>l(!0),onClose:()=>l(!1),children:(0,t.jsx)(HE.Provider,{value:{setDropdownOpen:l},children:(0,t.jsx)("menu",{className:"dropdown-menu",style:o,children:s})})})}function WE({text:e,action:r}){const{setDropdownOpen:i}=(0,n.useContext)(HE);return(0,t.jsx)("li",{role:"button",className:"menu-button",onClick:()=>{r(),i(!1)},children:(0,t.jsx)("span",{children:e})})}const QE=(0,n.forwardRef)((function({isAnchor:e,...n},r){return e?(0,t.jsx)("div",{className:"percentageInput",children:(0,t.jsx)(RE,{})}):(0,t.jsxs)("div",{className:"percentageInput",children:[(0,t.jsx)("input",{...n,ref:r,type:"text",placeholder:"?",autoComplete:"off","aria-label":"ingredient quantity as a percentage of the anchor"}),(0,t.jsx)("span",{className:"percentInputSymbol",children:"%"})]})}));function YE(e,t,r){return{push:(0,n.useCallback)((n=>{t(e,[...r,n])}),[t,e,r]),remove:(0,n.useCallback)((n=>{t(e,[...r.slice(0,n),...r.slice(n+1)])}),[t,e,r]),replace:(0,n.useCallback)((n=>{t(e,n)}),[t,e]),insert:(0,n.useCallback)(((n,i)=>{t(e,[...r.slice(0,n),i,...r.slice(n)])}),[t,e,r])}}const XE=(0,n.forwardRef)((function({closeOnBackgroudClick:e=!1,keepMounted:r=!1,onClose:i,children:s,...o},a){const l=(0,n.useRef)(null);(0,n.useImperativeHandle)(a,(()=>l.current));const u=t=>{if(!e||!o.open||!l.current||"DIALOG"!==l.current.tagName)return;const n=l.current.getBoundingClientRect(),r=function(e,t,n){return n.top<=t&&t<=n.top+n.height&&n.left<=e&&e<=n.left+n.width}(t.clientX,t.clientY,n);r||i()};return(0,n.useEffect)((()=>(document.addEventListener("click",u),function(){document.removeEventListener("click",u)}))),(0,t.jsx)("dialog",{ref:l,...o,children:r&&s||o.open&&s})})),JE=function({input:e,confirm:r,cancel:i}){const[s,o]=(0,n.useState)("");return(0,t.jsxs)("fieldset",{children:[(0,t.jsx)("legend",{className:"h-2",children:"Add Substitution"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"sub",children:["Substitute the ",e," with "]}),(0,t.jsx)("input",{type:"text",name:"sub",className:"in-string",onChange:e=>o(e.target.value),autoFocus:!0,"aria-label":`a substitute for ${e}`})]}),(0,t.jsx)("button",{"aria-details":"confirm substitution",type:"button",className:"primary",onClick:()=>r({additions:[s],removals:[e],notes:""}),children:"Confirm"}),(0,t.jsx)("button",{type:"button",onClick:()=>i(),children:"Cancel"})]})},ZE={name:"",optional:!1,percentage:"",quantity:""},ex=function({listIdx:e,listPos:r,isPercentagesIncluded:i,isNamed:s,onPercentageBlur:o,onQuantityBlur:a,onAnchorChange:l,...u}){const{control:c,setValue:h,register:d}=u,[f,p,m]=Ms({control:c,name:[`ingredients.lists.${e}.ingredients`,"substitutions","ingredients.anchor"]}),{push:g,remove:y}=YE(`ingredients.lists.${e}.ingredients`,h,f),{push:v}=YE("substitutions",h,p),{errors:b}=function(e){const t=Ts(),{control:r=t.control,disabled:i,name:s,exact:o}=e||{},[a,l]=n.useState(r._formState),u=n.useRef(!0),c=n.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=n.useRef(s);return h.current=s,Rs({disabled:i,next:e=>u.current&&Os(h.current,e.name,o)&&Ns(e,c.current,r._updateFormState)&&l({...r._formState,...e}),subject:r._subjects.state}),n.useEffect((()=>(u.current=!0,c.current.isValid&&r._updateValid(!0),()=>{u.current=!1})),[r]),Cs(a,r,c.current,!1)}({control:c}),w=[...f],_=f[f.length-1];_&&""===_.name||w.push({...ZE,id:cE(),isFake:!0});const{openModal:E,modal:x}=function(e){const r=(0,n.useRef)(),i=(0,n.useRef)(),[s,o]=(0,n.useState)(!1),a=()=>{o(!1),r.current=void 0,i.current=void 0};let l=null;return s&&(l=(({...e})=>(0,t.jsx)(XE,{open:!0,onClose:()=>e.cancel(),closeOnBackgroudClick:!0,children:(0,t.jsx)(JE,{...e})}))({input:r.current,confirm:e=>{i.current(e),a()},cancel:a})),{openModal:({input:e,onClose:t})=>{e&&(r.current=e),o(!0),i.current=t},modal:l}}(),S=e=>{v(e)},k=i?"ingredientList showPercentages":"ingredientList";return(0,t.jsxs)(t.Fragment,{children:[x,s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...d(`ingredients.lists.${e}.name`),type:"text",className:"subIngredientsName",placeholder:"Untitled List",autoComplete:"off"}),(0,t.jsx)(Ka,{error:b.ingredients?.lists?.[e]?.name})]}),(0,t.jsxs)("div",{className:k,children:[(0,t.jsx)("div",{className:"ingredientListLabel",children:"Ingredient"}),(0,t.jsx)("div",{className:"ingredientListLabel",children:"Quantity"}),i&&(0,t.jsx)("div",{className:"ingredientListLabel",children:"Proportion"}),(0,t.jsx)("div",{})," ",w.map(((s,u)=>{const c=r+u,f=c===m,p=b.ingredients?.lists?.[e]?.ingredients?.[u];return s.isFake?(0,t.jsx)(n.Fragment,{children:(0,t.jsx)("input",{name:"add-new",onChange:e=>g({id:s.id,...ZE,name:e.target.value}),type:"text",className:"name new-ingredient",autoComplete:"off",placeholder:"Add new ingredient","aria-label":"new ingredient name","aria-details":"Used to add a new ingredient. Other fields will be added once a name is typed."})},s.id):(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)("input",{...d(`ingredients.lists.${e}.ingredients.${u}.name`),type:"text",className:"name",autoComplete:"off","aria-label":"ingredient name"}),(0,t.jsx)("input",{...d(`ingredients.lists.${e}.ingredients.${u}.quantity`,{onBlur:a(e,u)}),type:"text",className:"quantity",autoComplete:"off","aria-label":"ingredient quantity"}),i&&(0,t.jsx)(QE,{...d(`ingredients.lists.${e}.ingredients.${u}.percentage`,{onBlur:o(e,u)}),isAnchor:f}),(0,t.jsxs)(GE,{trigger:(0,t.jsx)("span",{children:(0,t.jsx)(FE,{className:"ingredientMenu icon-button",tabIndex:0})}),position:"left top",offset:["-0.8rem","0rem"],children:[(0,t.jsx)(jE,{text:"Optional",value:s.optional,toggle:t=>h(`ingredients.lists.${e}.ingredients.${u}.optional`,t)}),!f&&i&&(0,t.jsx)(WE,{text:"Set to anchor",action:()=>l(c)}),(0,t.jsx)(WE,{text:"Delete",action:()=>y(u)}),(0,t.jsx)(WE,{text:"Provide substitution",action:()=>E({input:s.name,onClose:S})})]}),(0,t.jsxs)("div",{className:"ingredientErrors",children:[(0,t.jsx)(Ka,{error:p?.name}),(0,t.jsx)(Ka,{error:p?.quantity}),(0,t.jsx)(Ka,{error:p?.percentage})]})]},s.id)}))]})]})};var tx=i(7322),nx=i.n(tx);function rx(e,t){return ix(e)&&ix(t)?nx()().from(e).possibilities().includes(t):e===t}function ix(e){return nx()().possibilities().includes(e)}const sx=function({setValue:e,control:r,register:i}){const s=Ms({control:r,name:"ingredients.lists"}),o=Ms({control:r,name:"ingredients.anchor"}),{replace:a,push:l}=YE("ingredients.lists",e,s),[u,c]=(0,n.useState)(!1),[h,d]=(0,n.useState)(s.length>1),f=s.flatMap((e=>e.ingredients));(0,n.useEffect)((()=>{g(o)}),[]);const p=(e,t)=>{let n=0;for(let t=0;t<e;t++)n+=s[t].ingredients.length;return n+t},m=(t,n,r)=>{const i=function(e,t){const n=((...e)=>e.flatMap((e=>{const t=kE(e);return t?[t]:[]})))(t.quantity,e.quantity);if(2!==n.length)return;const[r,i]=n,s="number"==typeof r,o="number"==typeof i;return s||o?s&&o?i/r*100:void 0:rx(r.unit,i.unit)?ix(i.unit)?nx()(i.value).from(i.unit).to(r.unit)/r.value*100:i.value/r.value*100:void 0}(s[t].ingredients[n],f[r]);i?_(i,t,n):e(`ingredients.lists.${t}.ingredients.${n}.percentage`,"")},g=e=>{for(let t=0;t<s.length;t++){const n=s[t];for(let r=0;r<n.ingredients.length;r++)m(t,r,e)}},y=(e,t)=>n=>{const r=kE(n.target.value);r&&w(r,e,t),p(e,t)===o?g(o):m(e,t,o)},v=(e,t)=>n=>{const r=s[e].ingredients[t],i=parseFloat(r.percentage);if(isNaN(i))return;_(i,e,t);const a=f[o],l=kE(a.quantity);if(l){const n=kE(r.quantity),s=((e,t,n)=>{const r=t/100;if("number"==typeof e)return e*r;const i=e.value*r;return n&&e.unit!==n?rx(e.unit,n)?{value:nx()(i).from(e.unit).to(n),unit:n}:void 0:{value:i,unit:e.unit}})(l,i,"number"==typeof n?void 0:n?.unit);s&&w(s,e,t)}},b=t=>{console.log("anchor change, new idx",t),g(t),e("ingredients.anchor",t)},w=(t,n,r)=>{const i="number"==typeof t?`${t}`:`${t.value} ${t.unit}`;e(`ingredients.lists.${n}.ingredients.${r}.quantity`,i,{shouldValidate:!0})},_=(t,n,r)=>{const i=+t.toFixed(2);e(`ingredients.lists.${n}.ingredients.${r}.percentage`,`${i}`,{shouldValidate:!0})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"ingredientsHeader",children:[(0,t.jsx)("h2",{children:"Ingredients"}),(0,t.jsxs)(GE,{trigger:(0,t.jsx)("span",{children:(0,t.jsx)(FE,{className:"ingredientsHeaderMenu"})}),position:"left top",offset:["-0.8rem","0rem"],children:[(0,t.jsx)(jE,{text:"Use baker's percentages",value:u,toggle:e=>c(e)}),(0,t.jsx)(jE,{text:"Use multiple lists",value:h,toggle:e=>(e=>{if(!e){if(!window.confirm("Are you sure you want to switch back to having a single list? This will remove all your list names and cannot be undone."))return;console.log("merging",f),a([{id:cE(),name:"Main",ingredients:f}])}d(e)})(e)})]})]}),s.map(((n,s)=>(0,t.jsx)(ex,{listIdx:s,listPos:p(s,0),isPercentagesIncluded:u,isNamed:h,onQuantityBlur:y,onPercentageBlur:v,onAnchorChange:b,register:i,setValue:e,control:r},n.id))),h&&(0,t.jsx)("button",{type:"button",onClick:()=>l({id:cE(),name:"",ingredients:[]}),className:"addIngredientButton",children:"Add ingredient list"})]})};function ox({substitution:e}){const{removals:n,additions:r}=e;return(e=>1===e.removals.length&&1===e.additions.length)(e)?(0,t.jsxs)("p",{children:["The ",n[0]," can be substituted for ",r[0]]}):(0,t.jsxs)("pre",{children:["display of this substitution is not yet suppourted :)",JSON.stringify(e)]})}const ax=function({control:e,setValue:r}){const i=Ms({control:e,name:"substitutions"}),{remove:s}=YE("substitutions",r,i);return(0,t.jsx)("div",{className:"substitutionsGrid",children:i.map(((e,r)=>(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)(ox,{substitution:e}),(0,t.jsx)(PE,{className:"substitutionsRemoveButton icon-button",style:{left:"10px"},onClick:()=>s(r)})]},r)))})},lx=(0,n.forwardRef)((function({defaultHeight:e="0",...r},i){const s=(0,n.useRef)(null);(0,n.useImperativeHandle)(i,(()=>s.current));const o=()=>{s.current?(s.current.style.height=e,s.current.style.height=s.current.scrollHeight+3+"px"):console.error("TextAreaAutoHeight: ref is null")},[a,l]=function(e,...t){const n={...e},r=[];for(const e of t)r.push(n[e]),delete n[e];return[n,...r]}(r,"onChange");return(0,n.useEffect)((()=>{o()})),(0,t.jsx)("textarea",{ref:s,...a,style:{overflow:"hidden"},onChange:e=>{l&&l(e),o()}})})),ux=function({doSubmit:e,initialValues:n}){const r=So({resolver:Ua(Oa({name:_E,timeframe:da().max(150,"Please make this shorter."),makes:wE,notes:da().max(1e4,"Please make this shorter."),ingredients:EE,servings:da().max(150,"Please make this shorter."),instructions:da().max(1e4,"Please make this shorter."),substitutions:xE})),mode:"onBlur",reValidateMode:"onBlur",defaultValues:n}),{register:i,handleSubmit:s,control:o,setValue:a,getValues:l,formState:{errors:u}}=r;return(0,t.jsxs)("form",{onSubmit:s((t=>{const n=function(e){const t={name:e.name.trim()};if(""!==e.servings&&(t.servings=e.servings),""!==e.timeframe&&(t.timeframe=e.timeframe.trim()),""!==e.makes&&(t.makes=kE(e.makes)),""!==e.notes&&(t.notes=e.notes.trim()),e.ingredients.lists.length>0&&(t.ingredients={lists:e.ingredients.lists.map((e=>({name:e.name,ingredients:e.ingredients.map(((e,t)=>({name:e.name,quantity:kE(e.quantity),optional:e.optional})))})))},e.ingredients.anchor)){const n="string"==typeof e.ingredients.anchor?parseInt(e.ingredients.anchor):e.ingredients.anchor;t.ingredients.anchor=n}return""!==e.instructions&&(t.instructions=e.instructions),e.substitutions.length>0&&(t.substitutions=e.substitutions),t}(t);e(n)})),className:"form",children:[(0,t.jsx)("input",{...i("name"),type:"text",className:"recipeName",placeholder:"Untitled",autoComplete:"off","aria-label":"recipie name"}),(0,t.jsxs)("section",{className:"meta",children:[(0,t.jsx)("label",{htmlFor:"timeframe",className:"metaLabel",children:"Timeframe"}),(0,t.jsx)("input",{...i("timeframe"),type:"text",placeholder:"-",autoComplete:"off"}),(0,t.jsx)("label",{htmlFor:"makes",className:"metaLabel",children:"Yields"}),(0,t.jsx)("input",{...i("makes"),type:"text",placeholder:"-",autoComplete:"off"}),(0,t.jsx)("label",{htmlFor:"servings",className:"metaLabel",children:"Serves"}),(0,t.jsx)("input",{...i("servings"),type:"text",placeholder:"-",autoComplete:"off"})]}),(0,t.jsx)(Ka,{error:u.name}),(0,t.jsx)(Ka,{error:u.timeframe}),(0,t.jsx)(Ka,{error:u.makes}),(0,t.jsx)(Ka,{error:u.servings}),(0,t.jsxs)("div",{className:"notes",children:[(0,t.jsx)("label",{htmlFor:"notes",children:"Extra notes"}),(0,t.jsx)(lx,{...i("notes"),defaultHeight:"0",className:"multiLine"}),(0,t.jsx)(Ka,{error:u.notes})]}),(0,t.jsx)(sx,{control:o,register:i,getValues:l,setValue:a}),(0,t.jsx)(ax,{control:o,setValue:a}),(0,t.jsxs)("div",{className:"instructions",children:[(0,t.jsx)("label",{htmlFor:"instructions",className:"h-2",children:"Instructions"}),(0,t.jsx)(lx,{...i("instructions"),defaultHeight:"0",className:"multiLine"}),(0,t.jsx)(Ka,{error:u.instructions})]}),(0,t.jsx)("input",{type:"submit"})]})},cx={fontSize:"var(--font-size-large)",flex:"0 0 auto"},hx={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},dx=function({message:e}){return(0,t.jsx)("div",{style:hx,children:(0,t.jsx)("em",{style:cx,children:e})})};function fx(e){return e?"number"==typeof e?`${e}`:`${e.value} ${e.unit}`:""}const px={fontSize:"var(--font-size-large)",flex:"0 0 auto"},mx={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},gx=function({message:e}){return(0,t.jsx)("div",{style:mx,children:(0,t.jsx)("em",{style:px,children:e})})},yx=function({recipeId:e,recipeName:n}){const r=Y();return(0,t.jsx)("div",{role:"button",className:"RecipeCard",onClick:()=>r(`/view-${e}`),children:n})},vx=function(){const{recipes:e}=(0,n.useContext)(dE);if("prefetch"===e.status)return(0,t.jsx)(Ya,{message:"Loading recipes..."});if("error"===e.status)return(0,t.jsx)(dx,{message:`Something went wrong :( ${e.message??"<no error message>"}`});const r=e.data,i=Array.from(r).map((([e,n])=>(0,t.jsx)(yx,{recipeId:e,recipeName:n.name},e)));return(0,t.jsx)("div",{className:"RecipeCardContainer","aria-details":"list of saved recipies",children:i})},bx=function({ingredients:e,substitutions:r}){const i=e.lists.length>1;return(0,t.jsxs)("section",{className:"ingredients",children:[i?(0,t.jsx)("h2",{className:"h2",children:e.lists[0].name}):(0,t.jsx)("h2",{className:"h2",children:"Ingredients"}),(0,t.jsx)("ul",{className:"ingredientList",children:e.lists.map(((e,r)=>{const s=0===r;return(0,t.jsxs)(n.Fragment,{children:[i&&!s&&(0,t.jsx)("h2",{className:"ingredientListName",children:e.name}),e.ingredients.map(((e,i)=>{const s=e.optional?(0,t.jsx)("span",{children:"(optional)"}):null;return(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)("li",{children:fx(e.quantity)}),(0,t.jsxs)("li",{className:"ingredientName",children:[e.name,"  ",s]})]},`ingredient-${i}/${r}`)}))]},`ingredients-${r}`)}))})]})},wx=function({recipe:e}){const{name:n,servings:r,makes:i,timeframe:s,notes:o,ingredients:a,substitutions:l,instructions:u}=e,c=r||i||s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{children:n}),c&&(0,t.jsxs)("ul",{className:"meta","aria-details":"recipie metadata",children:[r&&(0,t.jsxs)("li",{children:["Serves ",r]}),i&&(0,t.jsxs)("li",{children:["Yields ",fx(i)]}),s&&(0,t.jsxs)("li",{children:["Time: ",s]})]}),o&&(0,t.jsx)("section",{"aria-details":"recipie notes",className:"notes",children:o}),(0,t.jsxs)("div",{className:"main",children:[a&&(0,t.jsx)(bx,{ingredients:a,substitutions:l}),u&&(0,t.jsxs)("section",{className:"instructions",children:[(0,t.jsx)("h2",{className:"h2",children:"Method"}),(0,t.jsx)("ol",{children:u.split("\n").map(((e,n)=>(0,t.jsxs)("li",{className:"instruction",children:[(0,t.jsxs)("span",{className:"instructionMarker",children:[n+1,". "]}),(0,t.jsx)("span",{children:e})]},n)))})]})]}),(0,t.jsx)("hr",{}),l&&(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"h2",children:"Substitutions"}),(0,t.jsx)("ul",{"aria-details":"substitutions list",children:l.map(((e,n)=>{const{removals:r,additions:i}=e;return(e=>1===e.removals.length&&1===e.additions.length)(e)?(0,t.jsxs)("li",{className:"substitution",children:["The ",r[0]," can be substituted for ",i[0]]},n):(0,t.jsxs)("pre",{children:["display of this substitution is not yet suppourted :)",JSON.stringify(e)]},n)}))})]})]})};s.render((0,t.jsx)(n.StrictMode,{children:(0,t.jsx)((function(t){let{basename:r,children:i,future:s,window:o}=t,c=n.useRef();var p;null==c.current&&(c.current=(void 0===(p={window:o,v5Compat:!0})&&(p={}),function(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,p=e.Pop,m=null,g=y();function y(){return(c.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:p,location:w.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"==typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,c.replaceState(a({},c.state,{idx:g}),""));let w={get action(){return p},get location(){return t(s,c)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,v),m=e,()=>{s.removeEventListener(l,v),m=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=d(w.location,t,n);r&&r(i,t),g=y()+1;let a=h(i,g),l=w.createHref(i);try{c.pushState(a,"",l)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;s.location.assign(l)}o&&m&&m({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=d(w.location,t,n);r&&r(i,t),g=y();let s=h(i,g),a=w.createHref(i);c.replaceState(s,"",a),o&&m&&m({action:p,location:w.location,delta:0})},go:e=>c.go(e)};return w}((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:f(t)}),null,p)));let m=c.current,[g,y]=n.useState({action:m.action,location:m.location}),{v7_startTransition:v}=s||{},b=n.useCallback((e=>{v&&me?me((()=>y(e))):y(e)}),[y,v]);return n.useLayoutEffect((()=>m.listen(b)),[m,b]),n.createElement(he,{basename:r,children:i,location:g.location,navigationType:g.action,navigator:m,future:s})}),{children:(0,t.jsxs)((function(e){let{children:t,location:n}=e;return ee(de(t),n)}),{children:[(0,t.jsxs)(ce,{path:"/",element:(0,t.jsx)((function(){return(0,t.jsx)("div",{id:"app-content",children:(0,t.jsx)(Ja,{auth:mE,db:pE,children:(0,t.jsx)(fE,{db:pE,children:(0,t.jsx)(ue,{})})})})}),{}),children:[(0,t.jsx)(ce,{index:!0,element:(0,t.jsx)((function(){return(0,t.jsxs)("div",{style:{height:"100%",display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr"},children:[(0,t.jsx)(ve,{to:"/add-recipe",children:"add a recipe!"}),(0,t.jsx)(vx,{})]})}),{})}),(0,t.jsx)(ce,{path:"add-recipe",element:(0,t.jsx)((function(){const e=(0,n.useContext)(dE).addRecipe,r=Y(),i={name:"",timeframe:"",makes:"",notes:"",ingredients:{lists:[{id:cE(),name:"Main",ingredients:[]}],anchor:0},servings:"",instructions:"",substitutions:[]};return(0,t.jsx)("div",{className:"AddRecipePage","aria-details":"add a new recipie",children:(0,t.jsx)(ux,{doSubmit:t=>{e(t,(e=>{r(`/view-${e}`,{replace:!0})}))},initialValues:i})})}),{})}),(0,t.jsx)(ce,{path:"view-:recipeId",element:(0,t.jsx)((function(){const e=J().recipeId,{recipes:r,deleteRecipe:i}=(0,n.useContext)(dE),s=Y();if(void 0===e)return console.error("RecipePage: no recipe provided as param"),(0,t.jsx)(dx,{message:"Oops! Something went wrong."});const o=r.data?.get(e);return void 0===o?(console.error("Recipe not found. Recipie data: ",r.data),(0,t.jsx)(gx,{message:"This recipie does not exist :("})):(0,t.jsxs)("div",{className:"RecipePage",children:[(0,t.jsx)(wx,{recipe:o}),(0,t.jsx)("hr",{}),(0,t.jsx)("button",{onClick:()=>s(`/edit-${e}`),children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete recipe '${o.name}'`)&&i(e,(()=>{s("/")}))},children:"Delete"})]})}),{})}),(0,t.jsx)(ce,{path:"edit-:recipeId",element:(0,t.jsx)((function(){const e=J().recipeId,{editRecipe:r,recipes:i}=(0,n.useContext)(dE),s=Y();if(void 0===e)return console.error("EditRecipePage: no recipe provided as param"),(0,t.jsx)(dx,{message:"Oops! Something went wrong."});const o=i.data?.get(e);if(void 0===o)return(0,t.jsx)(gx,{message:"This recipie does not exist :("});const a=o.ingredients?{lists:o.ingredients.lists.map((e=>({id:cE(),name:e.name,ingredients:e.ingredients.map((e=>({id:cE(),name:e.name,quantity:fx(e.quantity),optional:e.optional,percentage:""})))}))),anchor:o.ingredients.anchor||0}:{lists:[],anchor:0},l=o.substitutions||[],u={name:o.name,timeframe:o.timeframe||"",makes:fx(o.makes),notes:o.notes||"",ingredients:a,servings:o.servings||"",instructions:o.instructions||"",substitutions:l};return(0,t.jsx)("div",{className:"EditRecipePage","aria-details":"edit an existing recipie",children:(0,t.jsx)(ux,{doSubmit:t=>{r(t,e,(e=>{s(`/view-${e}`,{replace:!0})}))},initialValues:u})})}),{})})]}),(0,t.jsx)(ce,{path:"*",element:(0,t.jsx)(gx,{message:"Page not found"})})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(process.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t=`${process.env.PUBLIC_URL}/service-worker.js`;_e?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Ee(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ee(t,e)}))}}()})()})();